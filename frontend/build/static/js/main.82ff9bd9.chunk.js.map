{"version":3,"sources":["contexts/AuthContext.jsx","contexts/ChildContext.js","assets/logo.png","components/Navigation.jsx","components/Login.jsx","components/Register.jsx","components/Dashboard.jsx","components/ChildSelector.jsx","components/PillarsOverview.jsx","components/PillarTechniques.jsx","components/Subscription.jsx","components/Rewards.jsx","components/Profile.jsx","pages/Challenges.jsx","components/ChallengeDetail.jsx","context/AuthContext.js","pages/PillarView.js","App.js","index.js"],"names":["AuthContext","createContext","API_URL","process","useAuth","useContext","AuthProvider","_ref","children","currentUser","setCurrentUser","useState","userSubscription","setUserSubscription","loading","setLoading","error","setError","isAuthenticated","setIsAuthenticated","async","fetchSubscriptionStatus","token","localStorage","getItem","console","log","response","fetch","method","headers","data","json","ok","Error","message","subscription","useEffect","mounted","userData","substring","status","removeItem","user","fetchCurrentUser","loadUserData","value","register","email","password","name","body","JSON","stringify","setItem","login","logout","updateProfile","prevUser","hasPremiumAccess","hasUser","hasSubscription","_jsx","Provider","ChildContext","useChild","ChildProvider","activeChild","setActiveChild","savedChildId","Navigation","isMenuOpen","setIsMenuOpen","location","useLocation","className","_jsxs","Link","to","src","logo","alt","onClick","toggleMenu","FaTimes","FaBars","pathname","_Fragment","includes","FaUser","FaSignOutAlt","FaCrown","Login","setEmail","setPassword","navigate","useNavigate","role","onSubmit","e","preventDefault","htmlFor","FaEnvelope","type","id","onChange","target","required","FaLock","disabled","Register","setName","confirmPassword","setConfirmPassword","length","Dashboard","dashboardData","setDashboardData","selectedChild","setSelectedChild","isPremium","_currentUser$children","url","todayChallenge","childId","challengeId","completed","fetchDashboardData","map","child","age","FaChartLine","size","overallProgress","FaCalendarAlt","activitiesCompleted","FaTrophy","points","title","description","pillars","pillar","shortDescription","progress","style","width","totalActivities","ChildSelector","PillarsOverview","setPillars","content","setContent","challenges","setChallenges","achievements","setAchievements","componentLoading","setComponentLoading","pillarsResponse","errorData","contentResponse","challengesResponse","achievementsResponse","pillarsData","contentData","challengesData","achievementsData","Promise","all","err","fetchData","short_description","PillarTechniques","pillarId","useParams","techniques","setTechniques","fetchTechniques","technique","FaStar","difficulty_level","FaClock","duration","FaUserFriends","age_group","steps","step","index","tips","tip","stripePromise","loadStripe","plans","price","interval","features","regularPrice","bestValue","CheckoutForm","selectedPlan","onSuccess","onError","stripe","useStripe","elements","useElements","event","cardElement","getElement","CardElement","stripeError","paymentMethod","createPaymentMethod","card","paymentMethodId","planId","customerId","confirmError","paymentIntent","confirmCardPayment","clientSecret","options","base","fontSize","color","invalid","Subscription","setSelectedPlan","subscriptionComplete","setSubscriptionComplete","subscriptionError","setSubscriptionError","FaCheck","plan","handlePlanSelect","toFixed","feature","Elements","setTimeout","errorMessage","FaRegStar","Rewards","activeTab","setActiveTab","certificates","setCertificates","marketplace","setMarketplace","setPoints","fetchRewardsData","achievement","unlocked","icon","certificate","_currentUser$children2","find","Date","date","toLocaleDateString","handleShareCertificate","certificateId","FaShare","handlePrintCertificate","window","print","FaPrint","reward","image","redeemed","rewardId","updatedPoints","prevMarketplace","item","alert","handleRedeemReward","href","Profile","profile","setProfile","newChild","setNewChild","showAddChildForm","setShowAddChildForm","editingChild","setEditingChild","fetchProfile","FaChild","FaCog","updatedProfile","FaEdit","confirm","profileResponse","profileData","handleDeleteChild","FaTrash","FaPlus","ageGroup","min","max","language","theme","Challenges","dailyChallenge","setDailyChallenge","weeklyChallenges","setWeeklyChallenges","completedChallenges","setCompletedChallenges","Set","calendarChallenges","setCalendarChallenges","total","streak","currentMonth","getMonth","currentYear","getFullYear","now","dailyResponse","dailyData","challenge","weeklyResponse","weeklyData","completedResponse","completedData","completed_challenges","c","calendarResponse","calendarData","progressResponse","progressData","totalChallenges","fetchChallenges","day","statusText","progressDataResponse","handleCalendarChallengeToggle","ChallengeDetail","setChallenge","fetchChallenge","FaArrowLeft","selected","instructions","materials","PillarView","_user$children","_pillar$age_groups","_pillar$age_groups2","_pillar$age_groups3","setPillar","pillarResponse","pillarData","techniquesResponse","techniquesData","filter","t","content_type","fetchPillarData","age_groups","toddler","elementary","teen","_technique$content_da","_technique$content_da2","content_data","examples","example","ProtectedRoute","Navigate","PremiumRoute","_ref2","RootRedirect","App","BrowserRouter","Routes","Route","path","element","ReactDOM","createRoot","document","getElementById","render","React","StrictMode"],"mappings":"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","file":"static/js/main.82ff9bd9.chunk.js","sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\n\n// Create the authentication context\nconst AuthContext = createContext();\n\n// Hard-code the API URL for testing if environment variables aren't working\nconst API_URL = process.env.REACT_APP_API_URL || 'https://confident-kids-api.kevin-mcgovern.workers.dev';\n\n// Custom hook to use the auth context\nexport const useAuth = ()  => {\n  return useContext(AuthContext);\n};\n\n// Provider component that wraps the app and makes auth object available to any child component that calls useAuth()\nexport function AuthProvider({ children }) {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [userSubscription, setUserSubscription] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [isAuthenticated, setIsAuthenticated] = useState(false); // Add this for compatibility\n\n  // Function to register a new user\n  async function register(email, password, name) {\n    try {\n      setError('');\n      console.log('Registering with:', { email, name });\n      console.log('Using API URL:', API_URL);\n      \n      const response = await fetch(`${API_URL}/api/users/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password, name }),\n      });\n\n      const data = await response.json();\n      console.log('Register response:', data);\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to register');\n      }\n\n      // Store the token in localStorage\n      localStorage.setItem('authToken', data.token);\n      \n      // Set the current user\n      setCurrentUser(data.user);\n      setIsAuthenticated(true);\n      \n      return data;\n    } catch (error) {\n      console.error('Registration error:', error);\n      setError(error.message);\n      throw error;\n    }\n  }\n\n  // Function to log in a user\n  async function login(email, password) {\n    try {\n      setError('');\n      console.log('Logging in with:', { email });\n      console.log('Using API URL:', API_URL);\n      \n      const response = await fetch(`${API_URL}/api/users/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await response.json();\n      console.log('Login response:', data);\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to login');\n      }\n\n      // Store the token in localStorage\n      localStorage.setItem('authToken', data.token);\n      \n      // Set the current user\n      setCurrentUser(data.user);\n      setIsAuthenticated(true);\n      \n      console.log('Auth state after login:', { user: data.user, isAuthenticated: true });\n      \n      // Fetch subscription status\n      await fetchSubscriptionStatus();\n      \n      return data;\n    } catch (error) {\n      console.error('Login error:', error);\n      setError(error.message);\n      throw error;\n    }\n  }\n\n  // Function to log out a user\n  async function logout() {\n    try {\n      setError('');\n      // Remove the token from localStorage\n      localStorage.removeItem('authToken');\n      \n      // Clear the current user\n      setCurrentUser(null);\n      setUserSubscription(null);\n      setIsAuthenticated(false);\n      \n      return true;\n    } catch (error) {\n      setError(error.message);\n      throw error;\n    }\n  }\n\n  // Function to fetch the current user's profile\n  async function fetchCurrentUser() {\n    try {\n      const token = localStorage.getItem('authToken');\n      \n      if (!token) {\n        setCurrentUser(null);\n        setIsAuthenticated(false);\n        setLoading(false);\n        return null;\n      }\n      \n      console.log('Fetching user profile with token:', token.substring(0, 10) + '...');\n      \n      const response = await fetch(`${API_URL}/api/users/profile`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      const data = await response.json();\n      console.log('User profile response:', data);\n\n      if (!response.ok) {\n        // If token is invalid, clear it\n        if (response.status === 401) {\n          localStorage.removeItem('authToken');\n          setCurrentUser(null);\n          setIsAuthenticated(false);\n          setLoading(false);\n          return null;\n        }\n        throw new Error(data.message || 'Failed to fetch user profile');\n      }\n\n      const userData = data.user || data;\n      setCurrentUser(userData);\n      setIsAuthenticated(true);\n      return userData;\n    } catch (error) {\n      console.error('Error fetching current user:', error);\n      localStorage.removeItem('authToken');\n      setCurrentUser(null);\n      setIsAuthenticated(false);\n      return null;\n    }\n  }\n\n  // Function to fetch the user's subscription status\n  async function fetchSubscriptionStatus() {\n    try {\n      const token = localStorage.getItem('authToken');\n      \n      if (!token || !currentUser) {\n        setUserSubscription(null);\n        return null;\n      }\n      \n      console.log('Fetching subscription status');\n      \n      const response = await fetch(`${API_URL}/api/subscriptions/status`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      const data = await response.json();\n      console.log('Subscription status response:', data);\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to fetch subscription status');\n      }\n\n      setUserSubscription(data.subscription);\n      return data.subscription;\n    } catch (error) {\n      console.error('Error fetching subscription status:', error);\n      setUserSubscription(null);\n      return null;\n    }\n  }\n\n  // Function to update user profile\n  async function updateProfile(userData) {\n    try {\n      setError('');\n      const token = localStorage.getItem('authToken');\n      \n      if (!token) {\n        throw new Error('Not authenticated');\n      }\n      \n      const response = await fetch(`${API_URL}/api/users/update`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify(userData),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to update profile');\n      }\n\n      // Update the current user with the new data\n      setCurrentUser(prevUser => ({\n        ...prevUser,\n        ...data.user\n      }));\n      \n      return data;\n    } catch (error) {\n      setError(error.message);\n      throw error;\n    }\n  }\n\n  // Function to check if user has access to premium features\n  function hasPremiumAccess() {\n    return userSubscription && userSubscription.status === 'active';\n  }\n\n  // Effect to fetch the current user when the component mounts\n  useEffect(() => {\n    let mounted = true;\n\n    async function loadUserData() {\n      try {\n        const token = localStorage.getItem('authToken');\n        if (token) {\n          const userData = await fetchCurrentUser();\n          if (mounted) {\n            console.log('Setting current user:', userData);\n            setCurrentUser(userData);\n            setIsAuthenticated(!!userData);\n            if (userData) {\n              await fetchSubscriptionStatus();\n            }\n          }\n        } else {\n          if (mounted) {\n            console.log('No token found, clearing user state');\n            setCurrentUser(null);\n            setIsAuthenticated(false);\n          }\n        }\n      } catch (error) {\n        console.error('Error loading user data:', error);\n        if (mounted) {\n          setCurrentUser(null);\n          setIsAuthenticated(false);\n        }\n      } finally {\n        if (mounted) {\n          setLoading(false);\n        }\n      }\n    }\n\n    loadUserData();\n\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  // Create the value object that will be provided to consumers\n  const value = {\n    currentUser,\n    userSubscription,\n    loading,\n    error,\n    isAuthenticated,\n    register,\n    login,\n    logout,\n    updateProfile,\n    hasPremiumAccess,\n    fetchSubscriptionStatus\n  };\n\n  console.log('AuthContext state:', { \n    isAuthenticated, \n    hasUser: !!currentUser, \n    hasSubscription: !!userSubscription,\n    loading,\n    currentUser\n  });\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default AuthContext;\n","import React, { createContext, useContext, useState, useEffect } from 'react';\n\nconst ChildContext = createContext();\n\nexport const useChild = () => {\n  return useContext(ChildContext);\n};\n\nexport const ChildProvider = ({ children }) => {\n  const [activeChild, setActiveChild] = useState(null);\n\n  // Load active child from localStorage on mount\n  useEffect(() => {\n    const savedChildId = localStorage.getItem('activeChildId');\n    if (savedChildId) {\n      setActiveChild(savedChildId);\n    }\n  }, []);\n\n  // Save active child to localStorage whenever it changes\n  useEffect(() => {\n    if (activeChild) {\n      localStorage.setItem('activeChildId', activeChild);\n    } else {\n      localStorage.removeItem('activeChildId');\n    }\n  }, [activeChild]);\n\n  const value = {\n    activeChild,\n    setActiveChild,\n  };\n\n  return (\n    <ChildContext.Provider value={value}>\n      {children}\n    </ChildContext.Provider>\n  );\n}; ","export default __webpack_public_path__ + \"static/media/logo.0f63a7c9.png\";","import React, { useState, useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaBars, FaTimes, FaUser, FaSignOutAlt, FaCrown } from 'react-icons/fa';\nimport logo from '../assets/logo.png';\n\nconst Navigation = () => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const { currentUser, logout, userSubscription } = useAuth();\n  const location = useLocation();\n  \n  const toggleMenu = () => {\n    setIsMenuOpen(!isMenuOpen);\n  };\n  \n  // Close menu when route changes\n  useEffect(() => {\n    setIsMenuOpen(false);\n  }, [location]);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n    } catch (error) {\n      console.error(\"Failed to log out\", error);\n    }\n  };\n\n  return (\n    <nav className=\"navbar\">\n      <div className=\"navbar-container\">\n        <Link to=\"/\" className=\"navbar-logo\">\n          <img src={logo} alt=\"Confident Kids Logo\" />\n          <span>Confident Kids</span>\n        </Link>\n        \n        <button className=\"navbar-toggle\" onClick={toggleMenu} aria-label=\"Toggle navigation\">\n          {isMenuOpen ? <FaTimes /> : <FaBars />}\n        </button>\n        \n        <ul className={`navbar-menu ${isMenuOpen ? 'active' : ''}`}>\n          <li className=\"navbar-item\">\n            <Link \n              to=\"/\" \n              className={`navbar-link ${location.pathname === '/' ? 'active' : ''}`}\n            >\n              Home\n            </Link>\n          </li>\n          \n          {currentUser && (\n            <>\n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/dashboard\" \n                  className={`navbar-link ${location.pathname === '/dashboard' ? 'active' : ''}`}\n                >\n                  Dashboard\n                </Link>\n              </li>\n              \n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/pillars\" \n                  className={`navbar-link ${location.pathname.includes('/pillars') ? 'active' : ''}`}\n                >\n                  Pillars\n                </Link>\n              </li>\n              \n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/challenges\" \n                  className={`navbar-link ${location.pathname === '/challenges' ? 'active' : ''}`}\n                >\n                  Challenges\n                </Link>\n              </li>\n              \n              {userSubscription && userSubscription.status === 'active' && (\n                <li className=\"navbar-item\">\n                  <Link \n                    to=\"/rewards\" \n                    className={`navbar-link ${location.pathname === '/rewards' ? 'active' : ''}`}\n                  >\n                    Rewards\n                    <span className=\"premium-badge\">PRO</span>\n                  </Link>\n                </li>\n              )}\n              \n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/profile\" \n                  className={`navbar-link ${location.pathname === '/profile' ? 'active' : ''}`}\n                >\n                  <FaUser /> Profile\n                </Link>\n              </li>\n              \n              <li className=\"navbar-item\">\n                <button onClick={handleLogout} className=\"navbar-link\">\n                  <FaSignOutAlt /> Logout\n                </button>\n              </li>\n            </>\n          )}\n          \n          {!currentUser && (\n            <>\n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/about\" \n                  className={`navbar-link ${location.pathname === '/about' ? 'active' : ''}`}\n                >\n                  About\n                </Link>\n              </li>\n              \n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/login\" \n                  className={`navbar-link ${location.pathname === '/login' ? 'active' : ''}`}\n                >\n                  Login\n                </Link>\n              </li>\n              \n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/register\" \n                  className=\"navbar-cta\"\n                >\n                  Sign Up\n                </Link>\n              </li>\n            </>\n          )}\n          \n          {currentUser && !userSubscription?.status === 'active' && (\n            <li className=\"navbar-item\">\n              <Link \n                to=\"/subscription\" \n                className=\"navbar-cta\"\n              >\n                <FaCrown /> Upgrade\n              </Link>\n            </li>\n          )}\n        </ul>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navigation;\n","import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaEnvelope, FaLock } from 'react-icons/fa';\n\nconst Login = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    try {\n      setError('');\n      setLoading(true);\n      await login(email, password);\n      navigate('/dashboard');\n    } catch (error) {\n      setError(error.message || 'Failed to log in');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <div className=\"card mt-5\">\n            <div className=\"card-header\">\n              <h2 className=\"text-center\">Log In</h2>\n            </div>\n            <div className=\"card-body\">\n              {error && (\n                <div className=\"alert alert-danger\" role=\"alert\">\n                  {error}\n                </div>\n              )}\n              <form onSubmit={handleSubmit}>\n                <div className=\"form-group mb-3\">\n                  <label htmlFor=\"email\">\n                    <FaEnvelope className=\"me-2\" /> Email\n                  </label>\n                  <input\n                    type=\"email\"\n                    id=\"email\"\n                    className=\"form-control\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group mb-4\">\n                  <label htmlFor=\"password\">\n                    <FaLock className=\"me-2\" /> Password\n                  </label>\n                  <input\n                    type=\"password\"\n                    id=\"password\"\n                    className=\"form-control\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary w-100\"\n                  disabled={loading}\n                >\n                  {loading ? 'Logging In...' : 'Log In'}\n                </button>\n              </form>\n              \n              <div className=\"text-center mt-3\">\n                <Link to=\"/forgot-password\">Forgot Password?</Link>\n              </div>\n            </div>\n            <div className=\"card-footer text-center\">\n              Need an account? <Link to=\"/register\">Sign Up</Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaEnvelope, FaLock, FaUser } from 'react-icons/fa';\n\nconst Register = () => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { register } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Form validation\n    if (password !== confirmPassword) {\n      return setError('Passwords do not match');\n    }\n    \n    if (password.length < 6) {\n      return setError('Password must be at least 6 characters');\n    }\n    \n    try {\n      setError('');\n      setLoading(true);\n      await register(email, password, name);\n      navigate('/dashboard');\n    } catch (error) {\n      setError(error.message || 'Failed to create an account');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <div className=\"card mt-5\">\n            <div className=\"card-header\">\n              <h2 className=\"text-center\">Create Your Account</h2>\n            </div>\n            <div className=\"card-body\">\n              {error && (\n                <div className=\"alert alert-danger\" role=\"alert\">\n                  {error}\n                </div>\n              )}\n              <form onSubmit={handleSubmit}>\n                <div className=\"form-group mb-3\">\n                  <label htmlFor=\"name\">\n                    <FaUser className=\"me-2\" /> Full Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"name\"\n                    className=\"form-control\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group mb-3\">\n                  <label htmlFor=\"email\">\n                    <FaEnvelope className=\"me-2\" /> Email\n                  </label>\n                  <input\n                    type=\"email\"\n                    id=\"email\"\n                    className=\"form-control\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group mb-3\">\n                  <label htmlFor=\"password\">\n                    <FaLock className=\"me-2\" /> Password\n                  </label>\n                  <input\n                    type=\"password\"\n                    id=\"password\"\n                    className=\"form-control\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group mb-4\">\n                  <label htmlFor=\"confirmPassword\">\n                    <FaLock className=\"me-2\" /> Confirm Password\n                  </label>\n                  <input\n                    type=\"password\"\n                    id=\"confirmPassword\"\n                    className=\"form-control\"\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary w-100\"\n                  disabled={loading}\n                >\n                  {loading ? 'Creating Account...' : 'Sign Up'}\n                </button>\n              </form>\n            </div>\n            <div className=\"card-footer text-center\">\n              Already have an account? <Link to=\"/login\">Log In</Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaChartLine, FaCalendarAlt, FaTrophy, FaCrown } from 'react-icons/fa';\n\nconst Dashboard = () => {\n  const [dashboardData, setDashboardData] = useState(null);\n  const [selectedChild, setSelectedChild] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const { currentUser, hasPremiumAccess } = useAuth();\n  const isPremium = hasPremiumAccess();\n\n  useEffect(() => {\n    console.log('Dashboard: currentUser changed', currentUser);\n  }, [currentUser]);\n\n  useEffect(() => {\n    // Set the first child as selected by default if user has children\n    if (currentUser?.children?.length > 0 && !selectedChild) {\n      console.log('Dashboard: Setting initial child', currentUser.children[0]);\n      setSelectedChild(currentUser.children[0].id);\n    }\n  }, [currentUser, selectedChild]);\n\n  useEffect(() => {\n    let mounted = true;\n\n    const fetchDashboardData = async () => {\n      try {\n        setLoading(true);\n        const token = localStorage.getItem('authToken');\n        \n        if (!token) {\n          throw new Error('No authentication token found');\n        }\n        \n        // Only include childId in the URL if a child is selected\n        const url = selectedChild \n          ? `${process.env.REACT_APP_API_URL}/api/dashboard?childId=${selectedChild}`\n          : `${process.env.REACT_APP_API_URL}/api/dashboard`;\n        \n        console.log('Dashboard: Fetching data for child:', selectedChild || 'no child selected');\n        \n        const response = await fetch(url, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        const data = await response.json();\n        console.log('Dashboard: Received data:', data);\n\n        if (!response.ok) {\n          throw new Error(data.message || 'Failed to fetch dashboard data');\n        }\n\n        if (mounted) {\n          setDashboardData(data);\n          // Log the daily challenge status\n          if (data.todayChallenge) {\n            console.log('Daily challenge status:', {\n              childId: selectedChild,\n              challengeId: data.todayChallenge.id,\n              completed: data.todayChallenge.completed\n            });\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching dashboard data:', error);\n        if (mounted) {\n          setError(`Failed to load dashboard data${selectedChild ? ` for selected child` : ''}. Please try again later.`);\n        }\n      } finally {\n        if (mounted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchDashboardData();\n\n    return () => {\n      mounted = false;\n    };\n  }, [selectedChild]);\n\n  const handleChildChange = (e) => {\n    setSelectedChild(e.target.value);\n  };\n\n  if (loading) {\n    return <div className=\"text-center p-5\">Loading dashboard data...</div>;\n  }\n\n  if (error) {\n    return <div className=\"alert alert-danger\">{error}</div>;\n  }\n\n  if (!dashboardData) {\n    return <div className=\"text-center p-5\">No dashboard data available.</div>;\n  }\n\n  // If we have dashboard data but no currentUser, show a basic view\n  if (!currentUser) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"dashboard-welcome\">\n          <h1>Welcome!</h1>\n          <p>Track your child's confidence journey and explore activities designed to build their confidence.</p>\n        </div>\n        \n        <div className=\"alert alert-info mt-4\">\n          <h4>Let's Get Started!</h4>\n          <p>Add your child's profile to begin their confidence journey.</p>\n          <Link to=\"/profile\" className=\"btn btn-primary mt-2\">\n            Add Child Profile\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"dashboard-welcome\">\n        <h1>Welcome, {currentUser.name}!</h1>\n        <p>Track your child's confidence journey and explore activities designed to build their confidence.</p>\n      </div>\n      \n      {currentUser.children && currentUser.children.length > 0 ? (\n        <>\n          <div className=\"child-selector mb-4\">\n            <label htmlFor=\"childSelect\">Select Child:</label>\n            <select \n              id=\"childSelect\" \n              className=\"form-control\" \n              value={selectedChild} \n              onChange={handleChildChange}\n            >\n              {currentUser.children.map(child => (\n                <option key={child.id} value={child.id}>\n                  {child.name} ({child.age} years)\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          {selectedChild ? (\n            <>\n              <div className=\"dashboard-stats\">\n                <div className=\"stat-card\">\n                  <FaChartLine className=\"mb-2\" size={24} />\n                  <div className=\"stat-value\">{dashboardData.overallProgress}%</div>\n                  <div className=\"stat-label\">Overall Progress</div>\n                </div>\n                \n                <div className=\"stat-card\">\n                  <FaCalendarAlt className=\"mb-2\" size={24} />\n                  <div className=\"stat-value\">{dashboardData.activitiesCompleted}</div>\n                  <div className=\"stat-label\">Activities Completed</div>\n                </div>\n                \n                <div className=\"stat-card\">\n                  <FaTrophy className=\"mb-2\" size={24} />\n                  <div className=\"stat-value\">{isPremium ? dashboardData.points : 'Locked'}</div>\n                  <div className=\"stat-label\">Reward Points {!isPremium && <span className=\"premium-badge\">PRO</span>}</div>\n                </div>\n              </div>\n              \n              <div className=\"today-challenge\">\n                <h2>Today's Challenge</h2>\n                <div className=\"challenge-container\">\n                  <h3 className=\"challenge-title\">{dashboardData.todayChallenge.title}</h3>\n                  <p className=\"challenge-description\">{dashboardData.todayChallenge.description}</p>\n                  {dashboardData.todayChallenge.completed ? (\n                    <div className=\"completed-message\">\n                      <span className=\"completed-badge\">Completed</span>\n                      <p>Great job! Come back tomorrow for a new challenge.</p>\n                      <Link to=\"/challenges\" className=\"btn btn-secondary mt-3\">\n                        View All Challenges\n                      </Link>\n                    </div>\n                  ) : (\n                    <Link to={`/challenges/${dashboardData.todayChallenge.id}`} className=\"btn btn-primary mt-3\">\n                      Start Challenge\n                    </Link>\n                  )}\n                </div>\n              </div>\n              \n              <h2 className=\"mt-5 mb-3\">Confidence Pillars</h2>\n              <div className=\"grid-3\">\n                {dashboardData.pillars.map((pillar) => (\n                  <div key={pillar.id} className={`pillar-card pillar-card-${pillar.id}`}>\n                    <div className=\"pillar-card-header\">\n                      <h3>{pillar.name}</h3>\n                    </div>\n                    <div className=\"pillar-card-body\">\n                      <p>{pillar.shortDescription}</p>\n                      <div className=\"progress-label\">\n                        <span>Progress</span>\n                        <span>{pillar.progress}%</span>\n                      </div>\n                      <div className=\"progress-container\">\n                        <div \n                          className={`progress-bar progress-bar-${pillar.id}`} \n                          style={{ width: `${pillar.progress}%` }}\n                        ></div>\n                      </div>\n                    </div>\n                    <div className=\"pillar-card-footer\">\n                      <span>{pillar.activitiesCompleted}/{pillar.totalActivities} Activities</span>\n                      <Link to={`/pillars/${pillar.id}`} className=\"btn btn-sm btn-outline\">\n                        Explore\n                      </Link>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </>\n          ) : (\n            <div className=\"alert alert-info mt-4\">\n              <h4>Select a Child</h4>\n              <p>Please select a child from the dropdown above to view their dashboard.</p>\n            </div>\n          )}\n        </>\n      ) : (\n        <div className=\"alert alert-info mt-4\">\n          <h4>Let's Get Started!</h4>\n          <p>Add your child's profile to begin their confidence journey.</p>\n          <Link to=\"/profile\" className=\"btn btn-primary mt-2\">\n            Add Child Profile\n          </Link>\n        </div>\n      )}\n      \n      {!isPremium && (\n        <div className=\"upgrade-prompt standard mt-5\">\n          <h3><FaCrown className=\"me-2\" /> Unlock Premium Features</h3>\n          <p>Subscribe to our premium plan to access all activities, detailed progress tracking, and rewards for your child.</p>\n          <Link to=\"/subscription\" className=\"upgrade-button\">Upgrade Now</Link>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useChild } from '../contexts/ChildContext';\nimport '../styles/ChildSelector.css';\n\nconst ChildSelector = () => {\n  const { currentUser } = useAuth();\n  const { activeChild, setActiveChild } = useChild();\n\n  if (!currentUser) {\n    return null;\n  }\n\n  if (!currentUser.children || currentUser.children.length === 0) {\n    return (\n      <div className=\"child-selector\">\n        <div className=\"alert alert-info\">\n          <p>No children added yet.</p>\n          <Link to=\"/profile\" className=\"btn btn-primary btn-sm mt-2\">\n            Add a Child\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"child-selector\">\n      <label htmlFor=\"childSelect\">Select Child:</label>\n      <select \n        id=\"childSelect\" \n        className=\"form-control\" \n        value={activeChild || ''} \n        onChange={(e) => setActiveChild(e.target.value)}\n      >\n        <option value=\"\">Select a child...</option>\n        {currentUser.children.map(child => (\n          <option key={child.id} value={child.id}>\n            {child.name} ({child.age} years)\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n\nexport default ChildSelector; ","import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { FaStar, FaTrophy, FaCalendarAlt } from 'react-icons/fa';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useChild } from '../contexts/ChildContext';\nimport ChildSelector from './ChildSelector';\nimport '../styles/PillarsOverview.css';\n\nconst API_URL = 'https://confident-kids-api.kevin-mcgovern.workers.dev';\n\nconst PillarsOverview = () => {\n  const { currentUser, loading } = useAuth();\n  const { activeChild } = useChild();\n  const [pillars, setPillars] = useState([]);\n  const [content, setContent] = useState([]);\n  const [challenges, setChallenges] = useState([]);\n  const [achievements, setAchievements] = useState([]);\n  const [componentLoading, setComponentLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!currentUser) {\n        console.log('No user found');\n        setComponentLoading(false);\n        return;\n      }\n\n      if (!currentUser.children || currentUser.children.length === 0) {\n        console.log('User has no children');\n        setComponentLoading(false);\n        return;\n      }\n\n      if (!activeChild) {\n        console.log('No child selected');\n        setComponentLoading(false);\n        return;\n      }\n\n      try {\n        setComponentLoading(true);\n        const token = localStorage.getItem('authToken');\n        console.log('Fetching data with token:', token ? 'Token exists' : 'No token');\n        console.log('Selected child:', activeChild);\n        \n        if (!token) {\n          throw new Error('No authentication token found');\n        }\n        \n        // Fetch pillars with child progress\n        const pillarsResponse = await fetch(`${API_URL}/api/pillars?childId=${activeChild}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n        \n        if (!pillarsResponse.ok) {\n          const errorData = await pillarsResponse.json();\n          console.error('Pillars response error:', errorData);\n          throw new Error(errorData.error || 'Failed to fetch pillars data');\n        }\n        \n        // Fetch content (techniques)\n        const contentResponse = await fetch(`${API_URL}/api/content`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n        \n        if (!contentResponse.ok) {\n          const errorData = await contentResponse.json();\n          console.error('Content response error:', errorData);\n          throw new Error(errorData.error || 'Failed to fetch content data');\n        }\n        \n        // Fetch challenges\n        const challengesResponse = await fetch(`${API_URL}/api/challenges?childId=${activeChild}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n        \n        if (!challengesResponse.ok) {\n          const errorData = await challengesResponse.json();\n          console.error('Challenges response error:', errorData);\n          throw new Error(errorData.error || 'Failed to fetch challenges data');\n        }\n        \n        // Fetch achievements\n        const achievementsResponse = await fetch(`${API_URL}/api/achievements?childId=${activeChild}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n        \n        if (!achievementsResponse.ok) {\n          const errorData = await achievementsResponse.json();\n          console.error('Achievements response error:', errorData);\n          throw new Error(errorData.error || 'Failed to fetch achievements data');\n        }\n        \n        const [pillarsData, contentData, challengesData, achievementsData] = await Promise.all([\n          pillarsResponse.json(),\n          contentResponse.json(),\n          challengesResponse.json(),\n          achievementsResponse.json()\n        ]);\n        \n        setPillars(pillarsData || []);\n        setContent(contentData || []);\n        setChallenges(challengesData || []);\n        setAchievements(achievementsData || []);\n        setError('');\n      } catch (err) {\n        console.error('Error fetching data:', err);\n        setError(err.message);\n      } finally {\n        setComponentLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [currentUser, activeChild]);\n\n  if (loading || componentLoading) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"text-center p-5\">Loading pillars data...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"alert alert-danger\">{error}</div>\n      </div>\n    );\n  }\n\n  if (!currentUser || !currentUser.children || currentUser.children.length === 0) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"alert alert-warning\">\n          Please add a child to your profile to view pillars and progress.\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mt-4\">\n      <ChildSelector />\n\n      <div className=\"pillars-grid\">\n        {pillars.map(pillar => (\n          <div key={pillar.id} className=\"pillar-card\">\n            <h3>{pillar.name}</h3>\n            <div className=\"pillar-progress\">\n              <div \n                className=\"progress-bar\" \n                style={{ width: `${pillar.progress || 0}%` }}\n              ></div>\n              <span className=\"progress-text\">{pillar.progress || 0}%</span>\n            </div>\n            <p>{pillar.short_description}</p>\n            <Link \n              to={`/pillars/${pillar.id}`} \n              className=\"btn btn-primary\"\n            >\n              View Details\n            </Link>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default PillarsOverview; ","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaStar, FaClock, FaUserFriends } from 'react-icons/fa';\nimport '../styles/PillarTechniques.css';\n\nconst API_URL = 'https://confident-kids-api.kevin-mcgovern.workers.dev';\n\nconst PillarTechniques = () => {\n  const { pillarId } = useParams();\n  const { currentUser } = useAuth();\n  const [techniques, setTechniques] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedChild, setSelectedChild] = useState(null);\n\n  useEffect(() => {\n    if (currentUser && currentUser.children && currentUser.children.length > 0 && !selectedChild) {\n      setSelectedChild(currentUser.children[0].id);\n    }\n  }, [currentUser]);\n\n  useEffect(() => {\n    const fetchTechniques = async () => {\n      if (!currentUser || !selectedChild) return;\n\n      try {\n        setLoading(true);\n        setError(null);\n        const token = localStorage.getItem('authToken');\n\n        if (!token) {\n          throw new Error('No authentication token found');\n        }\n\n        const response = await fetch(`${API_URL}/api/pillars/${pillarId}/techniques?childId=${selectedChild}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to fetch techniques');\n        }\n\n        const data = await response.json();\n        setTechniques(data.techniques || []);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchTechniques();\n  }, [pillarId, currentUser, selectedChild]);\n\n  const handleChildChange = (e) => {\n    const childId = e.target.value;\n    setSelectedChild(childId);\n  };\n\n  if (!currentUser) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"alert alert-warning\">\n          Please log in to view techniques.\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"text-center p-5\">Loading techniques...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"alert alert-danger\">{error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"child-selector mb-4\">\n        <label htmlFor=\"childSelect\">Select Child:</label>\n        <select \n          id=\"childSelect\" \n          className=\"form-control\" \n          value={selectedChild || ''} \n          onChange={handleChildChange}\n        >\n          {currentUser.children.map(child => (\n            <option key={child.id} value={child.id}>\n              {child.name} ({child.age} years)\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"techniques-grid\">\n        {techniques.map(technique => (\n          <div key={technique.id} className=\"technique-card\">\n            <h3>{technique.title}</h3>\n            <div className=\"technique-meta\">\n              <span className=\"difficulty\">\n                <FaStar /> {technique.difficulty_level === 1 ? 'Easy' : \n                           technique.difficulty_level === 2 ? 'Medium' : 'Hard'}\n              </span>\n              <span className=\"duration\">\n                <FaClock /> {technique.duration} minutes\n              </span>\n              <span className=\"age-range\">\n                <FaUserFriends /> {technique.age_group === 'all' ? 'All Ages' : technique.age_group}\n              </span>\n            </div>\n            <p>{technique.description}</p>\n            <div className=\"technique-steps\">\n              <h4>Steps:</h4>\n              <ol>\n                {technique.steps.map((step, index) => (\n                  <li key={index}>{step}</li>\n                ))}\n              </ol>\n            </div>\n            {technique.tips && (\n              <div className=\"technique-tips\">\n                <h4>Tips:</h4>\n                <ul>\n                  {technique.tips.map((tip, index) => (\n                    <li key={index}>{tip}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default PillarTechniques; ","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { loadStripe } from '@stripe/stripe-js';\nimport {\n  Elements,\n  CardElement,\n  useStripe,\n  useElements\n} from '@stripe/react-stripe-js';\nimport { FaCrown, FaCheck, FaRegStar, FaStar } from 'react-icons/fa';\n\n// Initialize Stripe with your publishable key\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\n\n// Subscription plan options\nconst plans = [\n  {\n    id: 'monthly',\n    name: 'Monthly',\n    price: 9.99,\n    interval: 'month',\n    description: 'Perfect for trying out all premium features',\n    features: [\n      'Full access to all 5 pillars',\n      'Unlimited activities and challenges',\n      'Progress tracking for multiple children',\n      'Printable certificates',\n      'Rewards marketplace',\n      'Social sharing capabilities'\n    ]\n  },\n  {\n    id: 'yearly',\n    name: 'Yearly',\n    price: 89.99,\n    regularPrice: 119.88, // 12 * 9.99\n    interval: 'year',\n    description: 'Our most popular plan',\n    features: [\n      'Full access to all 5 pillars',\n      'Unlimited activities and challenges',\n      'Progress tracking for multiple children',\n      'Printable certificates',\n      'Rewards marketplace',\n      'Social sharing capabilities',\n      'Priority support',\n      'Early access to new features'\n    ],\n    bestValue: true\n  },\n  {\n    id: 'lifetime',\n    name: 'Lifetime',\n    price: 249.99,\n    interval: 'once',\n    description: 'Pay once, use forever',\n    features: [\n      'Full access to all 5 pillars',\n      'Unlimited activities and challenges',\n      'Progress tracking for multiple children',\n      'Printable certificates',\n      'Rewards marketplace',\n      'Social sharing capabilities',\n      'Priority support',\n      'Early access to new features',\n      'All future updates included'\n    ]\n  }\n];\n\n// CheckoutForm component for handling payment submission\nconst CheckoutForm = ({ selectedPlan, onSuccess, onError }) => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const { currentUser } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      // Stripe.js has not loaded yet\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Get a reference to the card element\n      const cardElement = elements.getElement(CardElement);\n\n      // Create a payment method\n      const { error: stripeError, paymentMethod } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: cardElement,\n      });\n\n      if (stripeError) {\n        throw new Error(stripeError.message);\n      }\n\n      // Send the payment method ID to your server\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/subscriptions/create`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('authToken')}`,\n        },\n        body: JSON.stringify({\n          paymentMethodId: paymentMethod.id,\n          planId: selectedPlan.id,\n          customerId: currentUser.id,\n          email: currentUser.email,\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to process subscription');\n      }\n\n      // Handle subscription status\n      if (data.status === 'success') {\n        onSuccess(data);\n      } else if (data.status === 'requires_action') {\n        // Handle 3D Secure authentication if required\n        const { error: confirmError, paymentIntent } = await stripe.confirmCardPayment(\n          data.clientSecret\n        );\n\n        if (confirmError) {\n          throw new Error(confirmError.message);\n        } else if (paymentIntent.status === 'succeeded') {\n          onSuccess(data);\n        } else {\n          throw new Error('Payment failed');\n        }\n      } else {\n        throw new Error(data.message || 'Subscription failed');\n      }\n    } catch (error) {\n      console.error('Subscription error:', error);\n      setError(error.message);\n      onError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const cardElementOptions = {\n    style: {\n      base: {\n        fontSize: '16px',\n        color: '#424770',\n        '::placeholder': {\n          color: '#aab7c4',\n        },\n      },\n      invalid: {\n        color: '#9e2146',\n      },\n    },\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"card-element-container\">\n        <CardElement options={cardElementOptions} />\n      </div>\n      \n      {error && (\n        <div className=\"alert alert-danger mb-3\">\n          {error}\n        </div>\n      )}\n      \n      <button \n        type=\"submit\" \n        className=\"subscribe-button\"\n        disabled={!stripe || loading}\n      >\n        {loading ? 'Processing...' : `Subscribe for $${selectedPlan.price}/${selectedPlan.interval === 'once' ? '' : selectedPlan.interval}`}\n      </button>\n    </form>\n  );\n};\n\n// Main Subscription component\nconst Subscription = () => {\n  const [selectedPlan, setSelectedPlan] = useState(plans[1]); // Default to yearly plan\n  const [subscriptionComplete, setSubscriptionComplete] = useState(false);\n  const [subscriptionError, setSubscriptionError] = useState(null);\n  const { currentUser, userSubscription, fetchSubscriptionStatus } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // If user already has an active subscription, redirect to dashboard\n    if (userSubscription && userSubscription.status === 'active') {\n      navigate('/dashboard');\n    }\n  }, [userSubscription, navigate]);\n\n  const handlePlanSelect = (plan) => {\n    setSelectedPlan(plan);\n  };\n\n  const handleSubscriptionSuccess = async (data) => {\n    setSubscriptionComplete(true);\n    // Refresh subscription status\n    await fetchSubscriptionStatus();\n    \n    // Redirect to dashboard after a short delay\n    setTimeout(() => {\n      navigate('/dashboard');\n    }, 3000);\n  };\n\n  const handleSubscriptionError = (errorMessage) => {\n    setSubscriptionError(errorMessage);\n  };\n\n  if (subscriptionComplete) {\n    return (\n      <div className=\"subscription-page\">\n        <div className=\"success-message\">\n          <h2><FaCheck className=\"me-2\" /> Subscription Successful!</h2>\n          <p>Thank you for subscribing to Confident Kids Premium. You now have access to all premium features.</p>\n          <p>You will be redirected to your dashboard shortly...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"subscription-page\">\n      <div className=\"feature-highlight\">\n        <h1><FaCrown className=\"me-2\" /> Upgrade to Confident Kids Premium</h1>\n        <p>Unlock the full potential of your child's confidence journey with our premium features.</p>\n      </div>\n      \n      <div className=\"plan-selection\">\n        <h2>Choose Your Plan</h2>\n        <div className=\"plan-options\">\n          {plans.map((plan) => (\n            <div \n              key={plan.id}\n              className={`plan-card ${selectedPlan.id === plan.id ? 'selected' : ''}`}\n              onClick={() => handlePlanSelect(plan)}\n            >\n              {plan.bestValue && <div className=\"best-value\">Best Value</div>}\n              <h3>{plan.name}</h3>\n              <div className=\"price\">\n                ${plan.price} <span>/{plan.interval === 'once' ? '' : plan.interval}</span>\n              </div>\n              {plan.regularPrice && (\n                <div className=\"savings\">\n                  Save ${(plan.regularPrice - plan.price).toFixed(2)} per year\n                </div>\n              )}\n              <p>{plan.description}</p>\n              <ul className=\"features\">\n                {plan.features.map((feature, index) => (\n                  <li key={index}>{feature}</li>\n                ))}\n              </ul>\n              <button \n                className={`btn ${selectedPlan.id === plan.id ? 'btn-primary' : 'btn-outline'} w-100`}\n              >\n                {selectedPlan.id === plan.id ? 'Selected' : 'Select'}\n              </button>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"payment-section\">\n        <h2>Payment Information</h2>\n        <Elements stripe={stripePromise}>\n          <CheckoutForm \n            selectedPlan={selectedPlan} \n            onSuccess={handleSubscriptionSuccess}\n            onError={handleSubscriptionError}\n          />\n        </Elements>\n        \n        {subscriptionError && (\n          <div className=\"alert alert-danger mt-3\">\n            {subscriptionError}\n          </div>\n        )}\n        \n        <div className=\"guarantee\">\n          <p><FaRegStar /> 30-day money-back guarantee <FaRegStar /></p>\n          <p>If you're not satisfied with our premium features, we'll refund your payment within the first 30 days.</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Subscription;\n","import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaStar, FaShare, FaPrint, FaTrophy } from 'react-icons/fa';\n\nconst Rewards = () => {\n  const [activeTab, setActiveTab] = useState('achievements');\n  const [achievements, setAchievements] = useState([]);\n  const [certificates, setCertificates] = useState([]);\n  const [marketplace, setMarketplace] = useState([]);\n  const [points, setPoints] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const { currentUser, hasPremiumAccess } = useAuth();\n  \n  useEffect(() => {\n    const fetchRewardsData = async () => {\n      try {\n        setLoading(true);\n        const token = localStorage.getItem('authToken');\n        \n        const response = await fetch(`${process.env.REACT_APP_API_URL}/api/rewards`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n          throw new Error(data.message || 'Failed to fetch rewards data');\n        }\n\n        setAchievements(data.achievements);\n        setCertificates(data.certificates);\n        setMarketplace(data.marketplace);\n        setPoints(data.points);\n      } catch (error) {\n        console.error('Error fetching rewards data:', error);\n        setError('Failed to load rewards data. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (hasPremiumAccess()) {\n      fetchRewardsData();\n    } else {\n      setLoading(false);\n    }\n  }, [hasPremiumAccess]);\n\n  const handleShareCertificate = (certificateId) => {\n    // Implementation for sharing certificate to social media\n    console.log(`Sharing certificate ${certificateId}`);\n    // This would typically open a social sharing modal or redirect to a sharing page\n  };\n\n  const handlePrintCertificate = (certificateId) => {\n    // Implementation for printing certificate\n    console.log(`Printing certificate ${certificateId}`);\n    window.print();\n  };\n\n  const handleRedeemReward = async (rewardId) => {\n    try {\n      const token = localStorage.getItem('authToken');\n      \n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/rewards/redeem`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          rewardId\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to redeem reward');\n      }\n\n      // Update points after redemption\n      setPoints(data.updatedPoints);\n      \n      // Update marketplace items to reflect availability changes\n      setMarketplace(prevMarketplace => \n        prevMarketplace.map(item => \n          item.id === rewardId \n            ? { ...item, redeemed: true } \n            : item\n        )\n      );\n      \n      alert('Reward redeemed successfully!');\n    } catch (error) {\n      console.error('Error redeeming reward:', error);\n      alert(`Failed to redeem reward: ${error.message}`);\n    }\n  };\n\n  if (!hasPremiumAccess()) {\n    return (\n      <div className=\"container mt-5\">\n        <div className=\"upgrade-prompt standard\">\n          <h2><FaTrophy className=\"me-2\" /> Unlock the Rewards System</h2>\n          <p>The Rewards System is a premium feature that allows your child to earn achievements, collect certificates, and redeem points for special rewards.</p>\n          <p>Subscribe to our premium plan to motivate your child with tangible rewards for their confidence journey.</p>\n          <a href=\"/subscription\" className=\"upgrade-button\">Upgrade Now</a>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return <div className=\"text-center p-5\">Loading rewards data...</div>;\n  }\n\n  if (error) {\n    return <div className=\"alert alert-danger\">{error}</div>;\n  }\n\n  return (\n    <div className=\"rewards-container\">\n      <h1 className=\"mb-4\">Rewards & Achievements</h1>\n      \n      <div className=\"points-display\">\n        <span className=\"points-icon\"><FaStar /></span>\n        <span className=\"points-value\">{points} Points</span>\n      </div>\n      \n      <div className=\"rewards-tabs\">\n        <button \n          className={activeTab === 'achievements' ? 'active' : ''}\n          onClick={() => setActiveTab('achievements')}\n        >\n          Achievements\n        </button>\n        <button \n          className={activeTab === 'certificates' ? 'active' : ''}\n          onClick={() => setActiveTab('certificates')}\n        >\n          Certificates\n        </button>\n        <button \n          className={activeTab === 'marketplace' ? 'active' : ''}\n          onClick={() => setActiveTab('marketplace')}\n        >\n          Rewards Marketplace\n        </button>\n      </div>\n      \n      <div className=\"rewards-content\">\n        {activeTab === 'achievements' && (\n          <div>\n            <h3 className=\"mb-3\">Your Child's Achievements</h3>\n            <div className=\"achievement-grid\">\n              {achievements.map((achievement) => (\n                <div \n                  key={achievement.id} \n                  className={`achievement-item ${!achievement.unlocked ? 'achievement-locked' : ''}`}\n                >\n                  <div className=\"achievement-icon\">\n                    {achievement.icon}\n                  </div>\n                  <h4>{achievement.name}</h4>\n                  <p>{achievement.description}</p>\n                  {achievement.unlocked ? (\n                    <div className=\"text-success\">Unlocked!</div>\n                  ) : (\n                    <div className=\"text-muted\">{achievement.progress}% Complete</div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n        \n        {activeTab === 'certificates' && (\n          <div>\n            <h3 className=\"mb-3\">Printable Certificates</h3>\n            {certificates.length === 0 ? (\n              <p>No certificates earned yet. Complete activities to earn certificates!</p>\n            ) : (\n              certificates.map((certificate) => (\n                <div key={certificate.id} className=\"mb-4\">\n                  <h4>{certificate.title}</h4>\n                  <div className=\"certificate-preview\">\n                    <div className=\"certificate-content\">\n                      <h2>{certificate.title}</h2>\n                      <h3>Awarded to: {currentUser.children?.find(child => child.id === certificate.childId)?.name || 'Your Child'}</h3>\n                      <p>{certificate.description}</p>\n                      <p>Date: {new Date(certificate.date).toLocaleDateString()}</p>\n                    </div>\n                  </div>\n                  <div className=\"certificate-actions\">\n                    <button \n                      className=\"btn btn-outline\" \n                      onClick={() => handleShareCertificate(certificate.id)}\n                    >\n                      <FaShare className=\"me-2\" /> Share\n                    </button>\n                    <button \n                      className=\"btn btn-primary print-button\" \n                      onClick={() => handlePrintCertificate(certificate.id)}\n                    >\n                      <FaPrint className=\"me-2\" /> Print\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        )}\n        \n        {activeTab === 'marketplace' && (\n          <div>\n            <h3 className=\"mb-3\">Rewards Marketplace</h3>\n            <p>Use your points to redeem these special rewards for your child:</p>\n            \n            <div className=\"marketplace-grid\">\n              {marketplace.map((reward) => (\n                <div key={reward.id} className=\"reward-item\">\n                  <img src={reward.image} alt={reward.name} className=\"reward-image\" />\n                  <div className=\"reward-content\">\n                    <div className=\"reward-points\">{reward.points} Points</div>\n                    <h4>{reward.name}</h4>\n                    <p>{reward.description}</p>\n                    <button \n                      className=\"btn btn-primary w-100 mt-2\" \n                      disabled={points < reward.points || reward.redeemed}\n                      onClick={() => handleRedeemReward(reward.id)}\n                    >\n                      {reward.redeemed ? 'Redeemed' : 'Redeem Reward'}\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Rewards;\n","import React, { useState, useEffect } from 'react';\nimport { FaUser, FaCog, FaBell, FaLock, FaCreditCard, FaChild, FaPlus, FaEdit, FaTrash } from 'react-icons/fa';\nimport { useAuth } from '../contexts/AuthContext';\nimport '../styles/Profile.css';\n\nconst Profile = () => {\n  const [profile, setProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeTab, setActiveTab] = useState('profile');\n  const [newChild, setNewChild] = useState({\n    name: '',\n    age: '',\n    age_group: ''\n  });\n  const [showAddChildForm, setShowAddChildForm] = useState(false);\n  const [editingChild, setEditingChild] = useState(null);\n  const { currentUser, updateProfile } = useAuth();\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      try {\n        const token = localStorage.getItem('authToken');\n        if (!token) {\n          throw new Error('No authentication token found');\n        }\n\n        const response = await fetch(`${process.env.REACT_APP_API_URL}/api/users/profile`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to fetch profile');\n        }\n\n        const data = await response.json();\n        setProfile(data.user || data);\n      } catch (err) {\n        console.error('Error fetching profile:', err);\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProfile();\n  }, []);\n\n  const handleProfileUpdate = async (e) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('authToken');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/users/update`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(profile)\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to update profile');\n      }\n\n      const updatedProfile = await response.json();\n      setProfile(updatedProfile.user || updatedProfile);\n      \n      // Update the user in AuthContext\n      await updateProfile(updatedProfile.user || updatedProfile);\n    } catch (err) {\n      console.error('Error updating profile:', err);\n      setError(err.message);\n    }\n  };\n\n  const handleAddChild = async (e) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('authToken');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      // Determine age group based on age\n      let ageGroup;\n      if (newChild.age >= 2 && newChild.age <= 5) {\n        ageGroup = 'Toddler';\n      } else if (newChild.age >= 6 && newChild.age <= 12) {\n        ageGroup = 'Elementary';\n      } else if (newChild.age >= 13 && newChild.age <= 18) {\n        ageGroup = 'Teen';\n      } else {\n        throw new Error('Age must be between 2 and 18');\n      }\n\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/children`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          ...newChild,\n          ageGroup\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to add child');\n      }\n\n      const data = await response.json();\n      \n      // Fetch updated profile data\n      const profileResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/users/profile`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!profileResponse.ok) {\n        throw new Error('Failed to fetch updated profile');\n      }\n\n      const profileData = await profileResponse.json();\n      setProfile(profileData.user || profileData);\n      setNewChild({ name: '', age: '' });\n      setShowAddChildForm(false);\n    } catch (error) {\n      console.error('Error adding child:', error);\n      setError(error.message);\n    }\n  };\n\n  const handleEditChild = async (e) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('authToken');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      // Determine age group based on age\n      let ageGroup;\n      if (editingChild.age >= 2 && editingChild.age <= 5) {\n        ageGroup = 'Toddler';\n      } else if (editingChild.age >= 6 && editingChild.age <= 12) {\n        ageGroup = 'Elementary';\n      } else if (editingChild.age >= 13 && editingChild.age <= 18) {\n        ageGroup = 'Teen';\n      } else {\n        throw new Error('Age must be between 2 and 18');\n      }\n\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/children/${editingChild.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          ...editingChild,\n          ageGroup\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to update child');\n      }\n\n      // Fetch updated profile data\n      const profileResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/users/profile`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!profileResponse.ok) {\n        throw new Error('Failed to fetch updated profile');\n      }\n\n      const profileData = await profileResponse.json();\n      setProfile(profileData.user || profileData);\n      setEditingChild(null);\n    } catch (error) {\n      console.error('Error updating child:', error);\n      setError(error.message);\n    }\n  };\n\n  const handleDeleteChild = async (childId) => {\n    if (!window.confirm('Are you sure you want to delete this child?')) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('authToken');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/children/${childId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete child');\n      }\n\n      // Fetch updated profile data\n      const profileResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/users/profile`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!profileResponse.ok) {\n        throw new Error('Failed to fetch updated profile');\n      }\n\n      const profileData = await profileResponse.json();\n      setProfile(profileData.user || profileData);\n    } catch (error) {\n      console.error('Error deleting child:', error);\n      setError(error.message);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading profile...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error\">{error}</div>;\n  }\n\n  if (!profile) {\n    return <div className=\"no-profile\">No profile data available</div>;\n  }\n\n  return (\n    <div className=\"profile-container\">\n      <div className=\"profile-sidebar\">\n        <div className=\"profile-header\">\n          <div className=\"profile-avatar\">\n            <FaUser />\n          </div>\n          <h2>{profile.name}</h2>\n          <p>{profile.email}</p>\n        </div>\n\n        <nav className=\"profile-nav\">\n          <button \n            className={`nav-item ${activeTab === 'profile' ? 'active' : ''}`}\n            onClick={() => setActiveTab('profile')}\n          >\n            <FaUser /> Profile\n          </button>\n          <button \n            className={`nav-item ${activeTab === 'children' ? 'active' : ''}`}\n            onClick={() => setActiveTab('children')}\n          >\n            <FaChild /> Children\n          </button>\n          <button \n            className={`nav-item ${activeTab === 'settings' ? 'active' : ''}`}\n            onClick={() => setActiveTab('settings')}\n          >\n            <FaCog /> Settings\n          </button>\n          <button \n            className={`nav-item ${activeTab === 'security' ? 'active' : ''}`}\n            onClick={() => setActiveTab('security')}\n          >\n            <FaLock /> Security\n          </button>\n        </nav>\n      </div>\n\n      <div className=\"profile-content\">\n        {activeTab === 'profile' && (\n          <div className=\"profile-section\">\n            <h3>Profile Information</h3>\n            <form onSubmit={handleProfileUpdate}>\n              <div className=\"form-group\">\n                <label>Name</label>\n                <input\n                  type=\"text\"\n                  value={profile.name}\n                  onChange={(e) => setProfile({ ...profile, name: e.target.value })}\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>Email</label>\n                <input\n                  type=\"email\"\n                  value={profile.email}\n                  onChange={(e) => setProfile({ ...profile, email: e.target.value })}\n                />\n              </div>\n              <button type=\"submit\" className=\"btn btn-primary\">\n                Save Changes\n              </button>\n            </form>\n          </div>\n        )}\n\n        {activeTab === 'children' && (\n          <div className=\"children-section\">\n            <h3>My Children</h3>\n            \n            {profile.children && profile.children.length > 0 ? (\n              <div className=\"children-grid\">\n                {profile.children.map(child => (\n                  <div key={child.id} className=\"child-card\">\n                    <div className=\"child-avatar\">\n                      <FaChild />\n                    </div>\n                    <div className=\"child-info\">\n                      <h4>{child.name}</h4>\n                      <p>{child.age} years old</p>\n                      <p className=\"age-group\">{child.age_group}</p>\n                    </div>\n                    <div className=\"child-actions\">\n                      <button \n                        className=\"btn btn-icon\"\n                        onClick={() => setEditingChild(child)}\n                      >\n                        <FaEdit />\n                      </button>\n                      <button \n                        className=\"btn btn-icon btn-danger\"\n                        onClick={() => handleDeleteChild(child.id)}\n                      >\n                        <FaTrash />\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <p>You haven't added any children yet.</p>\n            )}\n\n            <button \n              className=\"btn btn-secondary mt-4\"\n              onClick={() => setShowAddChildForm(!showAddChildForm)}\n            >\n              <FaPlus className=\"me-2\" /> Add Child\n            </button>\n\n            {showAddChildForm && (\n              <form onSubmit={handleAddChild} className=\"add-child-form mt-4\">\n                <div className=\"form-group\">\n                  <label>Child's Name</label>\n                  <input\n                    type=\"text\"\n                    value={newChild.name}\n                    onChange={(e) => setNewChild({ ...newChild, name: e.target.value })}\n                    required\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Age</label>\n                  <input\n                    type=\"number\"\n                    min=\"2\"\n                    max=\"18\"\n                    value={newChild.age}\n                    onChange={(e) => setNewChild({ ...newChild, age: e.target.value })}\n                    required\n                  />\n                </div>\n                <div className=\"form-actions\">\n                  <button type=\"submit\" className=\"btn btn-primary\">\n                    Add Child\n                  </button>\n                  <button \n                    type=\"button\" \n                    className=\"btn btn-secondary ms-2\"\n                    onClick={() => setShowAddChildForm(false)}\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </form>\n            )}\n\n            {editingChild && (\n              <form onSubmit={handleEditChild} className=\"add-child-form mt-4\">\n                <h4>Edit Child</h4>\n                <div className=\"form-group\">\n                  <label>Child's Name</label>\n                  <input\n                    type=\"text\"\n                    value={editingChild.name}\n                    onChange={(e) => setEditingChild({ ...editingChild, name: e.target.value })}\n                    required\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Age</label>\n                  <input\n                    type=\"number\"\n                    min=\"2\"\n                    max=\"18\"\n                    value={editingChild.age}\n                    onChange={(e) => setEditingChild({ ...editingChild, age: e.target.value })}\n                    required\n                  />\n                </div>\n                <div className=\"form-actions\">\n                  <button type=\"submit\" className=\"btn btn-primary\">\n                    Save Changes\n                  </button>\n                  <button \n                    type=\"button\" \n                    className=\"btn btn-secondary ms-2\"\n                    onClick={() => setEditingChild(null)}\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </form>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'settings' && (\n          <div className=\"settings-section\">\n            <h3>Account Settings</h3>\n            <div className=\"settings-grid\">\n              <div className=\"setting-card\">\n                <h4>Language</h4>\n                <select value={profile.language} onChange={(e) => setProfile({ ...profile, language: e.target.value })}>\n                  <option value=\"en\">English</option>\n                  <option value=\"es\">Spanish</option>\n                  <option value=\"fr\">French</option>\n                </select>\n              </div>\n              <div className=\"setting-card\">\n                <h4>Theme</h4>\n                <select value={profile.theme} onChange={(e) => setProfile({ ...profile, theme: e.target.value })}>\n                  <option value=\"light\">Light</option>\n                  <option value=\"dark\">Dark</option>\n                  <option value=\"system\">System</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'security' && (\n          <div className=\"security-section\">\n            <h3>Security Settings</h3>\n            <div className=\"security-options\">\n              <button className=\"btn btn-secondary\">\n                Change Password\n              </button>\n              <button className=\"btn btn-secondary\">\n                Enable Two-Factor Authentication\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n","import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useChild } from '../contexts/ChildContext';\nimport { FaStar, FaClock, FaUserFriends, FaCheck } from 'react-icons/fa';\nimport ChildSelector from '../components/ChildSelector';\nimport ChallengeCard from '../components/ChallengeCard';\nimport '../styles/Challenges.css';\n\nconst API_URL = 'https://confident-kids-api.kevin-mcgovern.workers.dev';\n\nconst Challenges = () => {\n  const { currentUser } = useAuth();\n  const { activeChild, setActiveChild } = useChild();\n  const [activeTab, setActiveTab] = useState('daily');\n  const [dailyChallenge, setDailyChallenge] = useState(null);\n  const [weeklyChallenges, setWeeklyChallenges] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [completedChallenges, setCompletedChallenges] = useState(new Set());\n  const [calendarChallenges, setCalendarChallenges] = useState([]);\n  const [challenges, setChallenges] = useState({\n    completed: 0,\n    total: 0,\n    streak: 0,\n    currentMonth: new Date().getMonth() + 1,\n    currentYear: new Date().getFullYear()\n  });\n\n  useEffect(() => {\n    if (currentUser && currentUser.children && currentUser.children.length > 0 && !activeChild) {\n      setActiveChild(currentUser.children[0].id);\n    }\n  }, [currentUser, setActiveChild]);\n\n  useEffect(() => {\n    const fetchChallenges = async () => {\n      if (!currentUser || !activeChild) return;\n\n      try {\n        setLoading(true);\n        setError(null);\n        const token = localStorage.getItem('authToken');\n\n        if (!token) {\n          throw new Error('No authentication token found');\n        }\n\n        // Get current month and year\n        const now = new Date();\n        const currentMonth = now.getMonth() + 1;\n        const currentYear = now.getFullYear();\n\n        // Fetch daily challenge\n        const dailyResponse = await fetch(`${API_URL}/api/challenges/daily?childId=${activeChild}&month=${currentMonth}&year=${currentYear}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        if (!dailyResponse.ok) {\n          throw new Error('Failed to fetch daily challenge');\n        }\n\n        const dailyData = await dailyResponse.json();\n        setDailyChallenge(dailyData.challenge);\n\n        // Fetch weekly challenges\n        const weeklyResponse = await fetch(`${API_URL}/api/challenges/weekly?childId=${activeChild}&month=${currentMonth}&year=${currentYear}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        if (!weeklyResponse.ok) {\n          throw new Error('Failed to fetch weekly challenges');\n        }\n\n        const weeklyData = await weeklyResponse.json();\n        setWeeklyChallenges(weeklyData.challenges);\n\n        // Fetch completed challenges for current month\n        const completedResponse = await fetch(`${API_URL}/api/challenges/completed?childId=${activeChild}&month=${currentMonth}&year=${currentYear}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        if (completedResponse.ok) {\n          const completedData = await completedResponse.json();\n          setCompletedChallenges(new Set(completedData.completed_challenges.map(c => c.id)));\n        }\n\n        // Fetch calendar challenges\n        const calendarResponse = await fetch(`${API_URL}/api/challenges/calendar?childId=${activeChild}&month=${currentMonth}&year=${currentYear}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        if (calendarResponse.ok) {\n          const calendarData = await calendarResponse.json();\n          setCalendarChallenges(calendarData.challenges);\n        }\n\n        // Fetch progress tracking data for current month\n        const progressResponse = await fetch(`${API_URL}/api/progress?childId=${activeChild}&month=${currentMonth}&year=${currentYear}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        if (progressResponse.ok) {\n          const progressData = await progressResponse.json();\n          setChallenges({\n            completed: progressData.completedChallenges,\n            total: progressData.totalChallenges,\n            streak: progressData.streak || 0,\n            currentMonth,\n            currentYear\n          });\n        }\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchChallenges();\n  }, [currentUser, activeChild]);\n\n  const handleChildChange = (e) => {\n    const childId = e.target.value;\n    setActiveChild(childId);\n  };\n\n  const handleCompleteChallenge = async (challengeId) => {\n    if (!challengeId) {\n      setError('Invalid challenge ID');\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('authToken');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      if (!activeChild) {\n        throw new Error('No active child selected');\n      }\n\n      const response = await fetch(`${API_URL}/api/challenges/${challengeId}/complete`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ \n          childId: activeChild,\n          completed: true \n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to mark challenge as complete');\n      }\n\n      // Update the completed challenges set\n      setCompletedChallenges(prev => new Set([...prev, challengeId]));\n\n      // If it's the daily challenge, refresh the challenges\n      if (dailyChallenge && dailyChallenge.id === challengeId) {\n        const dailyResponse = await fetch(`${API_URL}/api/challenges/daily?childId=${activeChild}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        if (dailyResponse.ok) {\n          const dailyData = await dailyResponse.json();\n          setDailyChallenge(dailyData.challenge);\n        }\n      }\n    } catch (err) {\n      console.error('Error completing challenge:', err);\n      setError(err.message);\n    }\n  };\n\n  const handleCalendarChallengeToggle = async (day) => {\n    if (!activeChild) {\n      setError('No active child selected');\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('authToken');\n      const challenge = calendarChallenges.find(c => c.day === day);\n      \n      // Get current month and year\n      const now = new Date();\n      const currentMonth = now.getMonth() + 1;\n      const currentYear = now.getFullYear();\n\n      // Mark the challenge as complete\n      const response = await fetch(`${API_URL}/api/challenges/${challenge.id}/complete`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          childId: activeChild,\n          completed: true\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to update challenge status: ${response.statusText}`);\n      }\n\n      // Update local state after successful API call\n      setCalendarChallenges(\n        calendarChallenges.map(c => \n          c.day === day \n            ? { ...c, completed: true } \n            : c\n        )\n      );\n\n      // Refresh the progress tracking data for current month\n      const progressDataResponse = await fetch(`${API_URL}/api/progress?childId=${activeChild}&month=${currentMonth}&year=${currentYear}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (progressDataResponse.ok) {\n        const progressData = await progressDataResponse.json();\n        setChallenges({\n          completed: progressData.completedChallenges,\n          total: progressData.totalChallenges,\n          streak: progressData.streak || 0,\n          currentMonth,\n          currentYear\n        });\n      }\n    } catch (err) {\n      console.error('Error toggling calendar challenge:', err);\n      setError(err.message);\n    }\n  };\n\n  const renderDailyChallenge = () => {\n    if (!dailyChallenge) return null;\n\n    return (\n      <div className=\"daily-challenge-section\">\n        <h2>Today's Challenge</h2>\n        <ChallengeCard\n          challenge={dailyChallenge}\n          childId={activeChild}\n          onComplete={handleCompleteChallenge}\n          isCompleted={completedChallenges.has(dailyChallenge.id)}\n        />\n      </div>\n    );\n  };\n\n  const renderWeeklyChallenges = () => {\n    if (!weeklyChallenges.length) return null;\n\n    return (\n      <div className=\"weekly-challenges-section\">\n        <h2>Weekly Challenges</h2>\n        <div className=\"challenges-grid\">\n          {weeklyChallenges.map(challenge => (\n            <ChallengeCard\n              key={challenge.id}\n              challenge={challenge}\n              childId={activeChild}\n              onComplete={handleCompleteChallenge}\n              isCompleted={completedChallenges.has(challenge.id)}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  if (!currentUser) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"alert alert-warning\">\n          Please log in to view challenges.\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return <div className=\"loader\">Loading challenges...</div>;\n  }\n\n  if (error) {\n    return <div className=\"alert alert-danger\">{error}</div>;\n  }\n\n  return (\n    <div className=\"challenges-page\">\n      <div className=\"challenges-header\">\n        <h1>30-Day Challenges</h1>\n        <ChildSelector />\n      </div>\n      {activeChild ? (\n        <>\n          <div className=\"progress-stats\">\n            <div className=\"stat-card\">\n              <h3>Completed</h3>\n              <div className=\"stat-number\">{challenges.completed}</div>\n            </div>\n            <div className=\"stat-card\">\n              <h3>Total</h3>\n              <div className=\"stat-number\">{challenges.total}</div>\n            </div>\n            <div className=\"stat-card\">\n              <h3>Streak</h3>\n              <div className=\"stat-number\">{challenges.streak}</div>\n            </div>\n          </div>\n          <div className=\"challenges-grid\">\n            {calendarChallenges.map(challenge => (\n              <div key={challenge.id} className={`calendar-day ${challenge.completed ? 'completed' : ''}`}>\n                <div className=\"day-number\">Day {challenge.day}</div>\n                <div className=\"day-content\">\n                  <h3>{challenge.title}</h3>\n                  <p>{challenge.description}</p>\n                  {!challenge.completed && (\n                    <div className=\"day-action\">\n                      <button \n                        className=\"btn btn-primary\"\n                        onClick={() => handleCalendarChallengeToggle(challenge.day)}\n                      >\n                        Complete\n                      </button>\n                    </div>\n                  )}\n                  {challenge.completed && (\n                    <div className=\"completed-state\">\n                      <FaCheck />\n                      <span>Completed!</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </>\n      ) : (\n        <div className=\"alert alert-info\">\n          Please select a child to view their challenges.\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Challenges; ","import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaStar, FaClock, FaUserFriends, FaCheck, FaArrowLeft } from 'react-icons/fa';\nimport '../styles/DailyChallenge.css';\n\nconst API_URL = 'https://confident-kids-api.kevin-mcgovern.workers.dev';\n\nconst ChallengeDetail = () => {\n  const { challengeId } = useParams();\n  const navigate = useNavigate();\n  const { currentUser } = useAuth();\n  const [challenge, setChallenge] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedChild, setSelectedChild] = useState(null);\n\n  useEffect(() => {\n    if (currentUser && currentUser.children && currentUser.children.length > 0 && !selectedChild) {\n      setSelectedChild(currentUser.children[0].id);\n    }\n  }, [currentUser]);\n\n  useEffect(() => {\n    const fetchChallenge = async () => {\n      if (!currentUser || !selectedChild) return;\n\n      try {\n        setLoading(true);\n        setError(null);\n        const token = localStorage.getItem('authToken');\n\n        if (!token) {\n          throw new Error('No authentication token found');\n        }\n\n        const response = await fetch(`${API_URL}/api/challenges/${challengeId}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to fetch challenge details');\n        }\n\n        const data = await response.json();\n        setChallenge(data);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchChallenge();\n  }, [challengeId, currentUser, selectedChild]);\n\n  const handleComplete = async () => {\n    if (!challenge || !selectedChild) return;\n\n    try {\n      const token = localStorage.getItem('authToken');\n      const response = await fetch(`${API_URL}/api/challenges/${challengeId}/complete`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          childId: selectedChild,\n          completed: !challenge.completed\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to update challenge status');\n      }\n\n      const data = await response.json();\n      setChallenge({\n        ...challenge,\n        completed: !challenge.completed\n      });\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const handleChildChange = (e) => {\n    const childId = e.target.value;\n    const selected = currentUser.children.find(child => child.id === childId);\n    setSelectedChild(selected);\n  };\n\n  if (!currentUser) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"alert alert-warning\">\n          Please log in to view challenge details.\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"text-center p-5\">Loading challenge details...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"alert alert-danger\">{error}</div>\n      </div>\n    );\n  }\n\n  if (!challenge) {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"text-center p-5\">Challenge not found.</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mt-4\">\n      <button \n        className=\"btn btn-outline-secondary mb-3\" \n        onClick={() => navigate(-1)}\n      >\n        <FaArrowLeft className=\"me-2\" /> Back to Challenges\n      </button>\n\n      <div className=\"daily-challenge\">\n        {currentUser.children && currentUser.children.length > 0 && (\n          <div className=\"child-selector mb-4\">\n            <label htmlFor=\"childSelect\">Select Child:</label>\n            <select \n              id=\"childSelect\" \n              className=\"form-control\" \n              value={selectedChild?.id || ''} \n              onChange={handleChildChange}\n            >\n              {currentUser.children.map(child => (\n                <option key={child.id} value={child.id}>\n                  {child.name} ({child.age} years)\n                </option>\n              ))}\n            </select>\n          </div>\n        )}\n\n        <div className=\"challenge-header\">\n          <h2>{challenge.title}</h2>\n          <div className=\"challenge-meta\">\n            <span className=\"difficulty\">\n              <FaStar /> {challenge.difficulty_level === 1 ? 'Easy' : \n                         challenge.difficulty_level === 2 ? 'Medium' : 'Hard'}\n            </span>\n            <span className=\"duration\">\n              <FaClock /> 15-20 minutes\n            </span>\n            <span className=\"age-range\">\n              <FaUserFriends /> {challenge.age_group === 'all' ? 'All Ages' : challenge.age_group}\n            </span>\n          </div>\n        </div>\n\n        <div className=\"challenge-content\">\n          <p className=\"description\">{challenge.description}</p>\n          \n          <div className=\"instructions\">\n            <h4>Instructions for Parents:</h4>\n            <p>{challenge.instructions}</p>\n          </div>\n\n          {challenge.materials && (\n            <div className=\"materials\">\n              <h4>Materials Needed:</h4>\n              <p>{challenge.materials}</p>\n            </div>\n          )}\n\n          <div className=\"challenge-actions\">\n            <button \n              className={`btn ${challenge.completed ? 'btn-secondary' : 'btn-primary'}`}\n              onClick={handleComplete}\n            >\n              <FaCheck className=\"me-2\" />\n              {challenge.completed ? 'Mark as Incomplete' : 'Mark as Complete'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChallengeDetail; ","import React, { createContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst AuthContext = createContext();\n// Replace local API URLs with your Cloudflare Worker URL\nconst API_URL = 'https://confident-kids-api.kevin-mcgovern.workers.dev';\n\nexport const AuthProvider = ({ children })  => {\n  const [user, setUser] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Load user on initial render\nuseEffect(() => {\n  const loadUser = async () => {\n    if (localStorage.token) {\n      setAuthToken(localStorage.token);\n      try {\n        // CORRECT:\n        const res = await axios.get(`${API_URL}/api/users/profile`);\n        \n        setUser(res.data);\n        setIsAuthenticated(true);\n      } catch (err) {\n        localStorage.removeItem('token');\n        setUser(null);\n        setIsAuthenticated(false);\n        setError(err.response?.data?.msg || 'Authentication error');\n      }\n    }\n    setLoading(false);\n  };\n\n  loadUser();\n}, []);\n\n  // Set auth token in headers\nconst setAuthToken = (token) => {\n  if (token) {\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  } else {\n    delete axios.defaults.headers.common['Authorization'];\n  }\n};\n\n// Register user\nconst register = async (formData)  => {\n  try {\n    // INCORRECT:\n    // const res = await axios.post('${API_URL}/api/users/register', formData);\n    \n    // CORRECT:\n    const res = await axios.post(`${API_URL}/api/users/register`, formData);\n    \n    localStorage.setItem('token', res.data.token);\n    setAuthToken(res.data.token);\n    \n    // Load user data\n    // INCORRECT:\n    // const userRes = await axios.get('${API_URL}/api/users/profile');\n    \n    // CORRECT:\n    const userRes = await axios.get(`${API_URL}/api/users/profile`);\n    \n    setUser(userRes.data);\n    setIsAuthenticated(true);\n    setError(null);\n    return true;\n  } catch (err) {\n    setError(err.response?.data?.msg || 'Registration failed');\n    return false;\n  }\n};\n\n\n// Add this method to your AuthContext.js\nconst hasPremiumAccess = () => {\n  return user && user.subscription && user.subscription.status === 'active';\n};\n\n// Include it in the context value\nconst value = {\n  user,\n  isAuthenticated,\n  loading,\n  error,\n  register,\n  login,\n  logout,\n  updateProfile,\n  addChild,\n  hasPremiumAccess\n};\n\n\n // Login user\nconst login = async (email, password) => {\n  try {\n    // CORRECT:\n    const res = await axios.post(`${API_URL}/api/users/login`, { email, password });\n    \n    localStorage.setItem('token', res.data.token);\n    setAuthToken(res.data.token);\n    \n    // Load user data\n    // CORRECT:\n    const userRes = await axios.get(`${API_URL}/api/users/profile`);\n    \n    setUser(userRes.data);\n    setIsAuthenticated(true);\n    setError(null);\n    return true;\n  } catch (err) {\n    setError(err.response?.data?.msg || 'Login failed');\n    return false;\n  }\n};\n\n  // Logout user\n  const logout = () => {\n    localStorage.removeItem('token');\n    setAuthToken(null);\n    setUser(null);\n    setIsAuthenticated(false);\n  };\n\n // Update user profile\nconst updateProfile = async (formData) => {\n  try {\n    // CORRECT:\n    const res = await axios.put(`${API_URL}/api/users/profile`, formData);\n    \n    setUser(res.data);\n    setError(null);\n    return true;\n  } catch (err) {\n    setError(err.response?.data?.msg || 'Profile update failed');\n    return false;\n  }\n};\n// Add child to profile\nconst addChild = async (childData) => {\n  try {\n    // CORRECT:\n    const res = await axios.post(`${API_URL}/api/users/child`, childData);\n    \n    setUser(res.data);\n    setError(null);\n    return true;\n  } catch (err) {\n    setError(err.response?.data?.msg || 'Failed to add child');\n    return false;\n  }\n};\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isAuthenticated,\n        loading,\n        error,\n        register,\n        login,\n        logout,\n        updateProfile,\n        addChild\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthContext;","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useContext } from 'react';\nimport AuthContext from '../context/AuthContext';\n\nconst API_URL = 'https://confident-kids-api.kevin-mcgovern.workers.dev';\n\nconst PillarView = () => {\n  const { id } = useParams();\n  const { user } = useContext(AuthContext);\n  const [activeTab, setActiveTab] = useState('overview');\n  const [pillar, setPillar] = useState(null);\n  const [techniques, setTechniques] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedChild, setSelectedChild] = useState(null);\n\n  useEffect(() => {\n    if (user && user.children && user.children.length > 0 && !selectedChild) {\n      setSelectedChild(user.children[0].id);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    const fetchPillarData = async () => {\n      if (!id || !selectedChild) return;\n\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Fetch pillar data\n        const pillarResponse = await fetch(`${API_URL}/api/pillars/${id}`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`,\n          },\n        });\n\n        if (!pillarResponse.ok) {\n          throw new Error('Failed to fetch pillar data');\n        }\n\n        const pillarData = await pillarResponse.json();\n        setPillar(pillarData);\n\n        // Fetch techniques for this pillar\n        const techniquesResponse = await fetch(`${API_URL}/api/content?pillarId=${id}`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`,\n          },\n        });\n\n        if (!techniquesResponse.ok) {\n          throw new Error('Failed to fetch techniques');\n        }\n\n        const techniquesData = await techniquesResponse.json();\n        setTechniques(techniquesData.filter(t => t.content_type === 'technique'));\n      } catch (err) {\n        console.error('Error fetching pillar data:', err);\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPillarData();\n  }, [id, selectedChild]);\n\n  if (loading) {\n    return <div className=\"container mt-4\">Loading pillar data...</div>;\n  }\n\n  if (error) {\n    return <div className=\"container mt-4 alert alert-danger\">{error}</div>;\n  }\n\n  if (!pillar) {\n    return <div className=\"container mt-4\">Pillar not found</div>;\n  }\n\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"child-selector mb-4\">\n        <label htmlFor=\"childSelect\">Select Child:</label>\n        <select \n          id=\"childSelect\" \n          className=\"form-control\" \n          value={selectedChild || ''} \n          onChange={(e) => setSelectedChild(e.target.value)}\n        >\n          {user?.children?.map(child => (\n            <option key={child.id} value={child.id}>\n              {child.name} ({child.age} years)\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"pillar-header\">\n        <h1>{pillar.name}</h1>\n        <p className=\"lead\">{pillar.short_description}</p>\n      </div>\n\n      <div className=\"pillar-tabs\">\n        <button \n          className={`tab ${activeTab === 'overview' ? 'active' : ''}`}\n          onClick={() => setActiveTab('overview')}\n        >\n          Overview\n        </button>\n        <button \n          className={`tab ${activeTab === 'techniques' ? 'active' : ''}`}\n          onClick={() => setActiveTab('techniques')}\n        >\n          Techniques\n        </button>\n        <button \n          className={`tab ${activeTab === 'challenges' ? 'active' : ''}`}\n          onClick={() => setActiveTab('challenges')}\n        >\n          Challenges\n        </button>\n      </div>\n\n      {activeTab === 'overview' && (\n        <div className=\"pillar-overview\">\n          <div className=\"description\">\n            <h2>About This Pillar</h2>\n            <p>{pillar.description}</p>\n          </div>\n\n          <div className=\"age-groups\">\n            <h2>Age-Specific Guidance</h2>\n            <div className=\"age-group\">\n              <h3>Toddlers (2-5 years)</h3>\n              <p>{pillar.age_groups?.toddler || 'Guidance coming soon'}</p>\n            </div>\n            <div className=\"age-group\">\n              <h3>Elementary (6-11 years)</h3>\n              <p>{pillar.age_groups?.elementary || 'Guidance coming soon'}</p>\n            </div>\n            <div className=\"age-group\">\n              <h3>Teens (12+ years)</h3>\n              <p>{pillar.age_groups?.teen || 'Guidance coming soon'}</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'techniques' && (\n        <div className=\"pillar-techniques\">\n          {techniques.map(technique => (\n            <div key={technique.id} className=\"technique-card\">\n              <h3>{technique.title}</h3>\n              <p>{technique.description}</p>\n              <div className=\"technique-content\">\n                <h4>Instructions</h4>\n                <p>{technique.content_data?.instructions || 'Instructions coming soon'}</p>\n                \n                {technique.content_data?.examples && (\n                  <>\n                    <h4>Examples</h4>\n                    <ul>\n                      {technique.content_data.examples.map((example, index) => (\n                        <li key={index}>{example}</li>\n                      ))}\n                    </ul>\n                  </>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {activeTab === 'challenges' && (\n        <div className=\"pillar-challenges\">\n          <p>Challenges for this pillar will be available soon.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PillarView;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider, useAuth } from './contexts/AuthContext'; // Add useAuth import\nimport { ChildProvider } from './contexts/ChildContext';\nimport './styles/main.css';\n\n// Components\nimport Navigation from './components/Navigation';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport Dashboard from './components/Dashboard';\nimport PillarDetail from './components/PillarDetail';\nimport PillarsOverview from './components/PillarsOverview';\nimport PillarTechniques from './components/PillarTechniques';\nimport Subscription from './components/Subscription';\nimport Rewards from './components/Rewards';\nimport Home from './components/Home';\nimport Profile from './components/Profile';\nimport Challenges from './pages/Challenges';\nimport ChallengeDetail from './components/ChallengeDetail';\nimport PillarView from './pages/PillarView';\n\n// Protected route component\nconst ProtectedRoute = ({ children }) => {\n  const { currentUser, loading } = useAuth();\n  \n  if (loading) {\n    return <div className=\"container mt-4\"><div className=\"text-center p-5\">Loading...</div></div>;\n  }\n  \n  if (!currentUser) {\n    return <Navigate to=\"/login\" />;\n  }\n  \n  return children;\n};\n\n// Premium route component\nconst PremiumRoute = ({ children }) => {\n  const { hasPremiumAccess, loading } = useAuth();\n  \n  if (loading) {\n    return <div className=\"container mt-4\"><div className=\"text-center p-5\">Loading...</div></div>;\n  }\n  \n  if (!hasPremiumAccess()) {\n    return <Navigate to=\"/subscription\" />;\n  }\n  \n  return children;\n};\n\n// Root redirect component\nconst RootRedirect = () => {\n  const { currentUser, loading } = useAuth();\n  \n  if (loading) {\n    return <div className=\"container mt-4\"><div className=\"text-center p-5\">Loading...</div></div>;\n  }\n  \n  return <Navigate to={currentUser ? \"/dashboard\" : \"/\"} />;\n};\n\nconst App = () => {\n  return (\n    <AuthProvider>\n      <ChildProvider>\n        <BrowserRouter>\n          <Navigation />\n          <main className=\"main-content\">\n            <Routes>\n              <Route path=\"/login\" element={<Login />} />\n              <Route path=\"/register\" element={<Register />} />\n              <Route path=\"/dashboard\" element={\n                <ProtectedRoute>\n                  <Dashboard />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/pillars\" element={\n                <ProtectedRoute>\n                  <PillarsOverview />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/pillars/:pillarId\" element={\n                <ProtectedRoute>\n                  <PillarView />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/pillars/:pillarId/techniques\" element={\n                <ProtectedRoute>\n                  <PillarTechniques />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/challenges\" element={\n                <ProtectedRoute>\n                  <Challenges />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/challenges/:challengeId\" element={\n                <ProtectedRoute>\n                  <ChallengeDetail />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/subscription\" element={\n                <ProtectedRoute>\n                  <Subscription />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/rewards\" element={\n                <ProtectedRoute>\n                  <PremiumRoute>\n                    <Rewards />\n                  </PremiumRoute>\n                </ProtectedRoute>\n              } />\n              <Route path=\"/profile\" element={\n                <ProtectedRoute>\n                  <Profile />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/\" element={<RootRedirect />} />\n            </Routes>\n          </main>\n        </BrowserRouter>\n      </ChildProvider>\n    </AuthProvider>\n  );\n};\n\nexport default App;\n\n// Move the ReactDOM.render to a separate index.js file\n// This should not be in App.js\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './styles/main.css';\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}