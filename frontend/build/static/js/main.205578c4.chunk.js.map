{"version":3,"sources":["contexts/AuthContext.jsx","assets/logo.png","components/Navigation.jsx","components/Login.jsx","components/Register.jsx","components/Dashboard.jsx","components/ProgressTracking.jsx","components/PillarDetail.jsx","components/Subscription.jsx","components/Rewards.jsx","components/Home.jsx","components/Profile.jsx","App.js","index.js"],"names":["AuthContext","createContext","API_URL","process","useAuth","useContext","AuthProvider","_ref","children","currentUser","setCurrentUser","useState","userSubscription","setUserSubscription","loading","setLoading","error","setError","isAuthenticated","setIsAuthenticated","async","fetchCurrentUser","token","localStorage","getItem","console","log","substring","response","fetch","method","headers","data","json","ok","status","removeItem","Error","message","user","fetchSubscriptionStatus","subscription","useEffect","loadUserData","value","register","email","password","name","body","JSON","stringify","setItem","login","logout","updateProfile","userData","prevUser","hasPremiumAccess","hasUser","hasSubscription","_jsx","Provider","Navigation","isMenuOpen","setIsMenuOpen","location","useLocation","className","_jsxs","Link","to","src","logo","alt","onClick","toggleMenu","FaTimes","FaBars","pathname","_Fragment","includes","FaUser","FaSignOutAlt","FaCrown","Login","setEmail","setPassword","navigate","useNavigate","role","onSubmit","e","preventDefault","htmlFor","FaEnvelope","type","id","onChange","target","required","FaLock","disabled","Register","setName","confirmPassword","setConfirmPassword","length","Dashboard","dashboardData","setDashboardData","selectedChild","setSelectedChild","isPremium","fetchDashboardData","map","child","age","FaChartLine","size","overallProgress","FaCalendarAlt","activitiesCompleted","FaTrophy","points","todayChallenge","title","description","pillars","pillar","shortDescription","progress","style","width","totalActivities","ProgressTracking","childId","progressData","setProgressData","fetchProgressData","updateProgress","pillarId","activityId","completed","prevData","updatedPillars","updatedActivities","activities","activity","currentStreak","checked","date","slice","Array","fill","_","i","href","day","calendar","isToday","isFuture","join","Date","getDate","FaChild","PillarDetail","useParams","setPillar","setActivities","fetchPillarData","visibleActivities","instructions","stripePromise","loadStripe","plans","price","interval","features","regularPrice","bestValue","CheckoutForm","selectedPlan","onSuccess","onError","stripe","useStripe","elements","useElements","event","cardElement","getElement","CardElement","stripeError","paymentMethod","createPaymentMethod","card","paymentMethodId","planId","customerId","confirmError","paymentIntent","confirmCardPayment","clientSecret","options","base","fontSize","color","invalid","Subscription","setSelectedPlan","subscriptionComplete","setSubscriptionComplete","subscriptionError","setSubscriptionError","FaCheck","plan","handlePlanSelect","toFixed","feature","index","Elements","setTimeout","errorMessage","FaRegStar","Rewards","activeTab","setActiveTab","achievements","setAchievements","certificates","setCertificates","marketplace","setMarketplace","setPoints","fetchRewardsData","FaStar","achievement","unlocked","icon","certificate","_currentUser$children","_currentUser$children2","find","toLocaleDateString","handleShareCertificate","certificateId","FaShare","handlePrintCertificate","window","print","FaPrint","reward","image","redeemed","rewardId","updatedPoints","prevMarketplace","item","alert","handleRedeemReward","Home","Profile","setChildren","newChild","setNewChild","ageGroup","subscriptionDetails","setSubscriptionDetails","success","setSuccess","FaCreditCard","updatedName","prompt","updatedAge","updatedData","handleEditChild","FaEdit","confirm","filter","handleDeleteChild","FaTrash","min","max","FaPlus","current_period_end","ProtectedRoute","Navigate","PremiumRoute","_ref2","App","BrowserRouter","Routes","Route","path","element","ReactDOM","createRoot","document","getElementById","render","React","StrictMode"],"mappings":"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","file":"static/js/main.205578c4.chunk.js","sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\n\n// Create the authentication context\nconst AuthContext = createContext();\n\n// Hard-code the API URL for testing if environment variables aren't working\nconst API_URL = process.env.REACT_APP_API_URL || 'https://confident-kids-api.kevin-mcgovern.workers.dev';\n\n// Custom hook to use the auth context\nexport const useAuth = ()  => {\n  return useContext(AuthContext);\n};\n\n// Provider component that wraps the app and makes auth object available to any child component that calls useAuth()\nexport function AuthProvider({ children }) {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [userSubscription, setUserSubscription] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [isAuthenticated, setIsAuthenticated] = useState(false); // Add this for compatibility\n\n  // Function to register a new user\n  async function register(email, password, name) {\n    try {\n      setError('');\n      console.log('Registering with:', { email, name });\n      console.log('Using API URL:', API_URL);\n      \n      const response = await fetch(`${API_URL}/api/users/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password, name }),\n      });\n\n      const data = await response.json();\n      console.log('Register response:', data);\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to register');\n      }\n\n      // Store the token in localStorage\n      localStorage.setItem('authToken', data.token);\n      \n      // Set the current user\n      setCurrentUser(data.user);\n      setIsAuthenticated(true);\n      \n      return data;\n    } catch (error) {\n      console.error('Registration error:', error);\n      setError(error.message);\n      throw error;\n    }\n  }\n\n  // Function to log in a user\n  async function login(email, password) {\n    try {\n      setError('');\n      console.log('Logging in with:', { email });\n      console.log('Using API URL:', API_URL);\n      \n      const response = await fetch(`${API_URL}/api/users/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await response.json();\n      console.log('Login response:', data);\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to login');\n      }\n\n      // Store the token in localStorage\n      localStorage.setItem('authToken', data.token);\n      \n      // Set the current user\n      setCurrentUser(data.user);\n      setIsAuthenticated(true);\n      \n      console.log('Auth state after login:', { user: data.user, isAuthenticated: true });\n      \n      // Fetch subscription status\n      await fetchSubscriptionStatus();\n      \n      return data;\n    } catch (error) {\n      console.error('Login error:', error);\n      setError(error.message);\n      throw error;\n    }\n  }\n\n  // Function to log out a user\n  async function logout() {\n    try {\n      setError('');\n      // Remove the token from localStorage\n      localStorage.removeItem('authToken');\n      \n      // Clear the current user\n      setCurrentUser(null);\n      setUserSubscription(null);\n      setIsAuthenticated(false);\n      \n      return true;\n    } catch (error) {\n      setError(error.message);\n      throw error;\n    }\n  }\n\n  // Function to fetch the current user's profile\n  async function fetchCurrentUser() {\n    try {\n      const token = localStorage.getItem('authToken');\n      \n      if (!token) {\n        setCurrentUser(null);\n        setIsAuthenticated(false);\n        setLoading(false);\n        return null;\n      }\n      \n      console.log('Fetching user profile with token:', token.substring(0, 10) + '...');\n      \n      const response = await fetch(`${API_URL}/api/users/profile`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      const data = await response.json();\n      console.log('User profile response:', data);\n\n      if (!response.ok) {\n        // If token is invalid, clear it\n        if (response.status === 401) {\n          localStorage.removeItem('authToken');\n          setCurrentUser(null);\n          setIsAuthenticated(false);\n          setLoading(false);\n          return null;\n        }\n        throw new Error(data.message || 'Failed to fetch user profile');\n      }\n\n      setCurrentUser(data.user || data); // Handle both {user: {...}} and direct user object\n      setIsAuthenticated(true);\n      return data.user || data;\n    } catch (error) {\n      console.error('Error fetching current user:', error);\n      setCurrentUser(null);\n      setIsAuthenticated(false);\n      return null;\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Function to fetch the user's subscription status\n  async function fetchSubscriptionStatus() {\n    try {\n      const token = localStorage.getItem('authToken');\n      \n      if (!token || !currentUser) {\n        setUserSubscription(null);\n        return null;\n      }\n      \n      console.log('Fetching subscription status');\n      \n      const response = await fetch(`${API_URL}/api/subscriptions/status`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      const data = await response.json();\n      console.log('Subscription status response:', data);\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to fetch subscription status');\n      }\n\n      setUserSubscription(data.subscription);\n      return data.subscription;\n    } catch (error) {\n      console.error('Error fetching subscription status:', error);\n      setUserSubscription(null);\n      return null;\n    }\n  }\n\n  // Function to update user profile\n  async function updateProfile(userData) {\n    try {\n      setError('');\n      const token = localStorage.getItem('authToken');\n      \n      if (!token) {\n        throw new Error('Not authenticated');\n      }\n      \n      const response = await fetch(`${API_URL}/api/users/update`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify(userData),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to update profile');\n      }\n\n      // Update the current user with the new data\n      setCurrentUser(prevUser => ({\n        ...prevUser,\n        ...data.user\n      }));\n      \n      return data;\n    } catch (error) {\n      setError(error.message);\n      throw error;\n    }\n  }\n\n  // Function to check if user has access to premium features\n  function hasPremiumAccess() {\n    return userSubscription && userSubscription.status === 'active';\n  }\n\n  // Effect to fetch the current user when the component mounts\n  useEffect(() => {\n    async function loadUserData() {\n      console.log('Loading user data on mount');\n      const user = await fetchCurrentUser();\n      if (user) {\n        console.log('User found, fetching subscription status');\n        await fetchSubscriptionStatus();\n      }\n    }\n    \n    loadUserData();\n  }, []); // Empty dependency array is fine for initial load\n\n  // Create the value object that will be provided to consumers\n  const value = {\n    currentUser,\n    user: currentUser, // Add alias for compatibility\n    userSubscription,\n    isAuthenticated, // Add this for compatibility\n    loading,\n    error,\n    register,\n    login,\n    logout,\n    updateProfile,\n    fetchCurrentUser,\n    fetchSubscriptionStatus,\n    hasPremiumAccess\n  };\n\n  console.log('AuthContext state:', { \n    isAuthenticated, \n    hasUser: !!currentUser, \n    hasSubscription: !!userSubscription,\n    loading\n  });\n\n  return (\n    <AuthContext.Provider value={value}>\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default AuthContext;\n","export default __webpack_public_path__ + \"static/media/logo.0f63a7c9.png\";","import React, { useState, useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaBars, FaTimes, FaUser, FaSignOutAlt, FaCrown } from 'react-icons/fa';\nimport logo from '../assets/logo.png';\n\nconst Navigation = () => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const { currentUser, logout, userSubscription } = useAuth();\n  const location = useLocation();\n  \n  const toggleMenu = () => {\n    setIsMenuOpen(!isMenuOpen);\n  };\n  \n  // Close menu when route changes\n  useEffect(() => {\n    setIsMenuOpen(false);\n  }, [location]);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n    } catch (error) {\n      console.error(\"Failed to log out\", error);\n    }\n  };\n\n  return (\n    <nav className=\"navbar\">\n      <div className=\"navbar-container\">\n        <Link to=\"/\" className=\"navbar-logo\">\n          <img src={logo} alt=\"Confident Kids Logo\" />\n          <span>Confident Kids</span>\n        </Link>\n        \n        <button className=\"navbar-toggle\" onClick={toggleMenu} aria-label=\"Toggle navigation\">\n          {isMenuOpen ? <FaTimes /> : <FaBars />}\n        </button>\n        \n        <ul className={`navbar-menu ${isMenuOpen ? 'active' : ''}`}>\n          <li className=\"navbar-item\">\n            <Link \n              to=\"/\" \n              className={`navbar-link ${location.pathname === '/' ? 'active' : ''}`}\n            >\n              Home\n            </Link>\n          </li>\n          \n          {currentUser && (\n            <>\n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/dashboard\" \n                  className={`navbar-link ${location.pathname === '/dashboard' ? 'active' : ''}`}\n                >\n                  Dashboard\n                </Link>\n              </li>\n              \n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/pillars\" \n                  className={`navbar-link ${location.pathname.includes('/pillars') ? 'active' : ''}`}\n                >\n                  Pillars\n                </Link>\n              </li>\n              \n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/challenges\" \n                  className={`navbar-link ${location.pathname === '/challenges' ? 'active' : ''}`}\n                >\n                  Challenges\n                </Link>\n              </li>\n              \n              {userSubscription && userSubscription.status === 'active' && (\n                <li className=\"navbar-item\">\n                  <Link \n                    to=\"/rewards\" \n                    className={`navbar-link ${location.pathname === '/rewards' ? 'active' : ''}`}\n                  >\n                    Rewards\n                    <span className=\"premium-badge\">PRO</span>\n                  </Link>\n                </li>\n              )}\n              \n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/profile\" \n                  className={`navbar-link ${location.pathname === '/profile' ? 'active' : ''}`}\n                >\n                  <FaUser /> Profile\n                </Link>\n              </li>\n              \n              <li className=\"navbar-item\">\n                <button onClick={handleLogout} className=\"navbar-link\">\n                  <FaSignOutAlt /> Logout\n                </button>\n              </li>\n            </>\n          )}\n          \n          {!currentUser && (\n            <>\n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/about\" \n                  className={`navbar-link ${location.pathname === '/about' ? 'active' : ''}`}\n                >\n                  About\n                </Link>\n              </li>\n              \n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/login\" \n                  className={`navbar-link ${location.pathname === '/login' ? 'active' : ''}`}\n                >\n                  Login\n                </Link>\n              </li>\n              \n              <li className=\"navbar-item\">\n                <Link \n                  to=\"/register\" \n                  className=\"navbar-cta\"\n                >\n                  Sign Up\n                </Link>\n              </li>\n            </>\n          )}\n          \n          {currentUser && !userSubscription?.status === 'active' && (\n            <li className=\"navbar-item\">\n              <Link \n                to=\"/subscription\" \n                className=\"navbar-cta\"\n              >\n                <FaCrown /> Upgrade\n              </Link>\n            </li>\n          )}\n        </ul>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navigation;\n","import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaEnvelope, FaLock } from 'react-icons/fa';\n\nconst Login = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    try {\n      setError('');\n      setLoading(true);\n      await login(email, password);\n      navigate('/dashboard');\n    } catch (error) {\n      setError(error.message || 'Failed to log in');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <div className=\"card mt-5\">\n            <div className=\"card-header\">\n              <h2 className=\"text-center\">Log In</h2>\n            </div>\n            <div className=\"card-body\">\n              {error && (\n                <div className=\"alert alert-danger\" role=\"alert\">\n                  {error}\n                </div>\n              )}\n              <form onSubmit={handleSubmit}>\n                <div className=\"form-group mb-3\">\n                  <label htmlFor=\"email\">\n                    <FaEnvelope className=\"me-2\" /> Email\n                  </label>\n                  <input\n                    type=\"email\"\n                    id=\"email\"\n                    className=\"form-control\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group mb-4\">\n                  <label htmlFor=\"password\">\n                    <FaLock className=\"me-2\" /> Password\n                  </label>\n                  <input\n                    type=\"password\"\n                    id=\"password\"\n                    className=\"form-control\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary w-100\"\n                  disabled={loading}\n                >\n                  {loading ? 'Logging In...' : 'Log In'}\n                </button>\n              </form>\n              \n              <div className=\"text-center mt-3\">\n                <Link to=\"/forgot-password\">Forgot Password?</Link>\n              </div>\n            </div>\n            <div className=\"card-footer text-center\">\n              Need an account? <Link to=\"/register\">Sign Up</Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaEnvelope, FaLock, FaUser } from 'react-icons/fa';\n\nconst Register = () => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { register } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Form validation\n    if (password !== confirmPassword) {\n      return setError('Passwords do not match');\n    }\n    \n    if (password.length < 6) {\n      return setError('Password must be at least 6 characters');\n    }\n    \n    try {\n      setError('');\n      setLoading(true);\n      await register(email, password, name);\n      navigate('/dashboard');\n    } catch (error) {\n      setError(error.message || 'Failed to create an account');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <div className=\"card mt-5\">\n            <div className=\"card-header\">\n              <h2 className=\"text-center\">Create Your Account</h2>\n            </div>\n            <div className=\"card-body\">\n              {error && (\n                <div className=\"alert alert-danger\" role=\"alert\">\n                  {error}\n                </div>\n              )}\n              <form onSubmit={handleSubmit}>\n                <div className=\"form-group mb-3\">\n                  <label htmlFor=\"name\">\n                    <FaUser className=\"me-2\" /> Full Name\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"name\"\n                    className=\"form-control\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group mb-3\">\n                  <label htmlFor=\"email\">\n                    <FaEnvelope className=\"me-2\" /> Email\n                  </label>\n                  <input\n                    type=\"email\"\n                    id=\"email\"\n                    className=\"form-control\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group mb-3\">\n                  <label htmlFor=\"password\">\n                    <FaLock className=\"me-2\" /> Password\n                  </label>\n                  <input\n                    type=\"password\"\n                    id=\"password\"\n                    className=\"form-control\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group mb-4\">\n                  <label htmlFor=\"confirmPassword\">\n                    <FaLock className=\"me-2\" /> Confirm Password\n                  </label>\n                  <input\n                    type=\"password\"\n                    id=\"confirmPassword\"\n                    className=\"form-control\"\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    required\n                  />\n                </div>\n                \n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary w-100\"\n                  disabled={loading}\n                >\n                  {loading ? 'Creating Account...' : 'Sign Up'}\n                </button>\n              </form>\n            </div>\n            <div className=\"card-footer text-center\">\n              Already have an account? <Link to=\"/login\">Log In</Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaChartLine, FaCalendarAlt, FaTrophy, FaCrown } from 'react-icons/fa';\n\nconst Dashboard = () => {\n  const [dashboardData, setDashboardData] = useState(null);\n  const [selectedChild, setSelectedChild] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const { currentUser, hasPremiumAccess } = useAuth();\n  const isPremium = hasPremiumAccess();\n\n  useEffect(() => {\n    const fetchDashboardData = async () => {\n      try {\n        setLoading(true);\n        const token = localStorage.getItem('authToken');\n        \n        // Set the first child as selected by default if user has children\n        if (currentUser.children && currentUser.children.length > 0) {\n          setSelectedChild(currentUser.children[0].id);\n        }\n        \n        const response = await fetch(`${process.env.REACT_APP_API_URL}/api/dashboard`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n          throw new Error(data.message || 'Failed to fetch dashboard data');\n        }\n\n        setDashboardData(data);\n      } catch (error) {\n        console.error('Error fetching dashboard data:', error);\n        setError('Failed to load dashboard data. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchDashboardData();\n  }, [currentUser]);\n\n  const handleChildChange = (e) => {\n    setSelectedChild(e.target.value);\n  };\n\n  if (loading) {\n    return <div className=\"text-center p-5\">Loading dashboard data...</div>;\n  }\n\n  if (error) {\n    return <div className=\"alert alert-danger\">{error}</div>;\n  }\n\n  if (!dashboardData) {\n    return <div className=\"text-center p-5\">No dashboard data available.</div>;\n  }\n\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"dashboard-welcome\">\n        <h1>Welcome, {currentUser.name}!</h1>\n        <p>Track your child's confidence journey and explore activities designed to build their confidence.</p>\n      </div>\n      \n      {currentUser.children && currentUser.children.length > 0 ? (\n        <>\n          <div className=\"child-selector mb-4\">\n            <label htmlFor=\"childSelect\">Select Child:</label>\n            <select \n              id=\"childSelect\" \n              className=\"form-control\" \n              value={selectedChild} \n              onChange={handleChildChange}\n            >\n              {currentUser.children.map(child => (\n                <option key={child.id} value={child.id}>\n                  {child.name} ({child.age} years)\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          <div className=\"dashboard-stats\">\n            <div className=\"stat-card\">\n              <FaChartLine className=\"mb-2\" size={24} />\n              <div className=\"stat-value\">{dashboardData.overallProgress}%</div>\n              <div className=\"stat-label\">Overall Progress</div>\n            </div>\n            \n            <div className=\"stat-card\">\n              <FaCalendarAlt className=\"mb-2\" size={24} />\n              <div className=\"stat-value\">{dashboardData.activitiesCompleted}</div>\n              <div className=\"stat-label\">Activities Completed</div>\n            </div>\n            \n            <div className=\"stat-card\">\n              <FaTrophy className=\"mb-2\" size={24} />\n              <div className=\"stat-value\">{isPremium ? dashboardData.points : 'Locked'}</div>\n              <div className=\"stat-label\">Reward Points {!isPremium && <span className=\"premium-badge\">PRO</span>}</div>\n            </div>\n          </div>\n          \n          <div className=\"today-challenge\">\n            <h2>Today's Challenge</h2>\n            <div className=\"challenge-container\">\n              <h3 className=\"challenge-title\">{dashboardData.todayChallenge.title}</h3>\n              <p className=\"challenge-description\">{dashboardData.todayChallenge.description}</p>\n              <Link to={`/challenges/${dashboardData.todayChallenge.id}`} className=\"btn btn-primary mt-3\">\n                Start Challenge\n              </Link>\n            </div>\n          </div>\n          \n          <h2 className=\"mt-5 mb-3\">Confidence Pillars</h2>\n          <div className=\"grid-3\">\n            {dashboardData.pillars.map((pillar) => (\n              <div key={pillar.id} className={`pillar-card pillar-card-${pillar.id}`}>\n                <div className=\"pillar-card-header\">\n                  <h3>{pillar.name}</h3>\n                </div>\n                <div className=\"pillar-card-body\">\n                  <p>{pillar.shortDescription}</p>\n                  <div className=\"progress-label\">\n                    <span>Progress</span>\n                    <span>{pillar.progress}%</span>\n                  </div>\n                  <div className=\"progress-container\">\n                    <div \n                      className={`progress-bar progress-bar-${pillar.id}`} \n                      style={{ width: `${pillar.progress}%` }}\n                    ></div>\n                  </div>\n                </div>\n                <div className=\"pillar-card-footer\">\n                  <span>{pillar.activitiesCompleted}/{pillar.totalActivities} Activities</span>\n                  <Link to={`/pillars/${pillar.id}`} className=\"btn btn-sm btn-outline\">\n                    Explore\n                  </Link>\n                </div>\n              </div>\n            ))}\n          </div>\n        </>\n      ) : (\n        <div className=\"alert alert-info mt-4\">\n          <h4>Let's Get Started!</h4>\n          <p>Add your child's profile to begin their confidence journey.</p>\n          <Link to=\"/profile\" className=\"btn btn-primary mt-2\">\n            Add Child Profile\n          </Link>\n        </div>\n      )}\n      \n      {!isPremium && (\n        <div className=\"upgrade-prompt standard mt-5\">\n          <h3><FaCrown className=\"me-2\" /> Unlock Premium Features</h3>\n          <p>Subscribe to our premium plan to access all activities, detailed progress tracking, and rewards for your child.</p>\n          <Link to=\"/subscription\" className=\"upgrade-button\">Upgrade Now</Link>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n","import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaChartLine, FaTrophy, FaCalendarAlt, FaChild } from 'react-icons/fa';\n\nconst ProgressTracking = ({ childId }) => {\n  const [progressData, setProgressData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const { currentUser, hasPremiumAccess } = useAuth();\n  const isPremium = hasPremiumAccess();\n\n  useEffect(() => {\n    const fetchProgressData = async () => {\n      if (!childId) return;\n      \n      try {\n        setLoading(true);\n        const token = localStorage.getItem('authToken');\n        \n        const response = await fetch(`${process.env.REACT_APP_API_URL}/api/progress/${childId}`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n          throw new Error(data.message || 'Failed to fetch progress data');\n        }\n\n        setProgressData(data.progress);\n      } catch (error) {\n        console.error('Error fetching progress data:', error);\n        setError('Failed to load progress data. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProgressData();\n  }, [childId]);\n\n  const updateProgress = async (pillarId, activityId, completed) => {\n    if (!childId) return;\n    \n    try {\n      const token = localStorage.getItem('authToken');\n      \n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/progress/update`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          childId,\n          pillarId,\n          activityId,\n          completed\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to update progress');\n      }\n\n      // Update local state with new progress data\n      setProgressData(prevData => {\n        const updatedPillars = prevData.pillars.map(pillar => {\n          if (pillar.id === pillarId) {\n            const updatedActivities = pillar.activities.map(activity => {\n              if (activity.id === activityId) {\n                return { ...activity, completed };\n              }\n              return activity;\n            });\n            return { ...pillar, activities: updatedActivities };\n          }\n          return pillar;\n        });\n        \n        return {\n          ...prevData,\n          pillars: updatedPillars\n        };\n      });\n    } catch (error) {\n      console.error('Error updating progress:', error);\n      setError('Failed to update progress. Please try again later.');\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center p-5\">Loading progress data...</div>;\n  }\n\n  if (error) {\n    return <div className=\"alert alert-danger\">{error}</div>;\n  }\n\n  if (!progressData) {\n    return <div className=\"text-center p-5\">No progress data available.</div>;\n  }\n\n  return (\n    <div className=\"progress-tracking-container\">\n      <div className=\"dashboard-stats\">\n        <div className=\"stat-card\">\n          <FaChartLine className=\"mb-2\" size={24} />\n          <div className=\"stat-value\">{progressData.overallProgress}%</div>\n          <div className=\"stat-label\">Overall Progress</div>\n        </div>\n        \n        <div className=\"stat-card\">\n          <FaTrophy className=\"mb-2\" size={24} />\n          <div className=\"stat-value\">{progressData.activitiesCompleted}</div>\n          <div className=\"stat-label\">Activities Completed</div>\n        </div>\n        \n        <div className=\"stat-card\">\n          <FaCalendarAlt className=\"mb-2\" size={24} />\n          <div className=\"stat-value\">{progressData.currentStreak}</div>\n          <div className=\"stat-label\">Day Streak</div>\n        </div>\n      </div>\n      \n      <h3 className=\"mb-3\">Progress by Pillar</h3>\n      \n      {progressData.pillars.map((pillar) => (\n        <div key={pillar.id} className=\"mb-4\">\n          <div className=\"progress-label\">\n            <span>{pillar.name}</span>\n            <span>{pillar.progress}%</span>\n          </div>\n          <div className=\"progress-container\">\n            <div \n              className={`progress-bar progress-bar-${pillar.id}`} \n              style={{ width: `${pillar.progress}%` }}\n            ></div>\n          </div>\n          \n          {isPremium ? (\n            <div className=\"activities-list mt-3\">\n              <h5>Activities</h5>\n              {pillar.activities.map((activity) => (\n                <div key={activity.id} className=\"activity-item d-flex align-items-center justify-content-between p-2\">\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      id={`activity-${activity.id}`}\n                      checked={activity.completed}\n                      onChange={(e) => updateProgress(pillar.id, activity.id, e.target.checked)}\n                      className=\"me-2\"\n                    />\n                    <label htmlFor={`activity-${activity.id}`}>{activity.name}</label>\n                  </div>\n                  <span className=\"text-muted\">{activity.date}</span>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"premium-feature-container mt-3\">\n              <div className=\"premium-feature-preview\">\n                <div className=\"activities-list\">\n                  <h5>Activities</h5>\n                  {pillar.activities.slice(0, 1).map((activity) => (\n                    <div key={activity.id} className=\"activity-item d-flex align-items-center justify-content-between p-2\">\n                      <div>\n                        <input\n                          type=\"checkbox\"\n                          id={`activity-${activity.id}`}\n                          checked={activity.completed}\n                          onChange={(e) => updateProgress(pillar.id, activity.id, e.target.checked)}\n                          className=\"me-2\"\n                        />\n                        <label htmlFor={`activity-${activity.id}`}>{activity.name}</label>\n                      </div>\n                      <span className=\"text-muted\">{activity.date}</span>\n                    </div>\n                  ))}\n                  {Array(3).fill(0).map((_, i) => (\n                    <div key={i} className=\"activity-item d-flex align-items-center justify-content-between p-2\">\n                      <div>\n                        <span className=\"me-2\"></span>\n                        <span>Premium Activity {i + 1}</span>\n                      </div>\n                      <span className=\"text-muted\">Locked</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n              <div className=\"premium-feature-overlay\">\n                <div className=\"lock-icon\"></div>\n                <h4>Premium Feature</h4>\n                <p>Unlock detailed activity tracking with a premium subscription</p>\n                <a href=\"/subscription\" className=\"btn btn-secondary mt-2\">Upgrade Now</a>\n              </div>\n            </div>\n          )}\n        </div>\n      ))}\n      \n      {isPremium && (\n        <div className=\"calendar-section mt-5\">\n          <h3 className=\"mb-3\">Activity Calendar</h3>\n          <div className=\"calendar-container\">\n            {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map((day) => (\n              <div key={day} className=\"calendar-header\">{day}</div>\n            ))}\n            \n            {progressData.calendar.map((day) => (\n              <div \n                key={day.date} \n                className={`calendar-day ${day.completed ? 'completed' : ''} ${day.isToday ? 'today' : ''} ${day.isFuture ? 'future' : ''}`}\n                title={day.activities.join(', ')}\n              >\n                <div>{new Date(day.date).getDate()}</div>\n                {day.completed && <div className=\"calendar-badge\"></div>}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n      \n      {!isPremium && (\n        <div className=\"upgrade-prompt standard mt-5\">\n          <h3><FaChild className=\"me-2\" /> Unlock Advanced Progress Tracking</h3>\n          <p>Subscribe to our premium plan to access detailed progress tracking, activity calendars, and achievement certificates for your child.</p>\n          <a href=\"/subscription\" className=\"upgrade-button\">Upgrade Now</a>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProgressTracking;\n","import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport ProgressTracking from './ProgressTracking';\nimport { FaLock, FaCrown } from 'react-icons/fa';\n\nconst PillarDetail = () => {\n  const { pillarId } = useParams();\n  const [pillar, setPillar] = useState(null);\n  const [activities, setActivities] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [selectedChild, setSelectedChild] = useState(null);\n  const { currentUser, hasPremiumAccess } = useAuth();\n  const isPremium = hasPremiumAccess();\n\n  useEffect(() => {\n    const fetchPillarData = async () => {\n      try {\n        setLoading(true);\n        const token = localStorage.getItem('authToken');\n        \n        const response = await fetch(`${process.env.REACT_APP_API_URL}/api/pillars/${pillarId}`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n          throw new Error(data.message || 'Failed to fetch pillar data');\n        }\n\n        setPillar(data.pillar);\n        setActivities(data.activities);\n        \n        // Set the first child as selected by default if user has children\n        if (currentUser.children && currentUser.children.length > 0) {\n          setSelectedChild(currentUser.children[0].id);\n        }\n      } catch (error) {\n        console.error('Error fetching pillar data:', error);\n        setError('Failed to load pillar data. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPillarData();\n  }, [pillarId, currentUser]);\n\n  const handleChildChange = (e) => {\n    setSelectedChild(e.target.value);\n  };\n\n  if (loading) {\n    return <div className=\"text-center p-5\">Loading pillar data...</div>;\n  }\n\n  if (error) {\n    return <div className=\"alert alert-danger\">{error}</div>;\n  }\n\n  if (!pillar) {\n    return <div className=\"text-center p-5\">Pillar not found.</div>;\n  }\n\n  // Determine which activities to show based on subscription status\n  const visibleActivities = isPremium \n    ? activities \n    : activities.slice(0, 1); // Only show first activity for free users\n\n  return (\n    <div className=\"container mt-4\">\n      <div className={`pillar-card pillar-card-${pillar.id} mb-4`}>\n        <div className=\"pillar-card-header\">\n          <h1>{pillar.name}</h1>\n        </div>\n        <div className=\"pillar-card-body\">\n          <p>{pillar.description}</p>\n          \n          {currentUser.children && currentUser.children.length > 0 && (\n            <div className=\"child-selector mb-4\">\n              <label htmlFor=\"childSelect\">Select Child:</label>\n              <select \n                id=\"childSelect\" \n                className=\"form-control\" \n                value={selectedChild} \n                onChange={handleChildChange}\n              >\n                {currentUser.children.map(child => (\n                  <option key={child.id} value={child.id}>\n                    {child.name} ({child.age} years)\n                  </option>\n                ))}\n              </select>\n            </div>\n          )}\n          \n          {selectedChild && (\n            <ProgressTracking childId={selectedChild} />\n          )}\n        </div>\n      </div>\n      \n      <h2 className=\"mb-3\">Activities</h2>\n      \n      <div className=\"grid-2\">\n        {visibleActivities.map((activity) => (\n          <div key={activity.id} className=\"card mb-4\">\n            <div className=\"card-header\">\n              <h3>{activity.title}</h3>\n            </div>\n            <div className=\"card-body\">\n              <p>{activity.description}</p>\n              <h4>Instructions for Parents:</h4>\n              <p>{activity.instructions}</p>\n              \n              <div className=\"mt-4\">\n                <Link to={`/pillars/${pillarId}/activities/${activity.id}`} className=\"btn btn-primary\">\n                  View Details\n                </Link>\n              </div>\n            </div>\n          </div>\n        ))}\n        \n        {!isPremium && activities.length > 1 && (\n          <div className=\"premium-feature-container\">\n            <div className=\"premium-feature-preview\">\n              <div className=\"card mb-4\">\n                <div className=\"card-header\">\n                  <h3>Premium Activity</h3>\n                </div>\n                <div className=\"card-body\">\n                  <p>This premium activity helps your child develop confidence through guided exercises...</p>\n                </div>\n              </div>\n            </div>\n            <div className=\"premium-feature-overlay\">\n              <div className=\"lock-icon\"><FaLock /></div>\n              <h4>Premium Activities</h4>\n              <p>Unlock {activities.length - 1} more activities for this pillar with a premium subscription</p>\n              <Link to=\"/subscription\" className=\"btn btn-secondary mt-2\">\n                <FaCrown className=\"me-2\" /> Upgrade Now\n              </Link>\n            </div>\n          </div>\n        )}\n      </div>\n      \n      {!isPremium && (\n        <div className=\"upgrade-prompt standard mt-4\">\n          <h3><FaCrown className=\"me-2\" /> Unlock All Activities</h3>\n          <p>Subscribe to our premium plan to access all activities, detailed progress tracking, and rewards for your child.</p>\n          <Link to=\"/subscription\" className=\"upgrade-button\">Upgrade Now</Link>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PillarDetail;\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { loadStripe } from '@stripe/stripe-js';\nimport {\n  Elements,\n  CardElement,\n  useStripe,\n  useElements\n} from '@stripe/react-stripe-js';\nimport { FaCrown, FaCheck, FaRegStar, FaStar } from 'react-icons/fa';\n\n// Initialize Stripe with your publishable key\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\n\n// Subscription plan options\nconst plans = [\n  {\n    id: 'monthly',\n    name: 'Monthly',\n    price: 9.99,\n    interval: 'month',\n    description: 'Perfect for trying out all premium features',\n    features: [\n      'Full access to all 5 pillars',\n      'Unlimited activities and challenges',\n      'Progress tracking for multiple children',\n      'Printable certificates',\n      'Rewards marketplace',\n      'Social sharing capabilities'\n    ]\n  },\n  {\n    id: 'yearly',\n    name: 'Yearly',\n    price: 89.99,\n    regularPrice: 119.88, // 12 * 9.99\n    interval: 'year',\n    description: 'Our most popular plan',\n    features: [\n      'Full access to all 5 pillars',\n      'Unlimited activities and challenges',\n      'Progress tracking for multiple children',\n      'Printable certificates',\n      'Rewards marketplace',\n      'Social sharing capabilities',\n      'Priority support',\n      'Early access to new features'\n    ],\n    bestValue: true\n  },\n  {\n    id: 'lifetime',\n    name: 'Lifetime',\n    price: 249.99,\n    interval: 'once',\n    description: 'Pay once, use forever',\n    features: [\n      'Full access to all 5 pillars',\n      'Unlimited activities and challenges',\n      'Progress tracking for multiple children',\n      'Printable certificates',\n      'Rewards marketplace',\n      'Social sharing capabilities',\n      'Priority support',\n      'Early access to new features',\n      'All future updates included'\n    ]\n  }\n];\n\n// CheckoutForm component for handling payment submission\nconst CheckoutForm = ({ selectedPlan, onSuccess, onError }) => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const { currentUser } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      // Stripe.js has not loaded yet\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Get a reference to the card element\n      const cardElement = elements.getElement(CardElement);\n\n      // Create a payment method\n      const { error: stripeError, paymentMethod } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: cardElement,\n      });\n\n      if (stripeError) {\n        throw new Error(stripeError.message);\n      }\n\n      // Send the payment method ID to your server\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/subscriptions/create`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('authToken')}`,\n        },\n        body: JSON.stringify({\n          paymentMethodId: paymentMethod.id,\n          planId: selectedPlan.id,\n          customerId: currentUser.id,\n          email: currentUser.email,\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to process subscription');\n      }\n\n      // Handle subscription status\n      if (data.status === 'success') {\n        onSuccess(data);\n      } else if (data.status === 'requires_action') {\n        // Handle 3D Secure authentication if required\n        const { error: confirmError, paymentIntent } = await stripe.confirmCardPayment(\n          data.clientSecret\n        );\n\n        if (confirmError) {\n          throw new Error(confirmError.message);\n        } else if (paymentIntent.status === 'succeeded') {\n          onSuccess(data);\n        } else {\n          throw new Error('Payment failed');\n        }\n      } else {\n        throw new Error(data.message || 'Subscription failed');\n      }\n    } catch (error) {\n      console.error('Subscription error:', error);\n      setError(error.message);\n      onError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const cardElementOptions = {\n    style: {\n      base: {\n        fontSize: '16px',\n        color: '#424770',\n        '::placeholder': {\n          color: '#aab7c4',\n        },\n      },\n      invalid: {\n        color: '#9e2146',\n      },\n    },\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"card-element-container\">\n        <CardElement options={cardElementOptions} />\n      </div>\n      \n      {error && (\n        <div className=\"alert alert-danger mb-3\">\n          {error}\n        </div>\n      )}\n      \n      <button \n        type=\"submit\" \n        className=\"subscribe-button\"\n        disabled={!stripe || loading}\n      >\n        {loading ? 'Processing...' : `Subscribe for $${selectedPlan.price}/${selectedPlan.interval === 'once' ? '' : selectedPlan.interval}`}\n      </button>\n    </form>\n  );\n};\n\n// Main Subscription component\nconst Subscription = () => {\n  const [selectedPlan, setSelectedPlan] = useState(plans[1]); // Default to yearly plan\n  const [subscriptionComplete, setSubscriptionComplete] = useState(false);\n  const [subscriptionError, setSubscriptionError] = useState(null);\n  const { currentUser, userSubscription, fetchSubscriptionStatus } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // If user already has an active subscription, redirect to dashboard\n    if (userSubscription && userSubscription.status === 'active') {\n      navigate('/dashboard');\n    }\n  }, [userSubscription, navigate]);\n\n  const handlePlanSelect = (plan) => {\n    setSelectedPlan(plan);\n  };\n\n  const handleSubscriptionSuccess = async (data) => {\n    setSubscriptionComplete(true);\n    // Refresh subscription status\n    await fetchSubscriptionStatus();\n    \n    // Redirect to dashboard after a short delay\n    setTimeout(() => {\n      navigate('/dashboard');\n    }, 3000);\n  };\n\n  const handleSubscriptionError = (errorMessage) => {\n    setSubscriptionError(errorMessage);\n  };\n\n  if (subscriptionComplete) {\n    return (\n      <div className=\"subscription-page\">\n        <div className=\"success-message\">\n          <h2><FaCheck className=\"me-2\" /> Subscription Successful!</h2>\n          <p>Thank you for subscribing to Confident Kids Premium. You now have access to all premium features.</p>\n          <p>You will be redirected to your dashboard shortly...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"subscription-page\">\n      <div className=\"feature-highlight\">\n        <h1><FaCrown className=\"me-2\" /> Upgrade to Confident Kids Premium</h1>\n        <p>Unlock the full potential of your child's confidence journey with our premium features.</p>\n      </div>\n      \n      <div className=\"plan-selection\">\n        <h2>Choose Your Plan</h2>\n        <div className=\"plan-options\">\n          {plans.map((plan) => (\n            <div \n              key={plan.id}\n              className={`plan-card ${selectedPlan.id === plan.id ? 'selected' : ''}`}\n              onClick={() => handlePlanSelect(plan)}\n            >\n              {plan.bestValue && <div className=\"best-value\">Best Value</div>}\n              <h3>{plan.name}</h3>\n              <div className=\"price\">\n                ${plan.price} <span>/{plan.interval === 'once' ? '' : plan.interval}</span>\n              </div>\n              {plan.regularPrice && (\n                <div className=\"savings\">\n                  Save ${(plan.regularPrice - plan.price).toFixed(2)} per year\n                </div>\n              )}\n              <p>{plan.description}</p>\n              <ul className=\"features\">\n                {plan.features.map((feature, index) => (\n                  <li key={index}>{feature}</li>\n                ))}\n              </ul>\n              <button \n                className={`btn ${selectedPlan.id === plan.id ? 'btn-primary' : 'btn-outline'} w-100`}\n              >\n                {selectedPlan.id === plan.id ? 'Selected' : 'Select'}\n              </button>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"payment-section\">\n        <h2>Payment Information</h2>\n        <Elements stripe={stripePromise}>\n          <CheckoutForm \n            selectedPlan={selectedPlan} \n            onSuccess={handleSubscriptionSuccess}\n            onError={handleSubscriptionError}\n          />\n        </Elements>\n        \n        {subscriptionError && (\n          <div className=\"alert alert-danger mt-3\">\n            {subscriptionError}\n          </div>\n        )}\n        \n        <div className=\"guarantee\">\n          <p><FaRegStar /> 30-day money-back guarantee <FaRegStar /></p>\n          <p>If you're not satisfied with our premium features, we'll refund your payment within the first 30 days.</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Subscription;\n","import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaStar, FaShare, FaPrint, FaTrophy } from 'react-icons/fa';\n\nconst Rewards = () => {\n  const [activeTab, setActiveTab] = useState('achievements');\n  const [achievements, setAchievements] = useState([]);\n  const [certificates, setCertificates] = useState([]);\n  const [marketplace, setMarketplace] = useState([]);\n  const [points, setPoints] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const { currentUser, hasPremiumAccess } = useAuth();\n  \n  useEffect(() => {\n    const fetchRewardsData = async () => {\n      try {\n        setLoading(true);\n        const token = localStorage.getItem('authToken');\n        \n        const response = await fetch(`${process.env.REACT_APP_API_URL}/api/rewards`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n          throw new Error(data.message || 'Failed to fetch rewards data');\n        }\n\n        setAchievements(data.achievements);\n        setCertificates(data.certificates);\n        setMarketplace(data.marketplace);\n        setPoints(data.points);\n      } catch (error) {\n        console.error('Error fetching rewards data:', error);\n        setError('Failed to load rewards data. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (hasPremiumAccess()) {\n      fetchRewardsData();\n    } else {\n      setLoading(false);\n    }\n  }, [hasPremiumAccess]);\n\n  const handleShareCertificate = (certificateId) => {\n    // Implementation for sharing certificate to social media\n    console.log(`Sharing certificate ${certificateId}`);\n    // This would typically open a social sharing modal or redirect to a sharing page\n  };\n\n  const handlePrintCertificate = (certificateId) => {\n    // Implementation for printing certificate\n    console.log(`Printing certificate ${certificateId}`);\n    window.print();\n  };\n\n  const handleRedeemReward = async (rewardId) => {\n    try {\n      const token = localStorage.getItem('authToken');\n      \n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/rewards/redeem`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          rewardId\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to redeem reward');\n      }\n\n      // Update points after redemption\n      setPoints(data.updatedPoints);\n      \n      // Update marketplace items to reflect availability changes\n      setMarketplace(prevMarketplace => \n        prevMarketplace.map(item => \n          item.id === rewardId \n            ? { ...item, redeemed: true } \n            : item\n        )\n      );\n      \n      alert('Reward redeemed successfully!');\n    } catch (error) {\n      console.error('Error redeeming reward:', error);\n      alert(`Failed to redeem reward: ${error.message}`);\n    }\n  };\n\n  if (!hasPremiumAccess()) {\n    return (\n      <div className=\"container mt-5\">\n        <div className=\"upgrade-prompt standard\">\n          <h2><FaTrophy className=\"me-2\" /> Unlock the Rewards System</h2>\n          <p>The Rewards System is a premium feature that allows your child to earn achievements, collect certificates, and redeem points for special rewards.</p>\n          <p>Subscribe to our premium plan to motivate your child with tangible rewards for their confidence journey.</p>\n          <a href=\"/subscription\" className=\"upgrade-button\">Upgrade Now</a>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return <div className=\"text-center p-5\">Loading rewards data...</div>;\n  }\n\n  if (error) {\n    return <div className=\"alert alert-danger\">{error}</div>;\n  }\n\n  return (\n    <div className=\"rewards-container\">\n      <h1 className=\"mb-4\">Rewards & Achievements</h1>\n      \n      <div className=\"points-display\">\n        <span className=\"points-icon\"><FaStar /></span>\n        <span className=\"points-value\">{points} Points</span>\n      </div>\n      \n      <div className=\"rewards-tabs\">\n        <button \n          className={activeTab === 'achievements' ? 'active' : ''}\n          onClick={() => setActiveTab('achievements')}\n        >\n          Achievements\n        </button>\n        <button \n          className={activeTab === 'certificates' ? 'active' : ''}\n          onClick={() => setActiveTab('certificates')}\n        >\n          Certificates\n        </button>\n        <button \n          className={activeTab === 'marketplace' ? 'active' : ''}\n          onClick={() => setActiveTab('marketplace')}\n        >\n          Rewards Marketplace\n        </button>\n      </div>\n      \n      <div className=\"rewards-content\">\n        {activeTab === 'achievements' && (\n          <div>\n            <h3 className=\"mb-3\">Your Child's Achievements</h3>\n            <div className=\"achievement-grid\">\n              {achievements.map((achievement) => (\n                <div \n                  key={achievement.id} \n                  className={`achievement-item ${!achievement.unlocked ? 'achievement-locked' : ''}`}\n                >\n                  <div className=\"achievement-icon\">\n                    {achievement.icon}\n                  </div>\n                  <h4>{achievement.name}</h4>\n                  <p>{achievement.description}</p>\n                  {achievement.unlocked ? (\n                    <div className=\"text-success\">Unlocked!</div>\n                  ) : (\n                    <div className=\"text-muted\">{achievement.progress}% Complete</div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n        \n        {activeTab === 'certificates' && (\n          <div>\n            <h3 className=\"mb-3\">Printable Certificates</h3>\n            {certificates.length === 0 ? (\n              <p>No certificates earned yet. Complete activities to earn certificates!</p>\n            ) : (\n              certificates.map((certificate) => (\n                <div key={certificate.id} className=\"mb-4\">\n                  <h4>{certificate.title}</h4>\n                  <div className=\"certificate-preview\">\n                    <div className=\"certificate-content\">\n                      <h2>{certificate.title}</h2>\n                      <h3>Awarded to: {currentUser.children?.find(child => child.id === certificate.childId)?.name || 'Your Child'}</h3>\n                      <p>{certificate.description}</p>\n                      <p>Date: {new Date(certificate.date).toLocaleDateString()}</p>\n                    </div>\n                  </div>\n                  <div className=\"certificate-actions\">\n                    <button \n                      className=\"btn btn-outline\" \n                      onClick={() => handleShareCertificate(certificate.id)}\n                    >\n                      <FaShare className=\"me-2\" /> Share\n                    </button>\n                    <button \n                      className=\"btn btn-primary print-button\" \n                      onClick={() => handlePrintCertificate(certificate.id)}\n                    >\n                      <FaPrint className=\"me-2\" /> Print\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        )}\n        \n        {activeTab === 'marketplace' && (\n          <div>\n            <h3 className=\"mb-3\">Rewards Marketplace</h3>\n            <p>Use your points to redeem these special rewards for your child:</p>\n            \n            <div className=\"marketplace-grid\">\n              {marketplace.map((reward) => (\n                <div key={reward.id} className=\"reward-item\">\n                  <img src={reward.image} alt={reward.name} className=\"reward-image\" />\n                  <div className=\"reward-content\">\n                    <div className=\"reward-points\">{reward.points} Points</div>\n                    <h4>{reward.name}</h4>\n                    <p>{reward.description}</p>\n                    <button \n                      className=\"btn btn-primary w-100 mt-2\" \n                      disabled={points < reward.points || reward.redeemed}\n                      onClick={() => handleRedeemReward(reward.id)}\n                    >\n                      {reward.redeemed ? 'Redeemed' : 'Redeem Reward'}\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Rewards;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { FaChild, FaChartLine, FaTrophy, FaCalendarAlt, FaCrown } from 'react-icons/fa';\n\nconst Home = () => {\n  return (\n    <div className=\"container\">\n      {/* Hero Section */}\n      <section className=\"dashboard-welcome mt-4\">\n        <h1>Build Your Child's Confidence</h1>\n        <p>A research-based approach to help parents nurture confident, resilient children.</p>\n        <div className=\"mt-4\">\n          <Link to=\"/register\" className=\"btn btn-primary me-3\">Get Started</Link>\n          <Link to=\"/login\" className=\"btn btn-outline\">Log In</Link>\n        </div>\n      </section>\n\n      {/* Features Section */}\n      <section className=\"mt-5\">\n        <h2 className=\"text-center mb-4\">The 5 Pillars of Confidence</h2>\n        <div className=\"grid-3\">\n          <div className=\"pillar-card pillar-card-1\">\n            <div className=\"pillar-card-header\">\n              <h3>Independence & Problem Solving</h3>\n            </div>\n            <div className=\"pillar-card-body\">\n              <p>Help your child develop the skills to tackle challenges on their own and find solutions to problems.</p>\n            </div>\n          </div>\n          \n          <div className=\"pillar-card pillar-card-2\">\n            <div className=\"pillar-card-header\">\n              <h3>Growth Mindset & Resilience</h3>\n            </div>\n            <div className=\"pillar-card-body\">\n              <p>Teach your child to embrace challenges, persist through setbacks, and see effort as a path to mastery.</p>\n            </div>\n          </div>\n          \n          <div className=\"pillar-card pillar-card-3\">\n            <div className=\"pillar-card-header\">\n              <h3>Social Confidence & Communication</h3>\n            </div>\n            <div className=\"pillar-card-body\">\n              <p>Build your child's ability to express themselves, connect with others, and navigate social situations.</p>\n            </div>\n          </div>\n          \n          <div className=\"pillar-card pillar-card-4\">\n            <div className=\"pillar-card-header\">\n              <h3>Purpose & Strength Discovery</h3>\n            </div>\n            <div className=\"pillar-card-body\">\n              <p>Help your child identify their unique strengths and develop a sense of purpose and direction.</p>\n            </div>\n          </div>\n          \n          <div className=\"pillar-card pillar-card-5\">\n            <div className=\"pillar-card-header\">\n              <h3>Managing Fear & Anxiety</h3>\n            </div>\n            <div className=\"pillar-card-body\">\n              <p>Equip your child with tools to understand and manage their emotions, particularly fear and anxiety.</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* How It Works Section */}\n      <section className=\"mt-5\">\n        <h2 className=\"text-center mb-4\">How It Works</h2>\n        <div className=\"grid-3\">\n          <div className=\"card\">\n            <div className=\"card-body text-center\">\n              <FaChild className=\"mb-3\" size={48} color=\"#6a1b9a\" />\n              <h3>Create Child Profiles</h3>\n              <p>Add profiles for each of your children to receive age-appropriate activities and track their progress.</p>\n            </div>\n          </div>\n          \n          <div className=\"card\">\n            <div className=\"card-body text-center\">\n              <FaChartLine className=\"mb-3\" size={48} color=\"#6a1b9a\" />\n              <h3>Track Progress</h3>\n              <p>Monitor your child's confidence journey with detailed progress tracking across all five pillars.</p>\n            </div>\n          </div>\n          \n          <div className=\"card\">\n            <div className=\"card-body text-center\">\n              <FaTrophy className=\"mb-3\" size={48} color=\"#6a1b9a\" />\n              <h3>Earn Rewards</h3>\n              <p>Celebrate achievements with printable certificates and redeemable rewards to keep your child motivated.</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Pricing Section */}\n      <section className=\"mt-5\">\n        <h2 className=\"text-center mb-4\">Choose Your Plan</h2>\n        <div className=\"plan-options\">\n          <div className=\"plan-card\">\n            <h3>Free</h3>\n            <div className=\"price\">$0 <span>/month</span></div>\n            <p>Basic features to get started</p>\n            <ul className=\"features\">\n              <li>One recommended activity per pillar</li>\n              <li>Basic child profile management</li>\n              <li>Limited progress tracking</li>\n            </ul>\n            <Link to=\"/register\" className=\"btn btn-outline w-100\">Sign Up Free</Link>\n          </div>\n          \n          <div className=\"plan-card\">\n            <div className=\"best-value\">Best Value</div>\n            <h3>Premium</h3>\n            <div className=\"price\">$9.99 <span>/month</span></div>\n            <p>Full access to all features</p>\n            <ul className=\"features\">\n              <li>Full access to all 5 pillars</li>\n              <li>Unlimited activities and challenges</li>\n              <li>Progress tracking for multiple children</li>\n              <li>Printable certificates</li>\n              <li>Rewards marketplace</li>\n              <li>Social sharing capabilities</li>\n            </ul>\n            <Link to=\"/register\" className=\"btn btn-primary w-100\">Get Started</Link>\n          </div>\n          \n          <div className=\"plan-card\">\n            <h3>Annual</h3>\n            <div className=\"price\">$89.99 <span>/year</span></div>\n            <div className=\"savings\">Save $29.89 per year</div>\n            <p>All premium features at a discount</p>\n            <ul className=\"features\">\n              <li>All Premium features</li>\n              <li>Priority support</li>\n              <li>Early access to new features</li>\n            </ul>\n            <Link to=\"/register\" className=\"btn btn-outline w-100\">Get Started</Link>\n          </div>\n        </div>\n      </section>\n\n      {/* Testimonials Section */}\n      <section className=\"mt-5 mb-5\">\n        <h2 className=\"text-center mb-4\">What Parents Say</h2>\n        <div className=\"grid-2\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <p className=\"mb-3\">\"Since using Confident Kids, my daughter has become much more willing to try new things and speak up in class. The activities are easy to implement and really work!\"</p>\n              <div className=\"text-right\">\n                <strong>- Sarah M., mother of 8-year-old</strong>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"card\">\n            <div className=\"card-body\">\n              <p className=\"mb-3\">\"The structured approach to building confidence has been a game-changer for my son. He's now able to manage his anxiety much better and has made new friends at school.\"</p>\n              <div className=\"text-right\">\n                <strong>- Michael T., father of 10-year-old</strong>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Call to Action */}\n      <section className=\"upgrade-prompt standard mt-5 mb-5\">\n        <h3><FaCrown className=\"me-2\" /> Start Your Child's Confidence Journey Today</h3>\n        <p>Join thousands of parents who are helping their children build lasting confidence and resilience.</p>\n        <Link to=\"/register\" className=\"upgrade-button\">Get Started Now</Link>\n      </section>\n    </div>\n  );\n};\n\nexport default Home;\n","import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { FaUser, FaChild, FaPlus, FaEdit, FaTrash, FaCreditCard } from 'react-icons/fa';\n\nconst Profile = () => {\n  const [activeTab, setActiveTab] = useState('profile');\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [children, setChildren] = useState([]);\n  const [newChild, setNewChild] = useState({ name: '', age: '', ageGroup: 'elementary' });\n  const [subscriptionDetails, setSubscriptionDetails] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  \n  const { currentUser, updateProfile, userSubscription, fetchSubscriptionStatus } = useAuth();\n  \n  useEffect(() => {\n    if (currentUser) {\n      setName(currentUser.name || '');\n      setEmail(currentUser.email || '');\n      setChildren(currentUser.children || []);\n    }\n    \n    if (userSubscription) {\n      setSubscriptionDetails(userSubscription);\n    }\n  }, [currentUser, userSubscription]);\n  \n  const handleProfileUpdate = async (e) => {\n    e.preventDefault();\n    \n    if (password && password !== confirmPassword) {\n      return setError('Passwords do not match');\n    }\n    \n    try {\n      setError('');\n      setSuccess('');\n      setLoading(true);\n      \n      const userData = {\n        name,\n        email,\n        ...(password ? { password } : {})\n      };\n      \n      await updateProfile(userData);\n      setSuccess('Profile updated successfully');\n      setPassword('');\n      setConfirmPassword('');\n    } catch (error) {\n      setError(error.message || 'Failed to update profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleAddChild = async (e) => {\n    e.preventDefault();\n    \n    if (!newChild.name || !newChild.age || !newChild.ageGroup) {\n      return setError('Please provide name, age, and age group');\n    }\n    \n    try {\n      setError('');\n      setSuccess('');\n      setLoading(true);\n      \n      const token = localStorage.getItem('authToken');\n      \n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/children`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify(newChild),\n      });\n      \n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to add child');\n      }\n      \n      // Update children list\n      setChildren([...children, data.child]);\n      setNewChild({ name: '', age: '', ageGroup: 'elementary' });\n      setSuccess('Child added successfully');\n    } catch (error) {\n      setError(error.message || 'Failed to add child');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleEditChild = async (childId, updatedData) => {\n    try {\n      setError('');\n      setSuccess('');\n      setLoading(true);\n      \n      const token = localStorage.getItem('authToken');\n      \n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/children/${childId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify(updatedData),\n      });\n      \n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to update child');\n      }\n      \n      // Update children list\n      setChildren(children.map(child => \n        child.id === childId ? { ...child, ...updatedData } : child\n      ));\n      setSuccess('Child updated successfully');\n    } catch (error) {\n      setError(error.message || 'Failed to update child');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleDeleteChild = async (childId) => {\n    if (!window.confirm('Are you sure you want to delete this child profile? This action cannot be undone.')) {\n      return;\n    }\n    \n    try {\n      setError('');\n      setSuccess('');\n      setLoading(true);\n      \n      const token = localStorage.getItem('authToken');\n      \n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/children/${childId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n      \n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to delete child');\n      }\n      \n      // Update children list\n      setChildren(children.filter(child => child.id !== childId));\n      setSuccess('Child deleted successfully');\n    } catch (error) {\n      setError(error.message || 'Failed to delete child');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleCancelSubscription = async () => {\n    if (!window.confirm('Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period.')) {\n      return;\n    }\n    \n    try {\n      setError('');\n      setSuccess('');\n      setLoading(true);\n      \n      const token = localStorage.getItem('authToken');\n      \n      const response = await fetch(`${process.env.REACT_APP_API_URL}/api/subscriptions/cancel`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n      \n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to cancel subscription');\n      }\n      \n      // Refresh subscription status\n      await fetchSubscriptionStatus();\n      setSuccess('Subscription cancelled successfully');\n    } catch (error) {\n      setError(error.message || 'Failed to cancel subscription');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  return (\n    <div className=\"container mt-4\">\n      <h1 className=\"mb-4\">Your Profile</h1>\n      \n      <div className=\"profile-tabs\">\n        <button \n          className={activeTab === 'profile' ? 'active' : ''}\n          onClick={() => setActiveTab('profile')}\n        >\n          <FaUser className=\"me-2\" /> Profile\n        </button>\n        <button \n          className={activeTab === 'children' ? 'active' : ''}\n          onClick={() => setActiveTab('children')}\n        >\n          <FaChild className=\"me-2\" /> Children\n        </button>\n        <button \n          className={activeTab === 'subscription' ? 'active' : ''}\n          onClick={() => setActiveTab('subscription')}\n        >\n          <FaCreditCard className=\"me-2\" /> Subscription\n        </button>\n      </div>\n      \n      {error && (\n        <div className=\"alert alert-danger\" role=\"alert\">\n          {error}\n        </div>\n      )}\n      \n      {success && (\n        <div className=\"alert alert-success\" role=\"alert\">\n          {success}\n        </div>\n      )}\n      \n      {activeTab === 'profile' && (\n        <div className=\"profile-form\">\n          <h2 className=\"mb-4\">Account Information</h2>\n          <form onSubmit={handleProfileUpdate}>\n            <div className=\"form-group mb-3\">\n              <label htmlFor=\"name\">Full Name</label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                className=\"form-control\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                required\n              />\n            </div>\n            \n            <div className=\"form-group mb-3\">\n              <label htmlFor=\"email\">Email</label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                className=\"form-control\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n              />\n            </div>\n            \n            <h3 className=\"mt-4 mb-3\">Change Password</h3>\n            <p className=\"text-muted mb-3\">Leave blank to keep your current password</p>\n            \n            <div className=\"form-group mb-3\">\n              <label htmlFor=\"password\">New Password</label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                className=\"form-control\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n            \n            <div className=\"form-group mb-4\">\n              <label htmlFor=\"confirmPassword\">Confirm New Password</label>\n              <input\n                type=\"password\"\n                id=\"confirmPassword\"\n                className=\"form-control\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n              />\n            </div>\n            \n            <button\n              type=\"submit\"\n              className=\"btn btn-primary\"\n              disabled={loading}\n            >\n              {loading ? 'Updating...' : 'Update Profile'}\n            </button>\n          </form>\n        </div>\n      )}\n      \n      {activeTab === 'children' && (\n        <div>\n          <div className=\"children-list\">\n            <h2 className=\"mb-4\">Your Children</h2>\n            \n            {children.length === 0 ? (\n              <p>You haven't added any children yet. Add a child to get started.</p>\n            ) : (\n              children.map((child) => (\n                <div key={child.id} className=\"child-item\">\n                  <div className=\"child-info\">\n                    <div className=\"child-name\">{child.name}</div>\n                    <div className=\"child-age\">{child.age} years old</div>\n                  </div>\n                  <div className=\"child-actions\">\n                    <button \n                      className=\"btn btn-sm btn-outline\"\n                      onClick={() => {\n                        const updatedName = prompt('Enter new name:', child.name);\n                        const updatedAge = prompt('Enter new age:', child.age);\n                        if (updatedName && updatedAge) {\n                          handleEditChild(child.id, { name: updatedName, age: updatedAge });\n                        }\n                      }}\n                    >\n                      <FaEdit /> Edit\n                    </button>\n                    <button \n                      className=\"btn btn-sm btn-danger\"\n                      onClick={() => handleDeleteChild(child.id)}\n                    >\n                      <FaTrash /> Delete\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n          \n          <div className=\"profile-form mt-4\">\n            <h3 className=\"mb-3\">Add a Child</h3>\n            <form onSubmit={handleAddChild}>\n              <div className=\"form-group mb-3\">\n                <label htmlFor=\"childName\">Child's Name</label>\n                <input\n                  type=\"text\"\n                  id=\"childName\"\n                  className=\"form-control\"\n                  value={newChild.name}\n                  onChange={(e) => setNewChild({ ...newChild, name: e.target.value })}\n                  required\n                />\n              </div>\n              \n              <div className=\"form-group mb-3\">\n                <label htmlFor=\"childAge\">Child's Age</label>\n                <input\n                  type=\"number\"\n                  id=\"childAge\"\n                  className=\"form-control\"\n                  min=\"1\"\n                  max=\"18\"\n                  value={newChild.age}\n                  onChange={(e) => setNewChild({ ...newChild, age: e.target.value })}\n                  required\n                />\n              </div>\n              \n              <div className=\"form-group mb-3\">\n                <label htmlFor=\"childAgeGroup\">Age Group</label>\n                <select\n                  id=\"childAgeGroup\"\n                  className=\"form-control\"\n                  value={newChild.ageGroup}\n                  onChange={(e) => setNewChild({ ...newChild, ageGroup: e.target.value })}\n                  required\n                >\n                  <option value=\"toddler\">Toddler (2-4)</option>\n                  <option value=\"elementary\">Elementary (5-10)</option>\n                  <option value=\"teen\">Teen (11-18)</option>\n                </select>\n              </div>\n              \n              <button\n                type=\"submit\"\n                className=\"btn btn-primary\"\n                disabled={loading}\n              >\n                <FaPlus className=\"me-2\" /> Add Child\n              </button>\n            </form>\n          </div>\n        </div>\n      )}\n      \n      {activeTab === 'subscription' && (\n        <div className=\"profile-form\">\n          <h2 className=\"mb-4\">Subscription Details</h2>\n          \n          {subscriptionDetails && subscriptionDetails.status === 'active' ? (\n            <div>\n              <div className=\"card mb-4\">\n                <div className=\"card-body\">\n                  <h3 className=\"text-primary mb-3\">Premium Subscription</h3>\n                  <p><strong>Status:</strong> Active</p>\n                  <p><strong>Plan:</strong> {subscriptionDetails.plan === 'yearly' ? 'Annual' : subscriptionDetails.plan === 'monthly' ? 'Monthly' : 'Lifetime'}</p>\n                  {subscriptionDetails.current_period_end && (\n                    <p><strong>Next billing date:</strong> {new Date(subscriptionDetails.current_period_end * 1000).toLocaleDateString()}</p>\n                  )}\n                </div>\n              </div>\n              \n              <button\n                className=\"btn btn-danger\"\n                onClick={handleCancelSubscription}\n                disabled={loading}\n              >\n                {loading ? 'Processing...' : 'Cancel Subscription'}\n              </button>\n              <p className=\"text-muted mt-2\">\n                Your subscription will remain active until the end of your current billing period.\n              </p>\n            </div>\n          ) : (\n            <div>\n              <div className=\"alert alert-info\">\n                <p>You don't have an active subscription.</p>\n                <p>Upgrade to Premium to unlock all features and activities.</p>\n              </div>\n              \n              <a href=\"/subscription\" className=\"btn btn-primary\">\n                View Subscription Options\n              </a>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Profile;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider, useAuth } from './contexts/AuthContext'; // Add useAuth import\nimport './styles/main.css';\n\n// Components\nimport Navigation from './components/Navigation';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport Dashboard from './components/Dashboard';\nimport PillarDetail from './components/PillarDetail';\nimport Subscription from './components/Subscription';\nimport Rewards from './components/Rewards';\nimport Home from './components/Home';\nimport Profile from './components/Profile';\n\n// Protected route component\nconst ProtectedRoute = ({ children }) => {\n  const { currentUser, loading } = useAuth();\n  \n  if (loading) {\n    return <div>Loading...</div>;\n  }\n  \n  if (!currentUser) {\n    return <Navigate to=\"/login\" />;\n  }\n  \n  return children;\n};\n\n// Premium route component\nconst PremiumRoute = ({ children }) => {\n  const { hasPremiumAccess, loading } = useAuth();\n  \n  if (loading) {\n    return <div>Loading...</div>;\n  }\n  \n  if (!hasPremiumAccess()) {\n    return <Navigate to=\"/subscription\" />;\n  }\n  \n  return children;\n};\n\nconst App = () => {\n  return (\n    <AuthProvider>\n      <BrowserRouter>\n        <Navigation />\n        <main className=\"main-content\">\n          <Routes>\n            <Route path=\"/login\" element={<Login />} />\n            <Route path=\"/register\" element={<Register />} />\n            <Route path=\"/dashboard\" element={\n              <ProtectedRoute>\n                <Dashboard />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/pillars/:pillarId\" element={\n              <ProtectedRoute>\n                <PillarDetail />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/subscription\" element={\n              <ProtectedRoute>\n                <Subscription />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/rewards\" element={\n              <ProtectedRoute>\n                <PremiumRoute>\n                  <Rewards />\n                </PremiumRoute>\n              </ProtectedRoute>\n            } />\n            <Route path=\"/profile\" element={\n              <ProtectedRoute>\n                <Profile />\n              </ProtectedRoute>\n            } />\n            <Route path=\"/\" element={<Home />} />\n          </Routes>\n        </main>\n      </BrowserRouter>\n    </AuthProvider>\n  );\n};\n\nexport default App;\n\n// Move the ReactDOM.render to a separate index.js file\n// This should not be in App.js\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './styles/main.css';\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}