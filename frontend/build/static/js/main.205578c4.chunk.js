(this["webpackJsonpconfident-kids-app-frontend"]=this["webpackJsonpconfident-kids-app-frontend"]||[]).push([[0],{10:function(e,s,t){},20:function(e,s,t){"use strict";t.r(s);var a=t(1),c=t.n(a),r=t(7),i=t.n(r),l=t(3),n=t(5),d=t(0);const o=Object(a.createContext)(),j="https://confident-kids-api.kevin-mcgovern.workers.dev",h=()=>Object(a.useContext)(o);function b(e){let{children:s}=e;const[t,c]=Object(a.useState)(null),[r,i]=Object(a.useState)(null),[l,n]=Object(a.useState)(!0),[h,b]=Object(a.useState)(""),[m,u]=Object(a.useState)(!1);async function p(){try{const e=localStorage.getItem("authToken");if(!e)return c(null),u(!1),n(!1),null;console.log("Fetching user profile with token:",e.substring(0,10)+"...");const s=await fetch(`${j}/api/users/profile`,{method:"GET",headers:{Authorization:`Bearer ${e}`}}),t=await s.json();if(console.log("User profile response:",t),!s.ok){if(401===s.status)return localStorage.removeItem("authToken"),c(null),u(!1),n(!1),null;throw new Error(t.message||"Failed to fetch user profile")}return c(t.user||t),u(!0),t.user||t}catch(h){return console.error("Error fetching current user:",h),c(null),u(!1),null}finally{n(!1)}}async function O(){try{const e=localStorage.getItem("authToken");if(!e||!t)return i(null),null;console.log("Fetching subscription status");const s=await fetch(`${j}/api/subscriptions/status`,{method:"GET",headers:{Authorization:`Bearer ${e}`}}),a=await s.json();if(console.log("Subscription status response:",a),!s.ok)throw new Error(a.message||"Failed to fetch subscription status");return i(a.subscription),a.subscription}catch(h){return console.error("Error fetching subscription status:",h),i(null),null}}Object(a.useEffect)((()=>{!async function(){console.log("Loading user data on mount"),await p()&&(console.log("User found, fetching subscription status"),await O())}()}),[]);const x={currentUser:t,user:t,userSubscription:r,isAuthenticated:m,loading:l,error:h,register:async function(e,s,t){try{b(""),console.log("Registering with:",{email:e,name:t}),console.log("Using API URL:",j);const a=await fetch(`${j}/api/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s,name:t})}),r=await a.json();if(console.log("Register response:",r),!a.ok)throw new Error(r.message||"Failed to register");return localStorage.setItem("authToken",r.token),c(r.user),u(!0),r}catch(h){throw console.error("Registration error:",h),b(h.message),h}},login:async function(e,s){try{b(""),console.log("Logging in with:",{email:e}),console.log("Using API URL:",j);const t=await fetch(`${j}/api/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})}),a=await t.json();if(console.log("Login response:",a),!t.ok)throw new Error(a.message||"Failed to login");return localStorage.setItem("authToken",a.token),c(a.user),u(!0),console.log("Auth state after login:",{user:a.user,isAuthenticated:!0}),await O(),a}catch(h){throw console.error("Login error:",h),b(h.message),h}},logout:async function(){try{return b(""),localStorage.removeItem("authToken"),c(null),i(null),u(!1),!0}catch(h){throw b(h.message),h}},updateProfile:async function(e){try{b("");const s=localStorage.getItem("authToken");if(!s)throw new Error("Not authenticated");const t=await fetch(`${j}/api/users/update`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw new Error(a.message||"Failed to update profile");return c((e=>({...e,...a.user}))),a}catch(h){throw b(h.message),h}},fetchCurrentUser:p,fetchSubscriptionStatus:O,hasPremiumAccess:function(){return r&&"active"===r.status}};return console.log("AuthContext state:",{isAuthenticated:m,hasUser:!!t,hasSubscription:!!r,loading:l}),Object(d.jsx)(o.Provider,{value:x,children:!l&&s})}t(10);var m=t(4),u=t.p+"static/media/logo.0f63a7c9.png";var p=()=>{const[e,s]=Object(a.useState)(!1),{currentUser:t,logout:c,userSubscription:r}=h(),i=Object(l.o)();Object(a.useEffect)((()=>{s(!1)}),[i]);return Object(d.jsx)("nav",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar-container",children:[Object(d.jsxs)(n.b,{to:"/",className:"navbar-logo",children:[Object(d.jsx)("img",{src:u,alt:"Confident Kids Logo"}),Object(d.jsx)("span",{children:"Confident Kids"})]}),Object(d.jsx)("button",{className:"navbar-toggle",onClick:()=>{s(!e)},"aria-label":"Toggle navigation",children:e?Object(d.jsx)(m.q,{}):Object(d.jsx)(m.a,{})}),Object(d.jsxs)("ul",{className:"navbar-menu "+(e?"active":""),children:[Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsx)(n.b,{to:"/",className:"navbar-link "+("/"===i.pathname?"active":""),children:"Home"})}),t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsx)(n.b,{to:"/dashboard",className:"navbar-link "+("/dashboard"===i.pathname?"active":""),children:"Dashboard"})}),Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsx)(n.b,{to:"/pillars",className:"navbar-link "+(i.pathname.includes("/pillars")?"active":""),children:"Pillars"})}),Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsx)(n.b,{to:"/challenges",className:"navbar-link "+("/challenges"===i.pathname?"active":""),children:"Challenges"})}),r&&"active"===r.status&&Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsxs)(n.b,{to:"/rewards",className:"navbar-link "+("/rewards"===i.pathname?"active":""),children:["Rewards",Object(d.jsx)("span",{className:"premium-badge",children:"PRO"})]})}),Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsxs)(n.b,{to:"/profile",className:"navbar-link "+("/profile"===i.pathname?"active":""),children:[Object(d.jsx)(m.t,{})," Profile"]})}),Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsxs)("button",{onClick:async()=>{try{await c()}catch(e){console.error("Failed to log out",e)}},className:"navbar-link",children:[Object(d.jsx)(m.o,{})," Logout"]})})]}),!t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsx)(n.b,{to:"/about",className:"navbar-link "+("/about"===i.pathname?"active":""),children:"About"})}),Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsx)(n.b,{to:"/login",className:"navbar-link "+("/login"===i.pathname?"active":""),children:"Login"})}),Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsx)(n.b,{to:"/register",className:"navbar-cta",children:"Sign Up"})})]}),t&&"active"===!(null!==r&&void 0!==r&&r.status)&&Object(d.jsx)("li",{className:"navbar-item",children:Object(d.jsxs)(n.b,{to:"/subscription",className:"navbar-cta",children:[Object(d.jsx)(m.g,{})," Upgrade"]})})]})]})})};var O=()=>{const[e,s]=Object(a.useState)(""),[t,c]=Object(a.useState)(""),[r,i]=Object(a.useState)(""),[o,j]=Object(a.useState)(!1),{login:b}=h(),u=Object(l.q)();return Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row justify-content-center",children:Object(d.jsx)("div",{className:"col-md-6",children:Object(d.jsxs)("div",{className:"card mt-5",children:[Object(d.jsx)("div",{className:"card-header",children:Object(d.jsx)("h2",{className:"text-center",children:"Log In"})}),Object(d.jsxs)("div",{className:"card-body",children:[r&&Object(d.jsx)("div",{className:"alert alert-danger",role:"alert",children:r}),Object(d.jsxs)("form",{onSubmit:async s=>{s.preventDefault();try{i(""),j(!0),await b(e,t),u("/dashboard")}catch(r){i(r.message||"Failed to log in")}finally{j(!1)}},children:[Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsxs)("label",{htmlFor:"email",children:[Object(d.jsx)(m.i,{className:"me-2"})," Email"]}),Object(d.jsx)("input",{type:"email",id:"email",className:"form-control",value:e,onChange:e=>s(e.target.value),required:!0})]}),Object(d.jsxs)("div",{className:"form-group mb-4",children:[Object(d.jsxs)("label",{htmlFor:"password",children:[Object(d.jsx)(m.j,{className:"me-2"})," Password"]}),Object(d.jsx)("input",{type:"password",id:"password",className:"form-control",value:t,onChange:e=>c(e.target.value),required:!0})]}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary w-100",disabled:o,children:o?"Logging In...":"Log In"})]}),Object(d.jsx)("div",{className:"text-center mt-3",children:Object(d.jsx)(n.b,{to:"/forgot-password",children:"Forgot Password?"})})]}),Object(d.jsxs)("div",{className:"card-footer text-center",children:["Need an account? ",Object(d.jsx)(n.b,{to:"/register",children:"Sign Up"})]})]})})})})};var x=()=>{const[e,s]=Object(a.useState)(""),[t,c]=Object(a.useState)(""),[r,i]=Object(a.useState)(""),[o,j]=Object(a.useState)(""),[b,u]=Object(a.useState)(""),[p,O]=Object(a.useState)(!1),{register:x}=h(),v=Object(l.q)();return Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row justify-content-center",children:Object(d.jsx)("div",{className:"col-md-6",children:Object(d.jsxs)("div",{className:"card mt-5",children:[Object(d.jsx)("div",{className:"card-header",children:Object(d.jsx)("h2",{className:"text-center",children:"Create Your Account"})}),Object(d.jsxs)("div",{className:"card-body",children:[b&&Object(d.jsx)("div",{className:"alert alert-danger",role:"alert",children:b}),Object(d.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),r!==o)return u("Passwords do not match");if(r.length<6)return u("Password must be at least 6 characters");try{u(""),O(!0),await x(t,r,e),v("/dashboard")}catch(b){u(b.message||"Failed to create an account")}finally{O(!1)}},children:[Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsxs)("label",{htmlFor:"name",children:[Object(d.jsx)(m.t,{className:"me-2"})," Full Name"]}),Object(d.jsx)("input",{type:"text",id:"name",className:"form-control",value:e,onChange:e=>s(e.target.value),required:!0})]}),Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsxs)("label",{htmlFor:"email",children:[Object(d.jsx)(m.i,{className:"me-2"})," Email"]}),Object(d.jsx)("input",{type:"email",id:"email",className:"form-control",value:t,onChange:e=>c(e.target.value),required:!0})]}),Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsxs)("label",{htmlFor:"password",children:[Object(d.jsx)(m.j,{className:"me-2"})," Password"]}),Object(d.jsx)("input",{type:"password",id:"password",className:"form-control",value:r,onChange:e=>i(e.target.value),required:!0})]}),Object(d.jsxs)("div",{className:"form-group mb-4",children:[Object(d.jsxs)("label",{htmlFor:"confirmPassword",children:[Object(d.jsx)(m.j,{className:"me-2"})," Confirm Password"]}),Object(d.jsx)("input",{type:"password",id:"confirmPassword",className:"form-control",value:o,onChange:e=>j(e.target.value),required:!0})]}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary w-100",disabled:p,children:p?"Creating Account...":"Sign Up"})]})]}),Object(d.jsxs)("div",{className:"card-footer text-center",children:["Already have an account? ",Object(d.jsx)(n.b,{to:"/login",children:"Log In"})]})]})})})})};var v=()=>{const[e,s]=Object(a.useState)(null),[t,c]=Object(a.useState)(null),[r,i]=Object(a.useState)(!0),[l,o]=Object(a.useState)(""),{currentUser:j,hasPremiumAccess:b}=h(),u=b();Object(a.useEffect)((()=>{(async()=>{try{i(!0);const e=localStorage.getItem("authToken");j.children&&j.children.length>0&&c(j.children[0].id);const t=await fetch("https://confident-kids-api.kevin-mcgovern.workers.dev/api/dashboard",{method:"GET",headers:{Authorization:`Bearer ${e}`}}),a=await t.json();if(!t.ok)throw new Error(a.message||"Failed to fetch dashboard data");s(a)}catch(l){console.error("Error fetching dashboard data:",l),o("Failed to load dashboard data. Please try again later.")}finally{i(!1)}})()}),[j]);return r?Object(d.jsx)("div",{className:"text-center p-5",children:"Loading dashboard data..."}):l?Object(d.jsx)("div",{className:"alert alert-danger",children:l}):e?Object(d.jsxs)("div",{className:"container mt-4",children:[Object(d.jsxs)("div",{className:"dashboard-welcome",children:[Object(d.jsxs)("h1",{children:["Welcome, ",j.name,"!"]}),Object(d.jsx)("p",{children:"Track your child's confidence journey and explore activities designed to build their confidence."})]}),j.children&&j.children.length>0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"child-selector mb-4",children:[Object(d.jsx)("label",{htmlFor:"childSelect",children:"Select Child:"}),Object(d.jsx)("select",{id:"childSelect",className:"form-control",value:t,onChange:e=>{c(e.target.value)},children:j.children.map((e=>Object(d.jsxs)("option",{value:e.id,children:[e.name," (",e.age," years)"]},e.id)))})]}),Object(d.jsxs)("div",{className:"dashboard-stats",children:[Object(d.jsxs)("div",{className:"stat-card",children:[Object(d.jsx)(m.c,{className:"mb-2",size:24}),Object(d.jsxs)("div",{className:"stat-value",children:[e.overallProgress,"%"]}),Object(d.jsx)("div",{className:"stat-label",children:"Overall Progress"})]}),Object(d.jsxs)("div",{className:"stat-card",children:[Object(d.jsx)(m.b,{className:"mb-2",size:24}),Object(d.jsx)("div",{className:"stat-value",children:e.activitiesCompleted}),Object(d.jsx)("div",{className:"stat-label",children:"Activities Completed"})]}),Object(d.jsxs)("div",{className:"stat-card",children:[Object(d.jsx)(m.s,{className:"mb-2",size:24}),Object(d.jsx)("div",{className:"stat-value",children:u?e.points:"Locked"}),Object(d.jsxs)("div",{className:"stat-label",children:["Reward Points ",!u&&Object(d.jsx)("span",{className:"premium-badge",children:"PRO"})]})]})]}),Object(d.jsxs)("div",{className:"today-challenge",children:[Object(d.jsx)("h2",{children:"Today's Challenge"}),Object(d.jsxs)("div",{className:"challenge-container",children:[Object(d.jsx)("h3",{className:"challenge-title",children:e.todayChallenge.title}),Object(d.jsx)("p",{className:"challenge-description",children:e.todayChallenge.description}),Object(d.jsx)(n.b,{to:`/challenges/${e.todayChallenge.id}`,className:"btn btn-primary mt-3",children:"Start Challenge"})]})]}),Object(d.jsx)("h2",{className:"mt-5 mb-3",children:"Confidence Pillars"}),Object(d.jsx)("div",{className:"grid-3",children:e.pillars.map((e=>Object(d.jsxs)("div",{className:`pillar-card pillar-card-${e.id}`,children:[Object(d.jsx)("div",{className:"pillar-card-header",children:Object(d.jsx)("h3",{children:e.name})}),Object(d.jsxs)("div",{className:"pillar-card-body",children:[Object(d.jsx)("p",{children:e.shortDescription}),Object(d.jsxs)("div",{className:"progress-label",children:[Object(d.jsx)("span",{children:"Progress"}),Object(d.jsxs)("span",{children:[e.progress,"%"]})]}),Object(d.jsx)("div",{className:"progress-container",children:Object(d.jsx)("div",{className:`progress-bar progress-bar-${e.id}`,style:{width:`${e.progress}%`}})})]}),Object(d.jsxs)("div",{className:"pillar-card-footer",children:[Object(d.jsxs)("span",{children:[e.activitiesCompleted,"/",e.totalActivities," Activities"]}),Object(d.jsx)(n.b,{to:`/pillars/${e.id}`,className:"btn btn-sm btn-outline",children:"Explore"})]})]},e.id)))})]}):Object(d.jsxs)("div",{className:"alert alert-info mt-4",children:[Object(d.jsx)("h4",{children:"Let's Get Started!"}),Object(d.jsx)("p",{children:"Add your child's profile to begin their confidence journey."}),Object(d.jsx)(n.b,{to:"/profile",className:"btn btn-primary mt-2",children:"Add Child Profile"})]}),!u&&Object(d.jsxs)("div",{className:"upgrade-prompt standard mt-5",children:[Object(d.jsxs)("h3",{children:[Object(d.jsx)(m.g,{className:"me-2"})," Unlock Premium Features"]}),Object(d.jsx)("p",{children:"Subscribe to our premium plan to access all activities, detailed progress tracking, and rewards for your child."}),Object(d.jsx)(n.b,{to:"/subscription",className:"upgrade-button",children:"Upgrade Now"})]})]}):Object(d.jsx)("div",{className:"text-center p-5",children:"No dashboard data available."})};var g=e=>{let{childId:s}=e;const[t,c]=Object(a.useState)(null),[r,i]=Object(a.useState)(!0),[l,n]=Object(a.useState)(""),{currentUser:o,hasPremiumAccess:j}=h(),b=j();Object(a.useEffect)((()=>{(async()=>{if(s)try{i(!0);const e=localStorage.getItem("authToken"),t=await fetch(`https://confident-kids-api.kevin-mcgovern.workers.dev/api/progress/${s}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}}),a=await t.json();if(!t.ok)throw new Error(a.message||"Failed to fetch progress data");c(a.progress)}catch(l){console.error("Error fetching progress data:",l),n("Failed to load progress data. Please try again later.")}finally{i(!1)}})()}),[s]);const u=async(e,t,a)=>{if(s)try{const r=localStorage.getItem("authToken"),i=await fetch("https://confident-kids-api.kevin-mcgovern.workers.dev/api/progress/update",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({childId:s,pillarId:e,activityId:t,completed:a})}),l=await i.json();if(!i.ok)throw new Error(l.message||"Failed to update progress");c((s=>{const c=s.pillars.map((s=>{if(s.id===e){const e=s.activities.map((e=>e.id===t?{...e,completed:a}:e));return{...s,activities:e}}return s}));return{...s,pillars:c}}))}catch(l){console.error("Error updating progress:",l),n("Failed to update progress. Please try again later.")}};return r?Object(d.jsx)("div",{className:"text-center p-5",children:"Loading progress data..."}):l?Object(d.jsx)("div",{className:"alert alert-danger",children:l}):t?Object(d.jsxs)("div",{className:"progress-tracking-container",children:[Object(d.jsxs)("div",{className:"dashboard-stats",children:[Object(d.jsxs)("div",{className:"stat-card",children:[Object(d.jsx)(m.c,{className:"mb-2",size:24}),Object(d.jsxs)("div",{className:"stat-value",children:[t.overallProgress,"%"]}),Object(d.jsx)("div",{className:"stat-label",children:"Overall Progress"})]}),Object(d.jsxs)("div",{className:"stat-card",children:[Object(d.jsx)(m.s,{className:"mb-2",size:24}),Object(d.jsx)("div",{className:"stat-value",children:t.activitiesCompleted}),Object(d.jsx)("div",{className:"stat-label",children:"Activities Completed"})]}),Object(d.jsxs)("div",{className:"stat-card",children:[Object(d.jsx)(m.b,{className:"mb-2",size:24}),Object(d.jsx)("div",{className:"stat-value",children:t.currentStreak}),Object(d.jsx)("div",{className:"stat-label",children:"Day Streak"})]})]}),Object(d.jsx)("h3",{className:"mb-3",children:"Progress by Pillar"}),t.pillars.map((e=>Object(d.jsxs)("div",{className:"mb-4",children:[Object(d.jsxs)("div",{className:"progress-label",children:[Object(d.jsx)("span",{children:e.name}),Object(d.jsxs)("span",{children:[e.progress,"%"]})]}),Object(d.jsx)("div",{className:"progress-container",children:Object(d.jsx)("div",{className:`progress-bar progress-bar-${e.id}`,style:{width:`${e.progress}%`}})}),b?Object(d.jsxs)("div",{className:"activities-list mt-3",children:[Object(d.jsx)("h5",{children:"Activities"}),e.activities.map((s=>Object(d.jsxs)("div",{className:"activity-item d-flex align-items-center justify-content-between p-2",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"checkbox",id:`activity-${s.id}`,checked:s.completed,onChange:t=>u(e.id,s.id,t.target.checked),className:"me-2"}),Object(d.jsx)("label",{htmlFor:`activity-${s.id}`,children:s.name})]}),Object(d.jsx)("span",{className:"text-muted",children:s.date})]},s.id)))]}):Object(d.jsxs)("div",{className:"premium-feature-container mt-3",children:[Object(d.jsx)("div",{className:"premium-feature-preview",children:Object(d.jsxs)("div",{className:"activities-list",children:[Object(d.jsx)("h5",{children:"Activities"}),e.activities.slice(0,1).map((s=>Object(d.jsxs)("div",{className:"activity-item d-flex align-items-center justify-content-between p-2",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"checkbox",id:`activity-${s.id}`,checked:s.completed,onChange:t=>u(e.id,s.id,t.target.checked),className:"me-2"}),Object(d.jsx)("label",{htmlFor:`activity-${s.id}`,children:s.name})]}),Object(d.jsx)("span",{className:"text-muted",children:s.date})]},s.id))),Array(3).fill(0).map(((e,s)=>Object(d.jsxs)("div",{className:"activity-item d-flex align-items-center justify-content-between p-2",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:"me-2",children:"\u25a1"}),Object(d.jsxs)("span",{children:["Premium Activity ",s+1]})]}),Object(d.jsx)("span",{className:"text-muted",children:"Locked"})]},s)))]})}),Object(d.jsxs)("div",{className:"premium-feature-overlay",children:[Object(d.jsx)("div",{className:"lock-icon",children:"\ud83d\udd12"}),Object(d.jsx)("h4",{children:"Premium Feature"}),Object(d.jsx)("p",{children:"Unlock detailed activity tracking with a premium subscription"}),Object(d.jsx)("a",{href:"/subscription",className:"btn btn-secondary mt-2",children:"Upgrade Now"})]})]})]},e.id))),b&&Object(d.jsxs)("div",{className:"calendar-section mt-5",children:[Object(d.jsx)("h3",{className:"mb-3",children:"Activity Calendar"}),Object(d.jsxs)("div",{className:"calendar-container",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>Object(d.jsx)("div",{className:"calendar-header",children:e},e))),t.calendar.map((e=>Object(d.jsxs)("div",{className:`calendar-day ${e.completed?"completed":""} ${e.isToday?"today":""} ${e.isFuture?"future":""}`,title:e.activities.join(", "),children:[Object(d.jsx)("div",{children:new Date(e.date).getDate()}),e.completed&&Object(d.jsx)("div",{className:"calendar-badge",children:"\u2713"})]},e.date)))]})]}),!b&&Object(d.jsxs)("div",{className:"upgrade-prompt standard mt-5",children:[Object(d.jsxs)("h3",{children:[Object(d.jsx)(m.e,{className:"me-2"})," Unlock Advanced Progress Tracking"]}),Object(d.jsx)("p",{children:"Subscribe to our premium plan to access detailed progress tracking, activity calendars, and achievement certificates for your child."}),Object(d.jsx)("a",{href:"/subscription",className:"upgrade-button",children:"Upgrade Now"})]})]}):Object(d.jsx)("div",{className:"text-center p-5",children:"No progress data available."})};var N=()=>{const{pillarId:e}=Object(l.s)(),[s,t]=Object(a.useState)(null),[c,r]=Object(a.useState)([]),[i,o]=Object(a.useState)(!0),[j,b]=Object(a.useState)(""),[u,p]=Object(a.useState)(null),{currentUser:O,hasPremiumAccess:x}=h(),v=x();Object(a.useEffect)((()=>{(async()=>{try{o(!0);const s=localStorage.getItem("authToken"),a=await fetch(`https://confident-kids-api.kevin-mcgovern.workers.dev/api/pillars/${e}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}}),c=await a.json();if(!a.ok)throw new Error(c.message||"Failed to fetch pillar data");t(c.pillar),r(c.activities),O.children&&O.children.length>0&&p(O.children[0].id)}catch(j){console.error("Error fetching pillar data:",j),b("Failed to load pillar data. Please try again later.")}finally{o(!1)}})()}),[e,O]);if(i)return Object(d.jsx)("div",{className:"text-center p-5",children:"Loading pillar data..."});if(j)return Object(d.jsx)("div",{className:"alert alert-danger",children:j});if(!s)return Object(d.jsx)("div",{className:"text-center p-5",children:"Pillar not found."});const N=v?c:c.slice(0,1);return Object(d.jsxs)("div",{className:"container mt-4",children:[Object(d.jsxs)("div",{className:`pillar-card pillar-card-${s.id} mb-4`,children:[Object(d.jsx)("div",{className:"pillar-card-header",children:Object(d.jsx)("h1",{children:s.name})}),Object(d.jsxs)("div",{className:"pillar-card-body",children:[Object(d.jsx)("p",{children:s.description}),O.children&&O.children.length>0&&Object(d.jsxs)("div",{className:"child-selector mb-4",children:[Object(d.jsx)("label",{htmlFor:"childSelect",children:"Select Child:"}),Object(d.jsx)("select",{id:"childSelect",className:"form-control",value:u,onChange:e=>{p(e.target.value)},children:O.children.map((e=>Object(d.jsxs)("option",{value:e.id,children:[e.name," (",e.age," years)"]},e.id)))})]}),u&&Object(d.jsx)(g,{childId:u})]})]}),Object(d.jsx)("h2",{className:"mb-3",children:"Activities"}),Object(d.jsxs)("div",{className:"grid-2",children:[N.map((s=>Object(d.jsxs)("div",{className:"card mb-4",children:[Object(d.jsx)("div",{className:"card-header",children:Object(d.jsx)("h3",{children:s.title})}),Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("p",{children:s.description}),Object(d.jsx)("h4",{children:"Instructions for Parents:"}),Object(d.jsx)("p",{children:s.instructions}),Object(d.jsx)("div",{className:"mt-4",children:Object(d.jsx)(n.b,{to:`/pillars/${e}/activities/${s.id}`,className:"btn btn-primary",children:"View Details"})})]})]},s.id))),!v&&c.length>1&&Object(d.jsxs)("div",{className:"premium-feature-container",children:[Object(d.jsx)("div",{className:"premium-feature-preview",children:Object(d.jsxs)("div",{className:"card mb-4",children:[Object(d.jsx)("div",{className:"card-header",children:Object(d.jsx)("h3",{children:"Premium Activity"})}),Object(d.jsx)("div",{className:"card-body",children:Object(d.jsx)("p",{children:"This premium activity helps your child develop confidence through guided exercises..."})})]})}),Object(d.jsxs)("div",{className:"premium-feature-overlay",children:[Object(d.jsx)("div",{className:"lock-icon",children:Object(d.jsx)(m.j,{})}),Object(d.jsx)("h4",{children:"Premium Activities"}),Object(d.jsxs)("p",{children:["Unlock ",c.length-1," more activities for this pillar with a premium subscription"]}),Object(d.jsxs)(n.b,{to:"/subscription",className:"btn btn-secondary mt-2",children:[Object(d.jsx)(m.g,{className:"me-2"})," Upgrade Now"]})]})]})]}),!v&&Object(d.jsxs)("div",{className:"upgrade-prompt standard mt-4",children:[Object(d.jsxs)("h3",{children:[Object(d.jsx)(m.g,{className:"me-2"})," Unlock All Activities"]}),Object(d.jsx)("p",{children:"Subscribe to our premium plan to access all activities, detailed progress tracking, and rewards for your child."}),Object(d.jsx)(n.b,{to:"/subscription",className:"upgrade-button",children:"Upgrade Now"})]})]})},f=t(11),y=t(6);const w=Object(f.a)("pk_test_51R55ZbPEQoD1awJQndiLLj3BtKtvHxlcNTHTKEtS8kmXoUJugqf4P9r11ugn4A5UJnywb57E2T7776qPTJFkfKQ2000cVyNrVv"),k=[{id:"monthly",name:"Monthly",price:9.99,interval:"month",description:"Perfect for trying out all premium features",features:["Full access to all 5 pillars","Unlimited activities and challenges","Progress tracking for multiple children","Printable certificates","Rewards marketplace","Social sharing capabilities"]},{id:"yearly",name:"Yearly",price:89.99,regularPrice:119.88,interval:"year",description:"Our most popular plan",features:["Full access to all 5 pillars","Unlimited activities and challenges","Progress tracking for multiple children","Printable certificates","Rewards marketplace","Social sharing capabilities","Priority support","Early access to new features"],bestValue:!0},{id:"lifetime",name:"Lifetime",price:249.99,interval:"once",description:"Pay once, use forever",features:["Full access to all 5 pillars","Unlimited activities and challenges","Progress tracking for multiple children","Printable certificates","Rewards marketplace","Social sharing capabilities","Priority support","Early access to new features","All future updates included"]}],S=e=>{let{selectedPlan:s,onSuccess:t,onError:c}=e;const r=Object(y.useStripe)(),i=Object(y.useElements)(),{currentUser:l}=h(),[n,o]=Object(a.useState)(!1),[j,b]=Object(a.useState)(null);return Object(d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r&&i){o(!0),b(null);try{const e=i.getElement(y.CardElement),{error:a,paymentMethod:c}=await r.createPaymentMethod({type:"card",card:e});if(a)throw new Error(a.message);const n=await fetch("https://confident-kids-api.kevin-mcgovern.workers.dev/api/subscriptions/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({paymentMethodId:c.id,planId:s.id,customerId:l.id,email:l.email})}),d=await n.json();if(!n.ok)throw new Error(d.message||"Failed to process subscription");if("success"===d.status)t(d);else{if("requires_action"!==d.status)throw new Error(d.message||"Subscription failed");{const{error:e,paymentIntent:s}=await r.confirmCardPayment(d.clientSecret);if(e)throw new Error(e.message);if("succeeded"!==s.status)throw new Error("Payment failed");t(d)}}}catch(j){console.error("Subscription error:",j),b(j.message),c(j.message)}finally{o(!1)}}},children:[Object(d.jsx)("div",{className:"card-element-container",children:Object(d.jsx)(y.CardElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})}),j&&Object(d.jsx)("div",{className:"alert alert-danger mb-3",children:j}),Object(d.jsx)("button",{type:"submit",className:"subscribe-button",disabled:!r||n,children:n?"Processing...":`Subscribe for $${s.price}/${"once"===s.interval?"":s.interval}`})]})};var P=()=>{const[e,s]=Object(a.useState)(k[1]),[t,c]=Object(a.useState)(!1),[r,i]=Object(a.useState)(null),{currentUser:n,userSubscription:o,fetchSubscriptionStatus:j}=h(),b=Object(l.q)();Object(a.useEffect)((()=>{o&&"active"===o.status&&b("/dashboard")}),[o,b]);return t?Object(d.jsx)("div",{className:"subscription-page",children:Object(d.jsxs)("div",{className:"success-message",children:[Object(d.jsxs)("h2",{children:[Object(d.jsx)(m.d,{className:"me-2"})," Subscription Successful!"]}),Object(d.jsx)("p",{children:"Thank you for subscribing to Confident Kids Premium. You now have access to all premium features."}),Object(d.jsx)("p",{children:"You will be redirected to your dashboard shortly..."})]})}):Object(d.jsxs)("div",{className:"subscription-page",children:[Object(d.jsxs)("div",{className:"feature-highlight",children:[Object(d.jsxs)("h1",{children:[Object(d.jsx)(m.g,{className:"me-2"})," Upgrade to Confident Kids Premium"]}),Object(d.jsx)("p",{children:"Unlock the full potential of your child's confidence journey with our premium features."})]}),Object(d.jsxs)("div",{className:"plan-selection",children:[Object(d.jsx)("h2",{children:"Choose Your Plan"}),Object(d.jsx)("div",{className:"plan-options",children:k.map((t=>Object(d.jsxs)("div",{className:"plan-card "+(e.id===t.id?"selected":""),onClick:()=>(e=>{s(e)})(t),children:[t.bestValue&&Object(d.jsx)("div",{className:"best-value",children:"Best Value"}),Object(d.jsx)("h3",{children:t.name}),Object(d.jsxs)("div",{className:"price",children:["$",t.price," ",Object(d.jsxs)("span",{children:["/","once"===t.interval?"":t.interval]})]}),t.regularPrice&&Object(d.jsxs)("div",{className:"savings",children:["Save $",(t.regularPrice-t.price).toFixed(2)," per year"]}),Object(d.jsx)("p",{children:t.description}),Object(d.jsx)("ul",{className:"features",children:t.features.map(((e,s)=>Object(d.jsx)("li",{children:e},s)))}),Object(d.jsx)("button",{className:`btn ${e.id===t.id?"btn-primary":"btn-outline"} w-100`,children:e.id===t.id?"Selected":"Select"})]},t.id)))})]}),Object(d.jsxs)("div",{className:"payment-section",children:[Object(d.jsx)("h2",{children:"Payment Information"}),Object(d.jsx)(y.Elements,{stripe:w,children:Object(d.jsx)(S,{selectedPlan:e,onSuccess:async e=>{c(!0),await j(),setTimeout((()=>{b("/dashboard")}),3e3)},onError:e=>{i(e)}})}),r&&Object(d.jsx)("div",{className:"alert alert-danger mt-3",children:r}),Object(d.jsxs)("div",{className:"guarantee",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)(m.m,{})," 30-day money-back guarantee ",Object(d.jsx)(m.m,{})]}),Object(d.jsx)("p",{children:"If you're not satisfied with our premium features, we'll refund your payment within the first 30 days."})]})]})]})};var C=()=>{const[e,s]=Object(a.useState)("achievements"),[t,c]=Object(a.useState)([]),[r,i]=Object(a.useState)([]),[l,n]=Object(a.useState)([]),[o,j]=Object(a.useState)(0),[b,u]=Object(a.useState)(!0),[p,O]=Object(a.useState)(""),{currentUser:x,hasPremiumAccess:v}=h();Object(a.useEffect)((()=>{v()?(async()=>{try{u(!0);const e=localStorage.getItem("authToken"),s=await fetch("https://confident-kids-api.kevin-mcgovern.workers.dev/api/rewards",{method:"GET",headers:{Authorization:`Bearer ${e}`}}),t=await s.json();if(!s.ok)throw new Error(t.message||"Failed to fetch rewards data");c(t.achievements),i(t.certificates),n(t.marketplace),j(t.points)}catch(p){console.error("Error fetching rewards data:",p),O("Failed to load rewards data. Please try again later.")}finally{u(!1)}})():u(!1)}),[v]);return v()?b?Object(d.jsx)("div",{className:"text-center p-5",children:"Loading rewards data..."}):p?Object(d.jsx)("div",{className:"alert alert-danger",children:p}):Object(d.jsxs)("div",{className:"rewards-container",children:[Object(d.jsx)("h1",{className:"mb-4",children:"Rewards & Achievements"}),Object(d.jsxs)("div",{className:"points-display",children:[Object(d.jsx)("span",{className:"points-icon",children:Object(d.jsx)(m.p,{})}),Object(d.jsxs)("span",{className:"points-value",children:[o," Points"]})]}),Object(d.jsxs)("div",{className:"rewards-tabs",children:[Object(d.jsx)("button",{className:"achievements"===e?"active":"",onClick:()=>s("achievements"),children:"Achievements"}),Object(d.jsx)("button",{className:"certificates"===e?"active":"",onClick:()=>s("certificates"),children:"Certificates"}),Object(d.jsx)("button",{className:"marketplace"===e?"active":"",onClick:()=>s("marketplace"),children:"Rewards Marketplace"})]}),Object(d.jsxs)("div",{className:"rewards-content",children:["achievements"===e&&Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{className:"mb-3",children:"Your Child's Achievements"}),Object(d.jsx)("div",{className:"achievement-grid",children:t.map((e=>Object(d.jsxs)("div",{className:"achievement-item "+(e.unlocked?"":"achievement-locked"),children:[Object(d.jsx)("div",{className:"achievement-icon",children:e.icon}),Object(d.jsx)("h4",{children:e.name}),Object(d.jsx)("p",{children:e.description}),e.unlocked?Object(d.jsx)("div",{className:"text-success",children:"Unlocked!"}):Object(d.jsxs)("div",{className:"text-muted",children:[e.progress,"% Complete"]})]},e.id)))})]}),"certificates"===e&&Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{className:"mb-3",children:"Printable Certificates"}),0===r.length?Object(d.jsx)("p",{children:"No certificates earned yet. Complete activities to earn certificates!"}):r.map((e=>{var s,t;return Object(d.jsxs)("div",{className:"mb-4",children:[Object(d.jsx)("h4",{children:e.title}),Object(d.jsx)("div",{className:"certificate-preview",children:Object(d.jsxs)("div",{className:"certificate-content",children:[Object(d.jsx)("h2",{children:e.title}),Object(d.jsxs)("h3",{children:["Awarded to: ",(null===(s=x.children)||void 0===s||null===(t=s.find((s=>s.id===e.childId)))||void 0===t?void 0:t.name)||"Your Child"]}),Object(d.jsx)("p",{children:e.description}),Object(d.jsxs)("p",{children:["Date: ",new Date(e.date).toLocaleDateString()]})]})}),Object(d.jsxs)("div",{className:"certificate-actions",children:[Object(d.jsxs)("button",{className:"btn btn-outline",onClick:()=>{return s=e.id,void console.log(`Sharing certificate ${s}`);var s},children:[Object(d.jsx)(m.n,{className:"me-2"})," Share"]}),Object(d.jsxs)("button",{className:"btn btn-primary print-button",onClick:()=>{return s=e.id,console.log(`Printing certificate ${s}`),void window.print();var s},children:[Object(d.jsx)(m.l,{className:"me-2"})," Print"]})]})]},e.id)}))]}),"marketplace"===e&&Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{className:"mb-3",children:"Rewards Marketplace"}),Object(d.jsx)("p",{children:"Use your points to redeem these special rewards for your child:"}),Object(d.jsx)("div",{className:"marketplace-grid",children:l.map((e=>Object(d.jsxs)("div",{className:"reward-item",children:[Object(d.jsx)("img",{src:e.image,alt:e.name,className:"reward-image"}),Object(d.jsxs)("div",{className:"reward-content",children:[Object(d.jsxs)("div",{className:"reward-points",children:[e.points," Points"]}),Object(d.jsx)("h4",{children:e.name}),Object(d.jsx)("p",{children:e.description}),Object(d.jsx)("button",{className:"btn btn-primary w-100 mt-2",disabled:o<e.points||e.redeemed,onClick:()=>(async e=>{try{const s=localStorage.getItem("authToken"),t=await fetch("https://confident-kids-api.kevin-mcgovern.workers.dev/api/rewards/redeem",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({rewardId:e})}),a=await t.json();if(!t.ok)throw new Error(a.message||"Failed to redeem reward");j(a.updatedPoints),n((s=>s.map((s=>s.id===e?{...s,redeemed:!0}:s)))),alert("Reward redeemed successfully!")}catch(p){console.error("Error redeeming reward:",p),alert(`Failed to redeem reward: ${p.message}`)}})(e.id),children:e.redeemed?"Redeemed":"Redeem Reward"})]})]},e.id)))})]})]})]}):Object(d.jsx)("div",{className:"container mt-5",children:Object(d.jsxs)("div",{className:"upgrade-prompt standard",children:[Object(d.jsxs)("h2",{children:[Object(d.jsx)(m.s,{className:"me-2"})," Unlock the Rewards System"]}),Object(d.jsx)("p",{children:"The Rewards System is a premium feature that allows your child to earn achievements, collect certificates, and redeem points for special rewards."}),Object(d.jsx)("p",{children:"Subscribe to our premium plan to motivate your child with tangible rewards for their confidence journey."}),Object(d.jsx)("a",{href:"/subscription",className:"upgrade-button",children:"Upgrade Now"})]})})};var A=()=>Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("section",{className:"dashboard-welcome mt-4",children:[Object(d.jsx)("h1",{children:"Build Your Child's Confidence"}),Object(d.jsx)("p",{children:"A research-based approach to help parents nurture confident, resilient children."}),Object(d.jsxs)("div",{className:"mt-4",children:[Object(d.jsx)(n.b,{to:"/register",className:"btn btn-primary me-3",children:"Get Started"}),Object(d.jsx)(n.b,{to:"/login",className:"btn btn-outline",children:"Log In"})]})]}),Object(d.jsxs)("section",{className:"mt-5",children:[Object(d.jsx)("h2",{className:"text-center mb-4",children:"The 5 Pillars of Confidence"}),Object(d.jsxs)("div",{className:"grid-3",children:[Object(d.jsxs)("div",{className:"pillar-card pillar-card-1",children:[Object(d.jsx)("div",{className:"pillar-card-header",children:Object(d.jsx)("h3",{children:"Independence & Problem Solving"})}),Object(d.jsx)("div",{className:"pillar-card-body",children:Object(d.jsx)("p",{children:"Help your child develop the skills to tackle challenges on their own and find solutions to problems."})})]}),Object(d.jsxs)("div",{className:"pillar-card pillar-card-2",children:[Object(d.jsx)("div",{className:"pillar-card-header",children:Object(d.jsx)("h3",{children:"Growth Mindset & Resilience"})}),Object(d.jsx)("div",{className:"pillar-card-body",children:Object(d.jsx)("p",{children:"Teach your child to embrace challenges, persist through setbacks, and see effort as a path to mastery."})})]}),Object(d.jsxs)("div",{className:"pillar-card pillar-card-3",children:[Object(d.jsx)("div",{className:"pillar-card-header",children:Object(d.jsx)("h3",{children:"Social Confidence & Communication"})}),Object(d.jsx)("div",{className:"pillar-card-body",children:Object(d.jsx)("p",{children:"Build your child's ability to express themselves, connect with others, and navigate social situations."})})]}),Object(d.jsxs)("div",{className:"pillar-card pillar-card-4",children:[Object(d.jsx)("div",{className:"pillar-card-header",children:Object(d.jsx)("h3",{children:"Purpose & Strength Discovery"})}),Object(d.jsx)("div",{className:"pillar-card-body",children:Object(d.jsx)("p",{children:"Help your child identify their unique strengths and develop a sense of purpose and direction."})})]}),Object(d.jsxs)("div",{className:"pillar-card pillar-card-5",children:[Object(d.jsx)("div",{className:"pillar-card-header",children:Object(d.jsx)("h3",{children:"Managing Fear & Anxiety"})}),Object(d.jsx)("div",{className:"pillar-card-body",children:Object(d.jsx)("p",{children:"Equip your child with tools to understand and manage their emotions, particularly fear and anxiety."})})]})]})]}),Object(d.jsxs)("section",{className:"mt-5",children:[Object(d.jsx)("h2",{className:"text-center mb-4",children:"How It Works"}),Object(d.jsxs)("div",{className:"grid-3",children:[Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("div",{className:"card-body text-center",children:[Object(d.jsx)(m.e,{className:"mb-3",size:48,color:"#6a1b9a"}),Object(d.jsx)("h3",{children:"Create Child Profiles"}),Object(d.jsx)("p",{children:"Add profiles for each of your children to receive age-appropriate activities and track their progress."})]})}),Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("div",{className:"card-body text-center",children:[Object(d.jsx)(m.c,{className:"mb-3",size:48,color:"#6a1b9a"}),Object(d.jsx)("h3",{children:"Track Progress"}),Object(d.jsx)("p",{children:"Monitor your child's confidence journey with detailed progress tracking across all five pillars."})]})}),Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("div",{className:"card-body text-center",children:[Object(d.jsx)(m.s,{className:"mb-3",size:48,color:"#6a1b9a"}),Object(d.jsx)("h3",{children:"Earn Rewards"}),Object(d.jsx)("p",{children:"Celebrate achievements with printable certificates and redeemable rewards to keep your child motivated."})]})})]})]}),Object(d.jsxs)("section",{className:"mt-5",children:[Object(d.jsx)("h2",{className:"text-center mb-4",children:"Choose Your Plan"}),Object(d.jsxs)("div",{className:"plan-options",children:[Object(d.jsxs)("div",{className:"plan-card",children:[Object(d.jsx)("h3",{children:"Free"}),Object(d.jsxs)("div",{className:"price",children:["$0 ",Object(d.jsx)("span",{children:"/month"})]}),Object(d.jsx)("p",{children:"Basic features to get started"}),Object(d.jsxs)("ul",{className:"features",children:[Object(d.jsx)("li",{children:"One recommended activity per pillar"}),Object(d.jsx)("li",{children:"Basic child profile management"}),Object(d.jsx)("li",{children:"Limited progress tracking"})]}),Object(d.jsx)(n.b,{to:"/register",className:"btn btn-outline w-100",children:"Sign Up Free"})]}),Object(d.jsxs)("div",{className:"plan-card",children:[Object(d.jsx)("div",{className:"best-value",children:"Best Value"}),Object(d.jsx)("h3",{children:"Premium"}),Object(d.jsxs)("div",{className:"price",children:["$9.99 ",Object(d.jsx)("span",{children:"/month"})]}),Object(d.jsx)("p",{children:"Full access to all features"}),Object(d.jsxs)("ul",{className:"features",children:[Object(d.jsx)("li",{children:"Full access to all 5 pillars"}),Object(d.jsx)("li",{children:"Unlimited activities and challenges"}),Object(d.jsx)("li",{children:"Progress tracking for multiple children"}),Object(d.jsx)("li",{children:"Printable certificates"}),Object(d.jsx)("li",{children:"Rewards marketplace"}),Object(d.jsx)("li",{children:"Social sharing capabilities"})]}),Object(d.jsx)(n.b,{to:"/register",className:"btn btn-primary w-100",children:"Get Started"})]}),Object(d.jsxs)("div",{className:"plan-card",children:[Object(d.jsx)("h3",{children:"Annual"}),Object(d.jsxs)("div",{className:"price",children:["$89.99 ",Object(d.jsx)("span",{children:"/year"})]}),Object(d.jsx)("div",{className:"savings",children:"Save $29.89 per year"}),Object(d.jsx)("p",{children:"All premium features at a discount"}),Object(d.jsxs)("ul",{className:"features",children:[Object(d.jsx)("li",{children:"All Premium features"}),Object(d.jsx)("li",{children:"Priority support"}),Object(d.jsx)("li",{children:"Early access to new features"})]}),Object(d.jsx)(n.b,{to:"/register",className:"btn btn-outline w-100",children:"Get Started"})]})]})]}),Object(d.jsxs)("section",{className:"mt-5 mb-5",children:[Object(d.jsx)("h2",{className:"text-center mb-4",children:"What Parents Say"}),Object(d.jsxs)("div",{className:"grid-2",children:[Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("p",{className:"mb-3",children:'"Since using Confident Kids, my daughter has become much more willing to try new things and speak up in class. The activities are easy to implement and really work!"'}),Object(d.jsx)("div",{className:"text-right",children:Object(d.jsx)("strong",{children:"- Sarah M., mother of 8-year-old"})})]})}),Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("p",{className:"mb-3",children:'"The structured approach to building confidence has been a game-changer for my son. He\'s now able to manage his anxiety much better and has made new friends at school."'}),Object(d.jsx)("div",{className:"text-right",children:Object(d.jsx)("strong",{children:"- Michael T., father of 10-year-old"})})]})})]})]}),Object(d.jsxs)("section",{className:"upgrade-prompt standard mt-5 mb-5",children:[Object(d.jsxs)("h3",{children:[Object(d.jsx)(m.g,{className:"me-2"})," Start Your Child's Confidence Journey Today"]}),Object(d.jsx)("p",{children:"Join thousands of parents who are helping their children build lasting confidence and resilience."}),Object(d.jsx)(n.b,{to:"/register",className:"upgrade-button",children:"Get Started Now"})]})]});var E=()=>{const[e,s]=Object(a.useState)("profile"),[t,c]=Object(a.useState)(""),[r,i]=Object(a.useState)(""),[l,n]=Object(a.useState)(""),[o,j]=Object(a.useState)(""),[b,u]=Object(a.useState)([]),[p,O]=Object(a.useState)({name:"",age:"",ageGroup:"elementary"}),[x,v]=Object(a.useState)(null),[g,N]=Object(a.useState)(!1),[f,y]=Object(a.useState)(""),[w,k]=Object(a.useState)(""),{currentUser:S,updateProfile:P,userSubscription:C,fetchSubscriptionStatus:A}=h();Object(a.useEffect)((()=>{S&&(c(S.name||""),i(S.email||""),u(S.children||[])),C&&v(C)}),[S,C]);return Object(d.jsxs)("div",{className:"container mt-4",children:[Object(d.jsx)("h1",{className:"mb-4",children:"Your Profile"}),Object(d.jsxs)("div",{className:"profile-tabs",children:[Object(d.jsxs)("button",{className:"profile"===e?"active":"",onClick:()=>s("profile"),children:[Object(d.jsx)(m.t,{className:"me-2"})," Profile"]}),Object(d.jsxs)("button",{className:"children"===e?"active":"",onClick:()=>s("children"),children:[Object(d.jsx)(m.e,{className:"me-2"})," Children"]}),Object(d.jsxs)("button",{className:"subscription"===e?"active":"",onClick:()=>s("subscription"),children:[Object(d.jsx)(m.f,{className:"me-2"})," Subscription"]})]}),f&&Object(d.jsx)("div",{className:"alert alert-danger",role:"alert",children:f}),w&&Object(d.jsx)("div",{className:"alert alert-success",role:"alert",children:w}),"profile"===e&&Object(d.jsxs)("div",{className:"profile-form",children:[Object(d.jsx)("h2",{className:"mb-4",children:"Account Information"}),Object(d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l&&l!==o)return y("Passwords do not match");try{y(""),k(""),N(!0);const e={name:t,email:r,...l?{password:l}:{}};await P(e),k("Profile updated successfully"),n(""),j("")}catch(f){y(f.message||"Failed to update profile")}finally{N(!1)}},children:[Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{htmlFor:"name",children:"Full Name"}),Object(d.jsx)("input",{type:"text",id:"name",className:"form-control",value:t,onChange:e=>c(e.target.value),required:!0})]}),Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",id:"email",className:"form-control",value:r,onChange:e=>i(e.target.value),required:!0})]}),Object(d.jsx)("h3",{className:"mt-4 mb-3",children:"Change Password"}),Object(d.jsx)("p",{className:"text-muted mb-3",children:"Leave blank to keep your current password"}),Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{htmlFor:"password",children:"New Password"}),Object(d.jsx)("input",{type:"password",id:"password",className:"form-control",value:l,onChange:e=>n(e.target.value)})]}),Object(d.jsxs)("div",{className:"form-group mb-4",children:[Object(d.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),Object(d.jsx)("input",{type:"password",id:"confirmPassword",className:"form-control",value:o,onChange:e=>j(e.target.value)})]}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:g,children:g?"Updating...":"Update Profile"})]})]}),"children"===e&&Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"children-list",children:[Object(d.jsx)("h2",{className:"mb-4",children:"Your Children"}),0===b.length?Object(d.jsx)("p",{children:"You haven't added any children yet. Add a child to get started."}):b.map((e=>Object(d.jsxs)("div",{className:"child-item",children:[Object(d.jsxs)("div",{className:"child-info",children:[Object(d.jsx)("div",{className:"child-name",children:e.name}),Object(d.jsxs)("div",{className:"child-age",children:[e.age," years old"]})]}),Object(d.jsxs)("div",{className:"child-actions",children:[Object(d.jsxs)("button",{className:"btn btn-sm btn-outline",onClick:()=>{const s=prompt("Enter new name:",e.name),t=prompt("Enter new age:",e.age);s&&t&&(async(e,s)=>{try{y(""),k(""),N(!0);const t=localStorage.getItem("authToken"),a=await fetch(`https://confident-kids-api.kevin-mcgovern.workers.dev/api/children/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(s)}),c=await a.json();if(!a.ok)throw new Error(c.message||"Failed to update child");u(b.map((t=>t.id===e?{...t,...s}:t))),k("Child updated successfully")}catch(f){y(f.message||"Failed to update child")}finally{N(!1)}})(e.id,{name:s,age:t})},children:[Object(d.jsx)(m.h,{})," Edit"]}),Object(d.jsxs)("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this child profile? This action cannot be undone."))try{y(""),k(""),N(!0);const s=localStorage.getItem("authToken"),t=await fetch(`https://confident-kids-api.kevin-mcgovern.workers.dev/api/children/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}}),a=await t.json();if(!t.ok)throw new Error(a.message||"Failed to delete child");u(b.filter((s=>s.id!==e))),k("Child deleted successfully")}catch(f){y(f.message||"Failed to delete child")}finally{N(!1)}})(e.id),children:[Object(d.jsx)(m.r,{})," Delete"]})]})]},e.id)))]}),Object(d.jsxs)("div",{className:"profile-form mt-4",children:[Object(d.jsx)("h3",{className:"mb-3",children:"Add a Child"}),Object(d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!p.name||!p.age||!p.ageGroup)return y("Please provide name, age, and age group");try{y(""),k(""),N(!0);const e=localStorage.getItem("authToken"),s=await fetch("https://confident-kids-api.kevin-mcgovern.workers.dev/api/children",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(p)}),t=await s.json();if(!s.ok)throw new Error(t.message||"Failed to add child");u([...b,t.child]),O({name:"",age:"",ageGroup:"elementary"}),k("Child added successfully")}catch(f){y(f.message||"Failed to add child")}finally{N(!1)}},children:[Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{htmlFor:"childName",children:"Child's Name"}),Object(d.jsx)("input",{type:"text",id:"childName",className:"form-control",value:p.name,onChange:e=>O({...p,name:e.target.value}),required:!0})]}),Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{htmlFor:"childAge",children:"Child's Age"}),Object(d.jsx)("input",{type:"number",id:"childAge",className:"form-control",min:"1",max:"18",value:p.age,onChange:e=>O({...p,age:e.target.value}),required:!0})]}),Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{htmlFor:"childAgeGroup",children:"Age Group"}),Object(d.jsxs)("select",{id:"childAgeGroup",className:"form-control",value:p.ageGroup,onChange:e=>O({...p,ageGroup:e.target.value}),required:!0,children:[Object(d.jsx)("option",{value:"toddler",children:"Toddler (2-4)"}),Object(d.jsx)("option",{value:"elementary",children:"Elementary (5-10)"}),Object(d.jsx)("option",{value:"teen",children:"Teen (11-18)"})]})]}),Object(d.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:g,children:[Object(d.jsx)(m.k,{className:"me-2"})," Add Child"]})]})]})]}),"subscription"===e&&Object(d.jsxs)("div",{className:"profile-form",children:[Object(d.jsx)("h2",{className:"mb-4",children:"Subscription Details"}),x&&"active"===x.status?Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"card mb-4",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h3",{className:"text-primary mb-3",children:"Premium Subscription"}),Object(d.jsxs)("p",{children:[Object(d.jsx)("strong",{children:"Status:"})," Active"]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("strong",{children:"Plan:"})," ","yearly"===x.plan?"Annual":"monthly"===x.plan?"Monthly":"Lifetime"]}),x.current_period_end&&Object(d.jsxs)("p",{children:[Object(d.jsx)("strong",{children:"Next billing date:"})," ",new Date(1e3*x.current_period_end).toLocaleDateString()]})]})}),Object(d.jsx)("button",{className:"btn btn-danger",onClick:async()=>{if(window.confirm("Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period."))try{y(""),k(""),N(!0);const e=localStorage.getItem("authToken"),s=await fetch("https://confident-kids-api.kevin-mcgovern.workers.dev/api/subscriptions/cancel",{method:"POST",headers:{Authorization:`Bearer ${e}`}}),t=await s.json();if(!s.ok)throw new Error(t.message||"Failed to cancel subscription");await A(),k("Subscription cancelled successfully")}catch(f){y(f.message||"Failed to cancel subscription")}finally{N(!1)}},disabled:g,children:g?"Processing...":"Cancel Subscription"}),Object(d.jsx)("p",{className:"text-muted mt-2",children:"Your subscription will remain active until the end of your current billing period."})]}):Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"alert alert-info",children:[Object(d.jsx)("p",{children:"You don't have an active subscription."}),Object(d.jsx)("p",{children:"Upgrade to Premium to unlock all features and activities."})]}),Object(d.jsx)("a",{href:"/subscription",className:"btn btn-primary",children:"View Subscription Options"})]})]})]})};const F=e=>{let{children:s}=e;const{currentUser:t,loading:a}=h();return a?Object(d.jsx)("div",{children:"Loading..."}):t?s:Object(d.jsx)(l.a,{to:"/login"})},T=e=>{let{children:s}=e;const{hasPremiumAccess:t,loading:a}=h();return a?Object(d.jsx)("div",{children:"Loading..."}):t()?s:Object(d.jsx)(l.a,{to:"/subscription"})};var $=()=>Object(d.jsx)(b,{children:Object(d.jsxs)(n.a,{children:[Object(d.jsx)(p,{}),Object(d.jsx)("main",{className:"main-content",children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"/login",element:Object(d.jsx)(O,{})}),Object(d.jsx)(l.b,{path:"/register",element:Object(d.jsx)(x,{})}),Object(d.jsx)(l.b,{path:"/dashboard",element:Object(d.jsx)(F,{children:Object(d.jsx)(v,{})})}),Object(d.jsx)(l.b,{path:"/pillars/:pillarId",element:Object(d.jsx)(F,{children:Object(d.jsx)(N,{})})}),Object(d.jsx)(l.b,{path:"/subscription",element:Object(d.jsx)(F,{children:Object(d.jsx)(P,{})})}),Object(d.jsx)(l.b,{path:"/rewards",element:Object(d.jsx)(F,{children:Object(d.jsx)(T,{children:Object(d.jsx)(C,{})})})}),Object(d.jsx)(l.b,{path:"/profile",element:Object(d.jsx)(F,{children:Object(d.jsx)(E,{})})}),Object(d.jsx)(l.b,{path:"/",element:Object(d.jsx)(A,{})})]})})]})});i.a.createRoot(document.getElementById("root")).render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)($,{})}))}},[[20,1,2]]]);
//# sourceMappingURL=main.205578c4.chunk.js.map